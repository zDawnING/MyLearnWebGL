/******/!function(e){// webpackBootstrap
/******/ // The module cache
/******/var t={};
/******/
/******/ // The require function
/******/function n(i){
/******/
/******/ // Check if module is in cache
/******/if(t[i])
/******/return t[i].exports;
/******/
/******/ // Create a new module (and put it into the cache)
/******/var r=t[i]={
/******/i,
/******/l:!1,
/******/exports:{}
/******/};
/******/
/******/ // Execute the module function
/******/
/******/
/******/ // Return the exports of the module
/******/return e[i].call(r.exports,r,r.exports,n),
/******/
/******/ // Flag the module as loaded
/******/r.l=!0,r.exports;
/******/}
/******/
/******/
/******/ // expose the modules object (__webpack_modules__)
/******/
/******/
/******/
/******/ // Load entry module and return exports
/******/n.m=e,
/******/
/******/ // expose the module cache
/******/n.c=t,
/******/
/******/ // define getter function for harmony exports
/******/n.d=function(e,t,i){
/******/n.o(e,t)||
/******/Object.defineProperty(e,t,{
/******/configurable:!1,
/******/enumerable:!0,
/******/get:i
/******/})
/******/},
/******/
/******/ // define __esModule on exports
/******/n.r=function(e){
/******/Object.defineProperty(e,"__esModule",{value:!0});
/******/},
/******/
/******/ // getDefaultExport function for compatibility with non-harmony modules
/******/n.n=function(e){
/******/var t=e&&e.__esModule?
/******/function(){return e.default}:
/******/function(){return e};
/******/
/******/return n.d(t,"a",t),t;
/******/},
/******/
/******/ // Object.prototype.hasOwnProperty.call
/******/n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},
/******/
/******/ // __webpack_public_path__
/******/n.p="./",n(n.s="./src/mmd_index.js");
/******/}
/************************************************************************/
/******/({
/***/"./node_modules/@tweenjs/tween.js/src/Tween.js":
/*!*****************************************************!*\
  !*** ./node_modules/@tweenjs/tween.js/src/Tween.js ***!
  \*****************************************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";
/* WEBPACK VAR INJECTION */
/* WEBPACK VAR INJECTION */(function(n){"function"==typeof Symbol&&Symbol.iterator;var i,r=function(){this._tweens={},this._tweensAddedDuringUpdate={}};r.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,t){var n=Object.keys(this._tweens);if(0===n.length)return!1;
// Tweens are updated in "batches". If you add a new tween during an update, then the
// new tween will be updated in the next batch.
// If you remove a tween during an update, it may or may not be updated. However,
// if the removed tween was added during the current batch, then it will not be updated.
for(e=void 0!==e?e:o.now();n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var r=this._tweens[n[i]];r&&!1===r.update(e)&&(r._isPlaying=!1,t||delete this._tweens[n[i]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var o=new r;o.Group=r,o._nextId=0,o.nextId=function(){return o._nextId++},
// Include a performance.now polyfill.
// In node.js, use process.hrtime.
"undefined"==typeof window&&void 0!==n?o.now=function(){var e=n.hrtime();
// Convert [seconds, nanoseconds] to milliseconds.
return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?
// This must be bound, because directly assigning this function
// leads to an invocation exception in Chrome.
o.now=window.performance.now.bind(window.performance):void 0!==Date.now?o.now=Date.now:o.now=function(){return(new Date).getTime()},o.Tween=function(e,t){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=o.Easing.Linear.None,this._interpolationFunction=o.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||o,this._id=o.nextId()},o.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,t){return this._valuesEnd=e,void 0!==t&&(this._duration=t),this},start:function(e){for(var t in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?"string"==typeof e?o.now()+parseFloat(e):e:o.now(),this._startTime+=this._delayTime,this._valuesEnd){
// Check if an Array was provided as property value
if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;
// Create a local copy of the Array with the start value at the front
this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}
// If `to()` specifies a property that doesn't exist in the source object,
// we should not set that property in the object
void 0!==this._object[t]&&(
// Save the starting value.
this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array==!1&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},group:function(e){return this._group=e,this},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,n,i;if(e<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(e-this._startTime)/this._duration,n=0===this._duration||n>1?1:n,i=this._easingFunction(n),this._valuesEnd)
// Don't update properties that do not exist in the source object
if(void 0!==this._valuesStart[t]){var r=this._valuesStart[t]||0,o=this._valuesEnd[t];o instanceof Array?this._object[t]=this._interpolationFunction(o,i):(
// Parses relative end values with start as base (e.g.: +10, -3)
"string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?r+parseFloat(o):parseFloat(o)),
// Protect against non numeric properties.
"number"==typeof o&&(this._object[t]=r+(o-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1===n){if(this._repeat>0){
// Reassign starting values, restart by making startTime = now
for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var a=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=a}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)
// Make the chained tweens start exactly at the time they should,
// even if the `update()` method was called way past the duration of the tween
this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},o.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-o.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*o.Easing.Bounce.In(2*e):.5*o.Easing.Bounce.Out(2*e-1)+.5}}},o.Interpolation={Linear:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),a=o.Interpolation.Utils.Linear;return t<0?a(e[0],e[1],i):t>1?a(e[n],e[n-1],n-i):a(e[r],e[r+1>n?n:r+1],i-r)},Bezier:function(e,t){for(var n=0,i=e.length-1,r=Math.pow,a=o.Interpolation.Utils.Bernstein,s=0;s<=i;s++)n+=r(1-t,i-s)*r(t,s)*e[s]*a(i,s);return n},CatmullRom:function(e,t){var n=e.length-1,i=n*t,r=Math.floor(i),a=o.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(r=Math.floor(i=n*(1+t))),a(e[(r-1+n)%n],e[r],e[(r+1)%n],e[(r+2)%n],i-r)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[n]-(a(e[n],e[n],e[n-1],e[n-1],i-n)-e[n]):a(e[r?r-1:0],e[r],e[n<r+1?n:r+1],e[n<r+2?n:r+2],i-r)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=o.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var i=t;i>1;i--)n*=i;return e[t]=n,n}}(),CatmullRom:function(e,t,n,i,r){var o=.5*(n-e),a=.5*(i-t),s=r*r;return(2*t-2*n+o+a)*(r*s)+(-3*t+3*n-2*o-a)*s+o*r+t}}},void 0===(i=function(){return o}.apply(t,[]))||(e.exports=i)}).call(this,n(/*! ./../../../process/browser.js */"./node_modules/process/browser.js"))
/***/},
/***/"./node_modules/css-loader/index.js!./src/style/common/commom.css":
/*!***************************************************************!*\
  !*** ./node_modules/css-loader!./src/style/common/commom.css ***!
  \***************************************************************/
/*! no static exports found */
/***/function(e,t,n){
// imports
// module
(e.exports=n(/*! ../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,"body{\n\tmargin: 0;\n\tpadding: 0;\n\toverflow: hidden;\n}\n\n.blue_btn {\n\tdisplay: block;\n    position: fixed;\n    right: .76923077em;\n    bottom: .76923077em;\n    color: #fff;\n    background-color: #347be6;\n    line-height: 1;\n    font-size: 1.07692308em;\n    padding: .61538462em 1.23076923em;\n    z-index: 10000;\n    border-radius: .30769231em;\n    box-shadow: 0 0 0.61538462em rgba(0,0,0,.4);\n}",""])},
/***/"./node_modules/css-loader/index.js!./src/style/common/layer.css":
/*!**************************************************************!*\
  !*** ./node_modules/css-loader!./src/style/common/layer.css ***!
  \**************************************************************/
/*! no static exports found */
/***/function(e,t,n){
// imports
// module
(e.exports=n(/*! ../../../node_modules/css-loader/lib/css-base.js */"./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,".layui-m-layer{position:relative;z-index:19891014}.layui-m-layer *{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}.layui-m-layermain,.layui-m-layershade{position:fixed;left:0;top:0;width:100%;height:100%}.layui-m-layershade{background-color:rgba(0,0,0,.7);pointer-events:auto}.layui-m-layermain{display:table;font-family:Helvetica,arial,sans-serif;pointer-events:none}.layui-m-layermain .layui-m-layersection{display:table-cell;vertical-align:middle;text-align:center}.layui-m-layerchild{position:relative;display:inline-block;text-align:left;background-color:#fff;font-size:14px;border-radius:5px;box-shadow:0 0 8px rgba(0,0,0,.1);pointer-events:auto;-webkit-overflow-scrolling:touch;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:.2s;animation-duration:.2s}@-webkit-keyframes layui-m-anim-scale{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes layui-m-anim-scale{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}.layui-m-anim-scale{animation-name:layui-m-anim-scale;-webkit-animation-name:layui-m-anim-scale}@-webkit-keyframes layui-m-anim-up{0%{opacity:0;-webkit-transform:translateY(800px);transform:translateY(800px)}100%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes layui-m-anim-up{0%{opacity:0;-webkit-transform:translateY(800px);transform:translateY(800px)}100%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}.layui-m-anim-up{-webkit-animation-name:layui-m-anim-up;animation-name:layui-m-anim-up}.layui-m-layer0 .layui-m-layerchild{width:90%;max-width:640px}.layui-m-layer1 .layui-m-layerchild{border:none;border-radius:0}.layui-m-layer2 .layui-m-layerchild{width:auto;max-width:260px;min-width:40px;border:none;background:0 0;box-shadow:none;color:#fff}.layui-m-layerchild h3{padding:0 10px;height:60px;line-height:60px;font-size:16px;font-weight:400;border-radius:5px 5px 0 0;text-align:center}.layui-m-layerbtn span,.layui-m-layerchild h3{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.layui-m-layercont{padding:50px 30px;line-height:22px;text-align:center}.layui-m-layer1 .layui-m-layercont{padding:0;text-align:left}.layui-m-layer2 .layui-m-layercont{text-align:center;padding:0;line-height:0}.layui-m-layer2 .layui-m-layercont i{width:25px;height:25px;margin-left:8px;display:inline-block;background-color:#fff;border-radius:100%;-webkit-animation:layui-m-anim-loading 1.4s infinite ease-in-out;animation:layui-m-anim-loading 1.4s infinite ease-in-out;-webkit-animation-fill-mode:both;animation-fill-mode:both}.layui-m-layerbtn,.layui-m-layerbtn span{position:relative;text-align:center;border-radius:0 0 5px 5px}.layui-m-layer2 .layui-m-layercont p{margin-top:20px}@-webkit-keyframes layui-m-anim-loading{0%,100%,80%{transform:scale(0);-webkit-transform:scale(0)}40%{transform:scale(1);-webkit-transform:scale(1)}}@keyframes layui-m-anim-loading{0%,100%,80%{transform:scale(0);-webkit-transform:scale(0)}40%{transform:scale(1);-webkit-transform:scale(1)}}.layui-m-layer2 .layui-m-layercont i:first-child{margin-left:0;-webkit-animation-delay:-.32s;animation-delay:-.32s}.layui-m-layer2 .layui-m-layercont i.layui-m-layerload{-webkit-animation-delay:-.16s;animation-delay:-.16s}.layui-m-layer2 .layui-m-layercont>div{line-height:22px;padding-top:7px;margin-bottom:20px;font-size:14px}.layui-m-layerbtn{display:box;display:-moz-box;display:-webkit-box;width:100%;height:50px;line-height:50px;font-size:0;border-top:1px solid #D0D0D0;background-color:#F2F2F2}.layui-m-layerbtn span{display:block;-moz-box-flex:1;box-flex:1;-webkit-box-flex:1;font-size:14px;cursor:pointer}.layui-m-layerbtn span[yes]{color:#40AFFE}.layui-m-layerbtn span[no]{border-right:1px solid #D0D0D0;border-radius:0 0 0 5px}.layui-m-layerbtn span:active{background-color:#F6F6F6}.layui-m-layerend{position:absolute;right:7px;top:10px;width:30px;height:30px;border:0;font-weight:400;background:0 0;cursor:pointer;-webkit-appearance:none;font-size:30px}.layui-m-layerend::after,.layui-m-layerend::before{position:absolute;left:5px;top:15px;content:'';width:18px;height:1px;background-color:#999;transform:rotate(45deg);-webkit-transform:rotate(45deg);border-radius:3px}.layui-m-layerend::after{transform:rotate(-45deg);-webkit-transform:rotate(-45deg)}body .layui-m-layer .layui-m-layer-footer{position:fixed;width:95%;max-width:100%;margin:0 auto;left:0;right:0;bottom:10px;background:0 0}.layui-m-layer-footer .layui-m-layercont{padding:20px;border-radius:5px 5px 0 0;background-color:rgba(255,255,255,.8)}.layui-m-layer-footer .layui-m-layerbtn{display:block;height:auto;background:0 0;border-top:none}.layui-m-layer-footer .layui-m-layerbtn span{background-color:rgba(255,255,255,.8)}.layui-m-layer-footer .layui-m-layerbtn span[no]{color:#FD482C;border-top:1px solid #c2c2c2;border-radius:0 0 5px 5px}.layui-m-layer-footer .layui-m-layerbtn span[yes]{margin-top:10px;border-radius:5px}body .layui-m-layer .layui-m-layer-msg{width:auto;max-width:90%;margin:0 auto;bottom:-150px;background-color:rgba(0,0,0,.7);color:#fff}.layui-m-layer-msg .layui-m-layercont{padding:10px 20px}",""])},
/***/"./node_modules/css-loader/lib/css-base.js":
/*!*************************************************!*\
  !*** ./node_modules/css-loader/lib/css-base.js ***!
  \*************************************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";
/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
e.exports=function(e){var t=[];
// return the list of modules as css string
return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var r=
// Adapted from convert-source-map (MIT)
function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}
/***/(i),o=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[n].concat(o).concat([r]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},
// import a list of modules into the list
t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<e.length;r++){var a=e[r];
// skip already imported module
// this implementation is not 100% perfect for weird media query combinations
//  when a module is imported multiple times with different media queries.
//  I hope this will never occur (Hey this way we have smaller bundles)
"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},
/***/"./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";
// shim for using process in browser
var i,r,o=e.exports={};
// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.
function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)
//normal enviroments in sane situations
return setTimeout(e,0);
// if setTimeout wasn't available but was latter defined
if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{
// when when somebody has screwed with setTimeout but no I.E. maddness
return i(e,0)}catch(t){try{
// When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
return i.call(null,e,0)}catch(t){
// same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(e){i=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],h=!1,d=-1;function p(){h&&c&&(h=!1,c.length?u=c.concat(u):d=-1,u.length&&f())}function f(){if(!h){var e=l(p);h=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,h=!1,function(e){if(r===clearTimeout)
//normal enviroments in sane situations
return clearTimeout(e);
// if clearTimeout wasn't available but was latter defined
if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{
// when when somebody has screwed with setTimeout but no I.E. maddness
r(e)}catch(t){try{
// When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
return r.call(null,e)}catch(t){
// same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
// Some versions of I.E. have different rules for clearTimeout vs setTimeout
return r.call(this,e)}}}(e)}}
// v8 likes predictible objects
function m(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||h||l(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",// empty string to avoid regexp issues
o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},
/***/"./node_modules/style-loader/lib/addStyles.js":
/*!****************************************************!*\
  !*** ./node_modules/style-loader/lib/addStyles.js ***!
  \****************************************************/
/*! no static exports found */
/***/function(e,t,n){
/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
var i={},r=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){
// Test for IE <= 9 as proposed by Browserhacks
// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
// Tests for existence of standard globals is to allow style-loader
// to operate correctly into non-standard environments
// @see https://github.com/webpack-contrib/style-loader/issues/177
return window&&document&&document.all&&!window.atob}),o=function(e){var t={};return function(e){
// If passing function in options, then use it for resolve "head" element.
// Useful for Shadow Root style i.e
// {
//   insertInto: function () { return document.querySelector("#foo").shadowRoot }
// }
if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);
// Special case to return head of iframe instead of iframe itself
if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{
// This will throw an exception if access to iframe is blocked
// due to cross-origin restrictions
n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),a=null,s=0,l=[],c=n(/*! ./urls */"./node_modules/style-loader/lib/urls.js");function u(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(g(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(g(r.parts[a],t));i[r.id]={id:r.id,refs:1,parts:s}}}}function h(e,t){for(var n=[],i={},r=0;r<e.length;r++){var o=e[r],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function d(e,t){var n=o(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=l[l.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),l.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=o(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function p(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function f(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),m(t,e.attrs),d(e,t),t}function m(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function g(e,t){var n,i,r,o;
// If a transform function was defined, run it on the css
if(t.transform&&e.css){if(!(o=t.transform(e.css)))
// If the transform function returns a falsy value, don't add this css.
// This allows conditional loading of css
return function(){
// noop
};
// If transform returns a value, use that instead of the original css.
// This allows running runtime transformations on the css.
e.css=o}if(t.singleton){var l=s++;n=a||(a=f(t)),i=y.bind(null,n,l,!1),r=y.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",m(t,e.attrs),d(e,t),t}(t),i=function(e,t,n){var i=n.css,r=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||o)&&(i=c(i));r&&(
// http://stackoverflow.com/a/26603875
i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}
/***/.bind(null,n,t),r=function(){p(n),n.href&&URL.revokeObjectURL(n.href)}):(n=f(t),i=function(e,t){var n=t.css,i=t.media;i&&e.setAttribute("media",i);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){p(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},
// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
// tags it will allow on a page
t.singleton||"boolean"==typeof t.singleton||(t.singleton=r()),
// By default, add <style> tags to the <head> element
t.insertInto||(t.insertInto="head"),
// By default, add <style> tags to the bottom of the target
t.insertAt||(t.insertAt="bottom");var n=h(e,t);return u(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var a=n[o];(s=i[a.id]).refs--,r.push(s)}e&&u(h(e,t),t);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete i[s.id]}}}};var v=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function y(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=v(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},
/***/"./node_modules/style-loader/lib/urls.js":
/*!***********************************************!*\
  !*** ./node_modules/style-loader/lib/urls.js ***!
  \***********************************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";
/**
 * When source maps are enabled, `style-loader` uses a link element with a data-uri to
 * embed the css on the page. This breaks all relative urls because now they are relative to a
 * bundle instead of the current page.
 *
 * One solution is to only use full urls, but that may be impossible.
 *
 * Instead, this function "fixes" the relative urls to be absolute according to the current page location.
 *
 * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.
 *
 */e.exports=function(e){
// get current location
var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");
// blank or null?
if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");
// send back the fixed css
return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){
// strip quotes (if they exist)
var r,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});
// already a full url? no change
return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(
//TODO: should we add protocol?
r=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:i+o.replace(/^\.\//,""),"url("+JSON.stringify(r)+")");
// convert the url to a full url
})}},
/***/"./node_modules/three/build/three.module.js":
/*!**************************************************!*\
  !*** ./node_modules/three/build/three.module.js ***!
  \**************************************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};// Polyfills
/**
 * https://github.com/mrdoob/eventdispatcher.js/
 */
function r(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(// Missing in IE
// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger
Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),//
void 0===Math.sign&&(// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign
Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&// Missing in IE
// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name
Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}),Object.assign(r.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e)}}}});var o="92",a=0,s=1,l=2,c=1,u=2,h=0,d=1,p=2,f=0,m=1,g=2,v=0,y=1,x=2,b=3,_=4,w=5,M=100,E=101,T=102,A=103,S=104,C=200,R=201,L=202,P=203,O=204,I=205,B=206,D=207,U=208,N=209,F=210,k=0,z=1,H=2,V=3,G=4,j=5,W=6,X=7,q=0,Y=1,Q=2,Z=0,J=1,K=2,$=3,ee=4,te=301,ne=302,ie=303,re=304,oe=305,ae=306,se=307,le=1e3,ce=1001,ue=1002,he=1003,de=1004,pe=1005,fe=1006,me=1007,ge=1008,ve=1009,ye=1010,xe=1011,be=1012,_e=1013,we=1014,Me=1015,Ee=1016,Te=1017,Ae=1018,Se=1019,Ce=1020,Re=1021,Le=1022,Pe=1023,Oe=1024,Ie=1025,Be=Pe,De=1026,Ue=1027,Ne=33776,Fe=33777,ke=33778,ze=33779,He=35840,Ve=35841,Ge=35842,je=35843,We=36196,Xe=37808,qe=37809,Ye=37810,Qe=37811,Ze=37812,Je=37813,Ke=37814,$e=37815,et=37816,tt=37817,nt=37818,it=37819,rt=37820,ot=37821,at=2201,st=2400,lt=0,ct=1,ut=2,ht=3e3,dt=3001,pt=3007,ft=3002,mt=3004,gt=3005,vt=3006,yt=3200,xt=3201,bt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136
var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;// .toUpperCase() here flattens concatenated strings to save heap memory space.
return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},// compute euclidian modulo of m % n
// https://en.wikipedia.org/wiki/Modulo_operation
euclideanModulo:function(e,t){return(e%t+t)%t},// Linear mapping from range <a1, a2> to range <b1, b2>
mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},// https://en.wikipedia.org/wiki/Linear_interpolation
lerp:function(e,t,n){return(1-n)*e+n*t},// http://en.wikipedia.org/wiki/Smoothstep
smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},// Random integer from <low, high> interval
randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},// Random float from <low, high> interval
randFloat:function(e,t){return e+Math.random()*(t-e)},// Random float from <-range/2, range/2> interval
randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*bt.DEG2RAD},radToDeg:function(e){return e*bt.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};
/**
 * @author mrdoob / http://mrdoob.com/
 * @author philogb / http://blog.thejit.org/
 * @author egraether / http://egraether.com/
 * @author zz85 / http://www.lab4games.net/zz85/blog
 */
function _t(e,t){this.x=e||0,this.y=t||0}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author supereggbert / http://www.paulbrunt.co.uk/
 * @author philogb / http://blog.thejit.org/
 * @author jordi_ros / http://plattsoft.com
 * @author D1plo1d / http://github.com/D1plo1d
 * @author alteredq / http://alteredqualia.com/
 * @author mikael emtinger / http://gomo.se/
 * @author timknip / http://www.floorplanner.com/
 * @author bhouston / http://clara.io
 * @author WestLangley / http://github.com/WestLangley
 */
function wt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}
/**
 * @author mikael emtinger / http://gomo.se/
 * @author alteredq / http://alteredqualia.com/
 * @author WestLangley / http://github.com/WestLangley
 * @author bhouston / http://clara.io
 */
function Mt(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author kile / http://kile.stravaganza.org/
 * @author philogb / http://blog.thejit.org/
 * @author mikael emtinger / http://gomo.se/
 * @author egraether / http://egraether.com/
 * @author WestLangley / http://github.com/WestLangley
 */
function Et(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}
/**
 * @author alteredq / http://alteredqualia.com/
 * @author WestLangley / http://github.com/WestLangley
 * @author bhouston / http://clara.io
 * @author tschw
 */
function Tt(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(_t.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(_t.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){// assumes min < max, componentwise
return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new _t,t=new _t;return function(n,i){return e.set(n,n),t.set(i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){// computes the angle in radians with respect to the positive x-axis
var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this}}),Object.assign(wt.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,o,a,s,l,c,u,h,d,p,f,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new wt).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new Et;return function(t){var n=this.elements,i=t.elements,r=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[8]=i[8]*a,n[9]=i[9]*a,n[10]=i[10]*a,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){var h=o*c,d=o*u,p=a*c,f=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=d+p*l,t[5]=h-f*l,t[9]=-a*s,t[2]=f-h*l,t[6]=p+d*l,t[10]=o*s}else if("YXZ"===e.order){var m=s*c,g=s*u,v=l*c,y=l*u;t[0]=m+y*a,t[4]=v*a-g,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=g*a-v,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*c,g=s*u,v=l*c,y=l*u;t[0]=m-y*a,t[4]=-o*u,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*c,t[9]=y-m*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){h=o*c,d=o*u,p=a*c,f=a*u;t[0]=s*c,t[4]=p*l-d,t[8]=h*l+f,t[1]=s*u,t[5]=f*l+h,t[9]=d*l-p,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var x=o*s,b=o*l,_=a*s,w=a*l;t[0]=s*c,t[4]=w-x*u,t[8]=_*u+b,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=b*u+_,t[10]=x-w*u}else if("XZY"===e.order){x=o*s,b=o*l,_=a*s,w=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=x*u+w,t[5]=o*c,t[9]=b*u-_,t[2]=_*u-b,t[6]=a*c,t[10]=w*u+x}// last column
return t[3]=0,t[7]=0,t[11]=0,// bottom row
t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e._x,i=e._y,r=e._z,o=e._w,a=n+n,s=i+i,l=r+r,c=n*a,u=n*s,h=n*l,d=i*s,p=i*l,f=r*l,m=o*a,g=o*s,v=o*l;return t[0]=1-(d+f),t[4]=u-v,t[8]=h+g,t[1]=u+v,t[5]=1-(c+f),t[9]=p-m,t[2]=h-g,t[6]=p+m,t[10]=1-(c+d),// last column
t[3]=0,t[7]=0,t[11]=0,// bottom row
t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new Et,t=new Et,n=new Et;return function(i,r,o){var a=this.elements;return n.subVectors(i,r),0===n.lengthSq()&&(// eye and target are in the same position
n.z=1),n.normalize(),e.crossVectors(o,n),0===e.lengthSq()&&(// up and z are parallel
1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],b=n[15],_=i[0],w=i[4],M=i[8],E=i[12],T=i[1],A=i[5],S=i[9],C=i[13],R=i[2],L=i[6],P=i[10],O=i[14],I=i[3],B=i[7],D=i[11],U=i[15];return r[0]=o*_+a*T+s*R+l*I,r[4]=o*w+a*A+s*L+l*B,r[8]=o*M+a*S+s*P+l*D,r[12]=o*E+a*C+s*O+l*U,r[1]=c*_+u*T+h*R+d*I,r[5]=c*w+u*A+h*L+d*B,r[9]=c*M+u*S+h*P+d*D,r[13]=c*E+u*C+h*O+d*U,r[2]=p*_+f*T+m*R+g*I,r[6]=p*w+f*A+m*L+g*B,r[10]=p*M+f*S+m*P+g*D,r[14]=p*E+f*C+m*O+g*U,r[3]=v*_+y*T+x*R+b*I,r[7]=v*w+y*A+x*L+b*B,r[11]=v*M+y*S+x*P+b*D,r[15]=v*E+y*C+x*O+b*U,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new Et;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];//TODO: make this more efficient
//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )
return e[3]*(+r*s*u-i*l*u-r*a*h+n*l*h+i*a*d-n*s*d)+e[7]*(+t*s*d-t*l*h+r*o*h-i*o*d+i*l*c-r*s*c)+e[11]*(+t*l*u-t*a*d-r*o*u+n*o*d+r*a*c-n*l*c)+e[15]*(-i*a*c-t*s*u+t*a*h+i*o*u-n*o*h+n*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm
var n=this.elements,i=e.elements,r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=i[8],p=i[9],f=i[10],m=i[11],g=i[12],v=i[13],y=i[14],x=i[15],b=p*y*h-v*f*h+v*u*m-c*y*m-p*u*x+c*f*x,_=g*f*h-d*y*h-g*u*m+l*y*m+d*u*x-l*f*x,w=d*v*h-g*p*h+g*c*m-l*v*m-d*c*x+l*p*x,M=g*p*u-d*v*u-g*c*f+l*v*f+d*c*y-l*p*y,E=r*b+o*_+a*w+s*M;if(0===E){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(T),this.identity()}var A=1/E;return n[0]=b*A,n[1]=(v*f*s-p*y*s-v*a*m+o*y*m+p*a*x-o*f*x)*A,n[2]=(c*y*s-v*u*s+v*a*h-o*y*h-c*a*x+o*u*x)*A,n[3]=(p*u*s-c*f*s-p*a*h+o*f*h+c*a*m-o*u*m)*A,n[4]=_*A,n[5]=(d*y*s-g*f*s+g*a*m-r*y*m-d*a*x+r*f*x)*A,n[6]=(g*u*s-l*y*s-g*a*h+r*y*h+l*a*x-r*u*x)*A,n[7]=(l*f*s-d*u*s+d*a*h-r*f*h-l*a*m+r*u*m)*A,n[8]=w*A,n[9]=(g*p*s-d*v*s-g*o*m+r*v*m+d*o*x-r*p*x)*A,n[10]=(l*v*s-g*c*s+g*o*h-r*v*h-l*o*x+r*c*x)*A,n[11]=(d*c*s-l*p*s-d*o*h+r*p*h+l*o*m-r*c*m)*A,n[12]=M*A,n[13]=(d*v*a-g*p*a+g*o*f-r*v*f-d*o*y+r*p*y)*A,n[14]=(g*c*a-l*v*a-g*o*u+r*v*u+l*o*y-r*c*y)*A,n[15]=(l*p*a-d*c*a+d*o*u-r*p*u-l*o*f+r*c*f)*A,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){// Based on http://www.gamedev.net/reference/articles/article1199.asp
var n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,a=e.y,s=e.z,l=r*o,c=r*a;return this.set(l*o+n,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+n,c*s-i*o,0,l*s-i*a,c*s+i*o,r*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new Et,t=new wt;return function(n,i,r){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],// scale the rotation part
t.copy(this);var c=1/a,u=1/s,h=1/l;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=u,t.elements[5]*=u,t.elements[6]*=u,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,i.setFromRotationMatrix(t),r.x=a,r.y=s,r.z=l,this}}(),makePerspective:function(e,t,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*r/(t-e),l=2*r/(n-i),c=(t+e)/(t-e),u=(n+i)/(n-i),h=-(o+r)/(o-r),d=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,i,r,o){var a=this.elements,s=1/(t-e),l=1/(n-i),c=1/(o-r),u=(t+e)*s,h=(n+i)*l,d=(o+r)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(Mt,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,o,a){// fuzz-free, array-based Quaternion SLERP operation
var s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3],h=r[o+0],d=r[o+1],p=r[o+2],f=r[o+3];if(u!==f||s!==h||l!==d||c!==p){var m=1-a,g=s*h+l*d+c*p+u*f,v=g>=0?1:-1,y=1-g*g;// Skip the Slerp for tiny steps to avoid numeric problems:
if(y>Number.EPSILON){var x=Math.sqrt(y),b=Math.atan2(x,g*v);m=Math.sin(m*b)/x,a=Math.sin(a*b)/x}var _=a*v;// Normalize in case we just did a lerp:
if(s=s*m+h*_,l=l*m+d*_,c=c*m+p*_,u=u*m+f*_,m===1-a){var w=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=w,l*=w,c*=w,u*=w}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}}),Object.defineProperties(Mt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(Mt.prototype,{set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,o=e.order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),h=s(n/2),d=s(i/2),p=s(r/2);// http://www.mathworks.com/matlabcentral/fileexchange/
// 	20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/
//	content/SpinCalc.m
return"XYZ"===o?(this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p):"YXZ"===o?(this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p):"ZXY"===o?(this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p):"ZYX"===o?(this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p):"YZX"===o?(this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p):"XZY"===o&&(this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm
// assumes axis is normalized
var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm
// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)
var t,n=e.elements,i=n[0],r=n[4],o=n[8],a=n[1],s=n[5],l=n[9],c=n[2],u=n[6],h=n[10],d=i+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(u-l)*t,this._y=(o-c)*t,this._z=(a-r)*t):i>s&&i>h?(t=2*Math.sqrt(1+i-s-h),this._w=(u-l)/t,this._x=.25*t,this._y=(r+a)/t,this._z=(o+c)/t):s>h?(t=2*Math.sqrt(1+s-i-h),this._w=(o-c)/t,this._x=(r+a)/t,this._y=.25*t,this._z=(l+u)/t):(t=2*Math.sqrt(1+h-i-s),this._w=(a-r)/t,this._x=(o+c)/t,this._y=(l+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){// assumes direction vectors vFrom and vTo are normalized
var e,t=new Et;return function(n,i){return void 0===t&&(t=new Et),(e=n.dot(i)+1)<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){// quaternion is assumed to have unit length
return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm
var n=e._x,i=e._y,r=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+i*l-r*s,this._y=i*c+o*s+r*a-n*l,this._z=r*c+o*l+n*s-i*a,this._w=o*c-n*a-i*s-r*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,o=this._w,a=o*e._w+n*e._x+i*e._y+r*e._z;// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/
if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var s=Math.sqrt(1-a*a);if(Math.abs(s)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var l=Math.atan2(s,a),c=Math.sin((1-t)*l)/s,u=Math.sin(t*l)/s;return this._w=o*c+this._w*u,this._x=n*c+this._x*u,this._y=i*c+this._y*u,this._z=r*c+this._z*u,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Et.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new Mt;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new Mt;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*i-a*n,c=s*n+a*t-r*i,u=s*i+r*n-o*t,h=-r*t-o*n-a*i;// calculate result * inverse quat
return this.x=l*s+h*-r+c*-a-u*-o,this.y=c*s+h*-o+u*-r-l*-a,this.z=u*s+h*-a+l*-o-c*-r,this},project:function(){var e=new wt;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new wt;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){// input: THREE.Matrix4 affine matrix
// vector interpreted as a direction
var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){// assumes min < max, componentwise
return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new Et,t=new Et;return function(n,i){return e.set(n,n,n),t.set(i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},// TODO lengthSquared?
lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,o=t.x,a=t.y,s=t.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Et;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){// reflect incident vector off plane orthogonal to normal
// normal is assumed to have unit length
var e=new Et;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());// clamp, to handle numerical problems
return Math.acos(bt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Tt.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,o,a,s,l){var c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=r,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new Et;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],x=i[7],b=i[2],_=i[5],w=i[8];return r[0]=o*f+a*v+s*b,r[3]=o*m+a*y+s*_,r[6]=o*g+a*x+s*w,r[1]=l*f+c*v+u*b,r[4]=l*m+c*y+u*_,r[7]=l*g+c*x+u*w,r[2]=h*f+d*v+p*b,r[5]=h*m+d*y+p*_,r[8]=h*g+d*x+p*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*r*c+n*a*s+i*r*l-i*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,i=this.elements,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5],u=n[6],h=n[7],d=n[8],p=d*l-c*h,f=c*u-d*s,m=h*s-l*u,g=r*p+o*f+a*m;if(0===g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return i[0]=p*y,i[1]=(a*h-d*o)*y,i[2]=(c*o-a*l)*y,i[3]=f*y,i[4]=(d*r-a*u)*y,i[5]=(a*s-c*r)*y,i[6]=m*y,i[7]=(o*u-h*r)*y,i[8]=(l*r-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,o,a){var s=Math.cos(r),l=Math.sin(r);this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-i*l,i*s,-i*(-l*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],l=i[4],c=i[7];return i[0]=t*r+n*s,i[3]=t*o+n*l,i[6]=t*a+n*c,i[1]=-n*r+t*s,i[4]=-n*o+t*l,i[7]=-n*a+t*c,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 * @author szimek / https://github.com/szimek/
 */
var At=0;function St(e,t,n,i,r,o,a,s,l,c){Object.defineProperty(this,"id",{value:At++}),this.uuid=bt.generateUUID(),this.name="",this.image=void 0!==e?e:St.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:St.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:ce,this.wrapT=void 0!==i?i:ce,this.magFilter=void 0!==r?r:fe,this.minFilter=void 0!==o?o:ge,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:Pe,this.type=void 0!==s?s:ve,this.offset=new _t(0,0),this.repeat=new _t(1,1),this.center=new _t(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Tt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)
// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.
//
// Also changing the encoding after already used by a Material will not automatically make the Material
// update.  You need to explicitly call Material.needsUpdate to trigger it to recompile.
this.encoding=void 0!==c?c:ht,this.version=0,this.onUpdate=null}
/**
 * @author supereggbert / http://www.paulbrunt.co.uk/
 * @author philogb / http://blog.thejit.org/
 * @author mikael emtinger / http://gomo.se/
 * @author egraether / http://egraether.com/
 * @author WestLangley / http://github.com/WestLangley
 */
function Ct(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}
/**
 * @author szimek / https://github.com/szimek/
 * @author alteredq / http://alteredqualia.com/
 * @author Marius Kintel / https://github.com/kintel
 */
/*
 In options, we can specify:
 * Texture parameters for an auto-generated target texture
 * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers
*/
function Rt(e,t,n){this.width=e,this.height=t,this.scissor=new Ct(0,0,e,t),this.scissorTest=!1,this.viewport=new Ct(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=fe),this.texture=new St(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}
/**
 * @author alteredq / http://alteredqualia.com
 */
function Lt(e,t,n){Rt.call(this,e,t,n),this.activeCubeFace=0,// PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5
this.activeMipMapLevel=0}
/**
 * @author alteredq / http://alteredqualia.com/
 */
function Pt(e,t,n,i,r,o,a,s,l,c,u,h){St.call(this,null,o,a,s,l,c,i,r,u,h),this.image={data:e,width:t,height:n},this.magFilter=void 0!==l?l:he,this.minFilter=void 0!==c?c:he,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}
/**
 * @author bhouston / http://clara.io
 * @author WestLangley / http://github.com/WestLangley
 */
function Ot(e,t){this.min=void 0!==e?e:new Et(1/0,1/0,1/0),this.max=void 0!==t?t:new Et(-1/0,-1/0,-1/0)}
/**
 * @author bhouston / http://clara.io
 * @author mrdoob / http://mrdoob.com/
 */
function It(e,t){this.center=void 0!==e?e:new Et,this.radius=void 0!==t?t:0}
/**
 * @author bhouston / http://clara.io
 */
function Bt(e,t){// normal is assumed to be normalized
this.normal=void 0!==e?e:new Et(1,0,0),this.constant=void 0!==t?t:0}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 * @author bhouston / http://clara.io
 */
function Dt(e,t,n,i,r,o){this.planes=[void 0!==e?e:new Bt,void 0!==t?t:new Bt,void 0!==n?n:new Bt,void 0!==i?i:new Bt,void 0!==r?r:new Bt,void 0!==o?o:new Bt]}St.DEFAULT_IMAGE=void 0,St.DEFAULT_MAPPING=300,St.prototype=Object.assign(Object.create(r.prototype),{constructor:St,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){// TODO: Move to THREE.Image
var i=this.image;void 0===i.uuid&&(i.uuid=bt.generateUUID()),t||void 0!==e.images[i.uuid]||(e.images[i.uuid]={uuid:i.uuid,url:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height;var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(i)}),n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case le:e.x=e.x-Math.floor(e.x);break;case ce:e.x=e.x<0?0:1;break;case ue:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case le:e.y=e.y-Math.floor(e.y);break;case ce:e.y=e.y<0?0:1;break;case ue:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(St.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ct.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm
// q is assumed to be normalized
this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm
// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)
var t,n,i,r,// margin to distinguish between 0 and 180 degrees
o=e.elements,a=o[0],s=o[4],l=o[8],c=o[1],u=o[5],h=o[9],d=o[2],p=o[6],f=o[10];if(Math.abs(s-c)<.01&&Math.abs(l-d)<.01&&Math.abs(h-p)<.01){// singularity found
// first check for identity matrix which must have +1 for all terms
// in leading diagonal and zero in other terms
if(Math.abs(s+c)<.1&&Math.abs(l+d)<.1&&Math.abs(h+p)<.1&&Math.abs(a+u+f-3)<.1)// this singularity is identity matrix so angle = 0
return this.set(1,0,0,0),this;// zero angle, arbitrary axis
// otherwise this singularity is angle = 180
t=Math.PI;var m=(a+1)/2,g=(u+1)/2,v=(f+1)/2,y=(s+c)/4,x=(l+d)/4,b=(h+p)/4;return m>g&&m>v?// m11 is the largest diagonal term
m<.01?(n=0,i=.707106781,r=.707106781):(i=y/(n=Math.sqrt(m)),r=x/n):g>v?// m22 is the largest diagonal term
g<.01?(n=.707106781,i=0,r=.707106781):(n=y/(i=Math.sqrt(g)),r=b/i):// m33 is the largest diagonal term so base result on this
v<.01?(n=.707106781,i=.707106781,r=0):(n=x/(r=Math.sqrt(v)),i=b/r),this.set(n,i,r,t),this;// return 180 deg rotation
}// as we have reached here there are no singularities so we can handle normally
var _=Math.sqrt((p-h)*(p-h)+(l-d)*(l-d)+(c-s)*(c-s));// used to normalize
return Math.abs(_)<.001&&(_=1),// prevent divide by zero, should not happen if matrix is orthogonal and should be
// caught by singularity test above, but I've left it in just in case
this.x=(p-h)/_,this.y=(l-d)/_,this.z=(c-s)/_,this.w=Math.acos((a+u+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){// assumes min < max, componentwise
return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,i){return void 0===e&&(e=new Ct,t=new Ct),e.set(n,n,n,n),t.set(i,i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Rt.prototype=Object.assign(Object.create(r.prototype),{constructor:Rt,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Lt.prototype=Object.create(Rt.prototype),Lt.prototype.constructor=Lt,Lt.prototype.isWebGLRenderTargetCube=!0,Pt.prototype=Object.create(St.prototype),Pt.prototype.constructor=Pt,Pt.prototype.isDataTexture=!0,Object.assign(Ot.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=e.length;s<l;s+=3){var c=e[s],u=e[s+1],h=e[s+2];c<t&&(t=c),u<n&&(n=u),h<i&&(i=h),c>r&&(r=c),u>o&&(o=u),h>a&&(a=h)}return this.min.set(t,n,i),this.max.set(r,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=e.count;s<l;s++){var c=e.getX(s),u=e.getY(s),h=e.getZ(s);c<t&&(t=c),u<n&&(n=u),h<i&&(i=h),c>r&&(r=c),u>o&&(o=u),h>a&&(a=h)}return this.min.set(t,n,i),this.max.set(r,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Et;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes
return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Et),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Et),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){// Computes the world-axis-aligned bounding box of an object (including its children),
// accounting for both the object's, and children's, world transforms
var e,t,n,i=new Et;function r(r){var o=r.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,n=a.length;t<n;t++)i.copy(a[t]),i.applyMatrix4(r.matrixWorld),e.expandByPoint(i)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)i.fromBufferAttribute(s,t).applyMatrix4(r.matrixWorld),e.expandByPoint(i)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(r),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){// This can potentially have a divide by zero if the box
// has a size dimension of 0.
return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Et),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){// using 6 splitting planes to rule out intersections.
return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new Et;return function(t){// If that point is inside the sphere, the AABB and sphere intersect.
// Find the point on the AABB closest to the sphere center.
return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){// We compute the minimum and maximum dot product values. If those values
// are on the same side (back or front) of the plane, then there is no intersection.
var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){// triangle centered vertices
var e=new Et,t=new Et,n=new Et,i=new Et,r=new Et,o=new Et,a=new Et,s=new Et,l=new Et,c=new Et;function u(i){var r,o;for(r=0,o=i.length-3;r<=o;r+=3){a.fromArray(i,r);// project the aabb onto the seperating axis
var s=l.x*Math.abs(a.x)+l.y*Math.abs(a.y)+l.z*Math.abs(a.z),c=e.dot(a),u=t.dot(a),h=n.dot(a);// project all 3 vertices of the triangle onto the seperating axis
// actual test, basically see if either of the most extreme of the triangle points intersects r
if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>s)// points of the projected triangle are outside the projected half-length of the aabb
// the axis is seperating and we can exit
return!1}return!0}return function(a){if(this.isEmpty())return!1;// compute box center and extents
this.getCenter(s),l.subVectors(this.max,s),// translate triangle to aabb origin
e.subVectors(a.a,s),t.subVectors(a.b,s),n.subVectors(a.c,s),// compute edge vectors for triangle
i.subVectors(t,e),r.subVectors(n,t),o.subVectors(e,n);// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb
// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation
// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)
var h=[0,-i.z,i.y,0,-r.z,r.y,0,-o.z,o.y,i.z,0,-i.x,r.z,0,-r.x,o.z,0,-o.x,-i.y,i.x,0,-r.y,r.x,0,-o.y,o.x,0];return!!u(h)&&(!!u(// test 3 face normals from the aabb
h=[1,0,0,0,1,0,0,0,1])&&(// finally testing the face normal of the triangle
// use already existing triangle edge vectors here
c.crossVectors(i,r),u(h=[c.x,c.y,c.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Et),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Et;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new Et;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new It),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.
this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new Et,new Et,new Et,new Et,new Et,new Et,new Et,new Et];return function(t){// transform of empty box is an empty box.
return this.isEmpty()?this:(// NOTE: I am using a binary pattern to specify all 2^3 combinations below
e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),// 000
e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),// 001
e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),// 010
e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),// 011
e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),// 100
e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),// 101
e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),// 110
e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),// 111
this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(It.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new Ot;return function(t,n){var i=this.center;void 0!==n?i.copy(n):e.setFromPoints(t).getCenter(i);for(var r=0,o=0,a=t.length;o<a;o++)r=Math.max(r,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Et),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Ot),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(Bt.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Et,t=new Et;return function(n,i,r){var o=e.subVectors(r,i).cross(t.subVectors(n,i)).normalize();// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?
return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){// Note: will lead to a divide by zero if the plane is invalid.
var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Et),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Et;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new Et);var i=t.delta(e),r=this.normal.dot(i);if(0===r)// line is coplanar, return origin
return 0===this.distanceToPoint(t.start)?n.copy(t.start):// Unsure if this is the correct method to handle this case.
void 0;var o=-(t.start.dot(this.normal)+this.constant)/r;return o<0||o>1?void 0:n.copy(i).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.
var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Et),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Et,t=new Tt;return function(n,i){var r=i||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),a=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(Dt.prototype,{set:function(e,t,n,i,r,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(a-i,u-s,f-h,y-m).normalize(),t[1].setComponents(a+i,u+s,f+h,y+m).normalize(),t[2].setComponents(a+r,u+l,f+d,y+g).normalize(),t[3].setComponents(a-r,u-l,f-d,y-g).normalize(),t[4].setComponents(a-o,u-c,f-p,y-v).normalize(),t[5].setComponents(a+o,u+c,f+p,y+v).normalize(),this},intersectsObject:function(){var e=new It;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new It;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:function(){var e=new Et,t=new Et;return function(n){for(var i=this.planes,r=0;r<6;r++){var o=i[r];e.x=o.normal.x>0?n.min.x:n.max.x,t.x=o.normal.x>0?n.max.x:n.min.x,e.y=o.normal.y>0?n.min.y:n.max.y,t.y=o.normal.y>0?n.max.y:n.min.y,e.z=o.normal.z>0?n.min.z:n.max.z,t.z=o.normal.z>0?n.max.z:n.min.z;var a=o.distanceToPoint(e),s=o.distanceToPoint(t);// if both outside plane, no intersection
if(a<0&&s<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var Ut={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\t\tscale *= float( gl_FrontFacing ) * 2.0 - 1.0;\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},Nt={merge:function(e){for(var t={},n=0;n<e.length;n++){var i=this.clone(e[n]);for(var r in i)t[r]=i[r]}return t},clone:function(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}},Ft={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function kt(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(kt.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,i){if(// h,s,l ranges are in 0.0 - 1.0
t=bt.euclideanModulo(t,1),n=bt.clamp(n,0,1),i=bt.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,o=2*i-r;this.r=e(o,r,t+1/3),this.g=e(o,r,t),this.b=e(o,r,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){// rgb / hsl
var i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))// rgb(255,0,0) rgba(255,0,0,0.5)
return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)
return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){// hsl(120,50%,50%) hsla(120,50%,50%,0.5)
var a=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(a,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){// hex color
var c,u=(c=n[1]).length;if(3===u)// #ff0
return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===u)// #ff0000
return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(c=Ft[e])?// red
this.setHex(c):// unknown color
console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){// h,s,l ranges are in 0.0 - 1.0
void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,i=this.r,r=this.g,o=this.b,a=Math.max(i,r,o),s=Math.min(i,r,o),l=(s+a)/2;if(s===a)t=0,n=0;else{var c=a-s;switch(n=l<=.5?c/(a+s):c/(2-a-s),a){case i:t=(r-o)/c+(r<o?6:0);break;case r:t=(o-i)/c+2;break;case o:t=(i-r)/c+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,n,i){return this.getHSL(e),e.h+=t,e.s+=n,e.l+=i,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});
/**
 * Uniforms library for shared webgl shaders
 */
var zt={common:{diffuse:{value:new kt(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Tt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new _t(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new kt(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src
rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new kt(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Tt}}},Ht={basic:{uniforms:Nt.merge([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.fog]),vertexShader:Ut.meshbasic_vert,fragmentShader:Ut.meshbasic_frag},lambert:{uniforms:Nt.merge([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.fog,zt.lights,{emissive:{value:new kt(0)}}]),vertexShader:Ut.meshlambert_vert,fragmentShader:Ut.meshlambert_frag},phong:{uniforms:Nt.merge([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.gradientmap,zt.fog,zt.lights,{emissive:{value:new kt(0)},specular:{value:new kt(1118481)},shininess:{value:30}}]),vertexShader:Ut.meshphong_vert,fragmentShader:Ut.meshphong_frag},standard:{uniforms:Nt.merge([zt.common,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.roughnessmap,zt.metalnessmap,zt.fog,zt.lights,{emissive:{value:new kt(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Ut.meshphysical_vert,fragmentShader:Ut.meshphysical_frag},points:{uniforms:Nt.merge([zt.points,zt.fog]),vertexShader:Ut.points_vert,fragmentShader:Ut.points_frag},dashed:{uniforms:Nt.merge([zt.common,zt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ut.linedashed_vert,fragmentShader:Ut.linedashed_frag},depth:{uniforms:Nt.merge([zt.common,zt.displacementmap]),vertexShader:Ut.depth_vert,fragmentShader:Ut.depth_frag},normal:{uniforms:Nt.merge([zt.common,zt.bumpmap,zt.normalmap,zt.displacementmap,{opacity:{value:1}}]),vertexShader:Ut.normal_vert,fragmentShader:Ut.normal_frag},
/* -------------------------------------------------------------------------
	//	Cube map shader
	 ------------------------------------------------------------------------- */
cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ut.cube_vert,fragmentShader:Ut.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ut.equirect_vert,fragmentShader:Ut.equirect_frag},distanceRGBA:{uniforms:Nt.merge([zt.common,zt.displacementmap,{referencePosition:{value:new Et},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ut.distanceRGBA_vert,fragmentShader:Ut.distanceRGBA_frag},shadow:{uniforms:Nt.merge([zt.lights,zt.fog,{color:{value:new kt(0)},opacity:{value:1}}]),vertexShader:Ut.shadow_vert,fragmentShader:Ut.shadow_frag}};
/**
 * @author alteredq / http://alteredqualia.com/
 * @author mrdoob / http://mrdoob.com/
 * @author mikael emtinger / http://gomo.se/
 */
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Vt(e){var t=new WeakMap;return{get://
function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);void 0===r?t.set(n,function(t,n){var i=t.array,r=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,i,r),t.onUploadCallback();var a=e.FLOAT;return i instanceof Float32Array?a=e.FLOAT:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?a=e.UNSIGNED_SHORT:i instanceof Int16Array?a=e.SHORT:i instanceof Uint32Array?a=e.UNSIGNED_INT:i instanceof Int32Array?a=e.INT:i instanceof Int8Array?a=e.BYTE:i instanceof Uint8Array&&(a=e.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(n,i)):r.version<n.version&&(function(t,n,i){var r=n.array,o=n.updateRange;e.bindBuffer(i,t),!1===n.dynamic?e.bufferData(i,r,e.STATIC_DRAW):-1===o.count?// Not using update ranges
e.bufferSubData(i,0,r):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=-1)}(r.buffer,n,i),r.version=n.version)}}}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author WestLangley / http://github.com/WestLangley
 * @author bhouston / http://clara.io
 */function Gt(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||Gt.DefaultOrder}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function jt(){this.mask=1}Ht.physical={uniforms:Nt.merge([Ht.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Ut.meshphysical_vert,fragmentShader:Ut.meshphysical_frag},Gt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Gt.DefaultOrder="XYZ",Object.defineProperties(Gt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(Gt.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=bt.clamp,r=e.elements,o=r[0],a=r[4],s=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],p=r[10];// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)
return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===t?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===t?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===t?(this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new wt;return function(t,n,i){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){// WARNING: this discards revolution information -bhouston
var e=new Mt;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Et(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(jt.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});
/**
 * @author mrdoob / http://mrdoob.com/
 * @author mikael emtinger / http://gomo.se/
 * @author alteredq / http://alteredqualia.com/
 * @author WestLangley / http://github.com/WestLangley
 * @author elephantatwork / www.elephantatwork.ch
 */
var Wt=0;function Xt(){Object.defineProperty(this,"id",{value:Wt++}),this.uuid=bt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Xt.DefaultUp.clone();var e=new Et,t=new Gt,n=new Mt,i=new Et(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new wt},normalMatrix:{value:new Tt}}),this.matrix=new wt,this.matrixWorld=new wt,this.matrixAutoUpdate=Xt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new jt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author mikael emtinger / http://gomo.se/
 * @author WestLangley / http://github.com/WestLangley
*/
function qt(){Xt.call(this),this.type="Camera",this.matrixWorldInverse=new wt,this.projectionMatrix=new wt}
/**
 * @author alteredq / http://alteredqualia.com/
 * @author arose / http://github.com/arose
 */
function Yt(e,t,n,i,r,o){qt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 */
function Qt(e,t,n,i,r,o){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new Et,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new kt,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}Xt.DefaultUp=new Et(0,1,0),Xt.DefaultMatrixAutoUpdate=!0,Xt.prototype=Object.assign(Object.create(r.prototype),{constructor:Xt,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){// assumes axis is normalized
this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)
this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){// assumes q is normalized
this.quaternion.copy(e)},rotateOnAxis:function(){// rotate object on axis in object space
// axis is assumed to be normalized
var e=new Mt;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){// rotate object on axis in world space
// axis is assumed to be normalized
// method assumes no rotated parent
var e=new Mt;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new Et(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Et(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Et(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){// translate object by distance along axis in object space
// axis is assumed to be normalized
var e=new Et;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new Et(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Et(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Et(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new wt;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){// This method does not support objects with rotated and/or translated parent(s)
var e=new wt,t=new Et;return function(n,i,r){n.isVector3?t.copy(n):t.set(n,i,r),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Et),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new Et,t=new Et;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new Mt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldScale:function(){var e=new Et,t=new Mt;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new Et),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new Mt;return function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Et),this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(// update children
var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){// meta is a string when called from JSON.stringify
var t=void 0===e||"string"==typeof e,n={};// meta is a hash used to collect geometries, materials.
// not providing it implies that this is the root object
// being serialized.
t&&(// initialize meta obj
e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});// standard Object3D serialization
var i={};//
function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),void 0!==this.geometry){i.geometry=r(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,l=a.length;s<l;s++){var c=a[s];r(e.shapes,c)}else r(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var u=[];for(s=0,l=this.material.length;s<l;s++)u.push(r(e.materials,this.material[s]));i.material=u}else i.material=r(e.materials,this.material);//
if(this.children.length>0){i.children=[];for(s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(t){var h=m(e.geometries),d=m(e.materials),p=m(e.textures),f=m(e.images);a=m(e.shapes);h.length>0&&(n.geometries=h),d.length>0&&(n.materials=d),p.length>0&&(n.textures=p),f.length>0&&(n.images=f),a.length>0&&(n.shapes=a)}return n.object=i,n;// extract data from the cache hash
// remove metadata on each item
// and return as array
function m(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}),qt.prototype=Object.assign(Object.create(Xt.prototype),{constructor:qt,isCamera:!0,copy:function(e,t){return Xt.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new Mt;return function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Et),this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){Xt.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Yt.prototype=Object.assign(Object.create(qt.prototype),{constructor:Yt,isOrthographicCamera:!0,copy:function(e,t){return qt.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,o=n+e,a=i+t,s=i-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(r+=u*(this.view.offsetX/l))+u*(this.view.width/l),s=(a-=h*(this.view.offsetY/c))-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far)},toJSON:function(e){var t=Xt.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(Qt.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});
/**
 * @author mrdoob / http://mrdoob.com/
 * @author kile / http://kile.stravaganza.org/
 * @author alteredq / http://alteredqualia.com/
 * @author mikael emtinger / http://gomo.se/
 * @author zz85 / http://www.lab4games.net/zz85/blog
 * @author bhouston / http://clara.io
 */
var Zt=0;// Geometry uses even numbers as Id
function Jt(){Object.defineProperty(this,"id",{value:Zt+=2}),this.uuid=bt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,// update flags
this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Kt(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}//
function $t(e,t,n){Kt.call(this,new Int8Array(e),t,n)}function en(e,t,n){Kt.call(this,new Uint8Array(e),t,n)}function tn(e,t,n){Kt.call(this,new Uint8ClampedArray(e),t,n)}function nn(e,t,n){Kt.call(this,new Int16Array(e),t,n)}function rn(e,t,n){Kt.call(this,new Uint16Array(e),t,n)}function on(e,t,n){Kt.call(this,new Int32Array(e),t,n)}function an(e,t,n){Kt.call(this,new Uint32Array(e),t,n)}function sn(e,t,n){Kt.call(this,new Float32Array(e),t,n)}function ln(e,t,n){Kt.call(this,new Float64Array(e),t,n)}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function cn(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],// this.lineDistances = [];
this.boundingBox=null,this.boundingSphere=null,// update flags
this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function un(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}
/**
 * @author alteredq / http://alteredqualia.com/
 * @author mrdoob / http://mrdoob.com/
 */Jt.prototype=Object.assign(Object.create(r.prototype),{constructor:Jt,isGeometry:!0,applyMatrix:function(e){for(var t=(new Tt).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(e)}for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(var o=0,a=r.vertexNormals.length;o<a;o++)r.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){// rotate geometry around world x-axis
var e=new wt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){// rotate geometry around world y-axis
var e=new wt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){// rotate geometry around world z-axis
var e=new wt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){// translate geometry
var e=new wt;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){// scale geometry
var e=new wt;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Xt;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,i=e.attributes,r=i.position.array,o=void 0!==i.normal?i.normal.array:void 0,a=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var c=[],u=[],h=[],d=0,p=0;d<r.length;d+=3,p+=2)t.vertices.push(new Et(r[d],r[d+1],r[d+2])),void 0!==o&&c.push(new Et(o[d],o[d+1],o[d+2])),void 0!==a&&t.colors.push(new kt(a[d],a[d+1],a[d+2])),void 0!==s&&u.push(new _t(s[p],s[p+1])),void 0!==l&&h.push(new _t(l[p],l[p+1]));function f(e,n,i,r){var d=new Qt(e,n,i,void 0!==o?[c[e].clone(),c[n].clone(),c[i].clone()]:[],void 0!==a?[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()]:[],r);t.faces.push(d),void 0!==s&&t.faceVertexUvs[0].push([u[e].clone(),u[n].clone(),u[i].clone()]),void 0!==l&&t.faceVertexUvs[1].push([h[e].clone(),h[n].clone(),h[i].clone()])}var m=e.groups;if(m.length>0)for(d=0;d<m.length;d++)for(var g=m[d],v=g.start,y=(p=v,v+g.count);p<y;p+=3)void 0!==n?f(n[p],n[p+1],n[p+2],g.materialIndex):f(p,p+1,p+2,g.materialIndex);else if(void 0!==n)for(d=0;d<n.length;d+=3)f(n[d],n[d+1],n[d+2]);else for(d=0;d<r.length/3;d+=3)f(d,d+1,d+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new Et;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new wt;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new Et,t=new Et,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],o=this.vertices[r.a],a=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,n,i,r,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new Et;if(e){// vertex normals weighted by triangle areas
// http://www.iquilezles.org/www/articles/normals/normals.htm
var s,l,c,u=new Et,h=new Et;for(i=0,r=this.faces.length;i<r;i++)o=this.faces[i],s=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c],u.subVectors(c,l),h.subVectors(s,l),u.cross(h),a[o.a].add(u),a[o.b].add(u),a[o.c].add(u)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)a[(o=this.faces[i]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(i=0,r=this.faces.length;i<r;i++){var d=(o=this.faces[i]).vertexNormals;3===d.length?(d[0].copy(a[o.a]),d[1].copy(a[o.b]),d[2].copy(a[o.c])):(d[0]=a[o.a].clone(),d[1]=a[o.b].clone(),d[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var i=(n=this.faces[e]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,i,r;// save original normals
// - create temp variables on first access
//   otherwise just copy (for faster repeated calls)
for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();// use temp geometry to compute face and vertex normals for each morph
var o=new Jt;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){// create on first access
if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)l=new Et,c={a:new Et,b:new Et,c:new Et},a.push(l),s.push(c)}var l,c,u=this.morphNormals[e];// set vertices to morph target
for(o.vertices=this.morphTargets[e].vertices,// compute morph normals
o.computeFaceNormals(),o.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],l=u.faceNormals[n],c=u.vertexNormals[n],l.copy(r.normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}// restore original normals
for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ot),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new It),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var i,r=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,c=this.faceVertexUvs[0],u=e.faceVertexUvs[0],h=this.colors,d=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new Tt).getNormalMatrix(t));// vertices
for(var p=0,f=a.length;p<f;p++){var m=a[p].clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}// colors
for(p=0,f=d.length;p<f;p++)h.push(d[p].clone());// faces
for(p=0,f=l.length;p<f;p++){var g,v,y,x=l[p],b=x.vertexNormals,_=x.vertexColors;(g=new Qt(x.a+r,x.b+r,x.c+r)).normal.copy(x.normal),void 0!==i&&g.normal.applyMatrix3(i).normalize();for(var w=0,M=b.length;w<M;w++)v=b[w].clone(),void 0!==i&&v.applyMatrix3(i).normalize(),g.vertexNormals.push(v);g.color.copy(x.color);for(w=0,M=_.length;w<M;w++)y=_[w],g.vertexColors.push(y.clone());g.materialIndex=x.materialIndex+n,s.push(g)}// uvs
for(p=0,f=u.length;p<f;p++){var E=u[p],T=[];if(void 0!==E){for(w=0,M=E.length;w<M;w++)T.push(E[w].clone());c.push(T)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},
/*
	 * Checks for duplicate vertices with hashmap.
	 * Duplicated vertices are removed
	 * and faces' vertices are updated.
	 */
mergeVertices:function(){var e,t,n,i,r,o,a,s,l={},c=[],u=[],h=Math.pow(10,4);// Hashmap for looking up vertices by position coordinates (and making sure they are unique)
for(n=0,i=this.vertices.length;n<i;n++)e=this.vertices[n],void 0===l[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(l[t]=n,c.push(this.vertices[n]),u[n]=c.length-1)://console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);
u[n]=u[l[t]];// if faces are completely degenerate after merging vertices, we
// have to remove them from the geometry.
var d=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=u[r.a],r.b=u[r.b],r.c=u[r.c],o=[r.a,r.b,r.c];// if any duplicate vertices are found in a Face3
// we have to remove the face as nothing can be saved
for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var f=d[n];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}// Use unique set of vertices
var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new Et(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){// tag faces
for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;// sort faces
e.sort(function(e,t){return e.materialIndex-t.materialIndex});// sort uvs
var i,r,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(i=[]),a&&a.length===t&&(r=[]);for(n=0;n<t;n++){var s=e[n]._id;i&&i.push(o[s]),r&&r.push(a[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};// standard Geometry serialization
if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var i=[],r=0;r<this.vertices.length;r++){var o=this.vertices[r];i.push(o.x,o.y,o.z)}var a=[],s=[],l={},c=[],u={},h=[],d={};for(r=0;r<this.faces.length;r++){var p=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=p.normal.length()>0,g=p.vertexNormals.length>0,v=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,x=0;if(x=M(x=M(x=M(x=M(x=M(x=M(// isQuad
x=M(x=M(x,0,0),1,!0),2,!1),3,f),4,m),5,g),6,v),7,y),a.push(x),a.push(p.a,p.b,p.c),a.push(p.materialIndex),f){var b=this.faceVertexUvs[0][r];a.push(A(b[0]),A(b[1]),A(b[2]))}if(m&&a.push(E(p.normal)),g){var _=p.vertexNormals;a.push(E(_[0]),E(_[1]),E(_[2]))}if(v&&a.push(T(p.color)),y){var w=p.vertexColors;a.push(T(w[0]),T(w[1]),T(w[2]))}}function M(e,t,n){return n?e|1<<t:e&~(1<<t)}function E(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]?l[t]:(l[t]=s.length/3,s.push(e.x,e.y,e.z),l[t])}function T(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]?u[t]:(u[t]=c.length,c.push(e.getHex()),u[t])}function A(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]?d[t]:(d[t]=h.length/2,h.push(e.x,e.y),d[t])}return e.data={},e.data.vertices=i,e.data.normals=s,c.length>0&&(e.data.colors=c),h.length>0&&(e.data.uvs=[h]),// temporal backward compatibility
e.data.faces=a,e},clone:function(){
/*
		 // Handle primitives

		 var parameters = this.parameters;

		 if ( parameters !== undefined ) {

		 var values = [];

		 for ( var key in parameters ) {

		 values.push( parameters[ key ] );

		 }

		 var geometry = Object.create( this.constructor.prototype );
		 this.constructor.apply( geometry, values );
		 return geometry;

		 }

		 return new this.constructor().copy( this );
		 */
return(new Jt).copy(this)},copy:function(e){var t,n,i,r,o,a;// reset
this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,// name
this.name=e.name;// vertices
var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());// colors
var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());// faces
var c=e.faces;for(t=0,n=c.length;t<n;t++)this.faces.push(c[t].clone());// face vertex uvs
for(t=0,n=e.faceVertexUvs.length;t<n;t++){var u=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=u.length;i<r;i++){var h=u[i],d=[];for(o=0,a=h.length;o<a;o++){var p=h[o];d.push(p.clone())}this.faceVertexUvs[t].push(d)}}// morph targets
var f=e.morphTargets;for(t=0,n=f.length;t<n;t++){var m={};// vertices
if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],i=0,r=f[t].vertices.length;i<r;i++)m.vertices.push(f[t].vertices[i].clone());// normals
if(void 0!==f[t].normals)for(m.normals=[],i=0,r=f[t].normals.length;i<r;i++)m.normals.push(f[t].normals[i].clone());this.morphTargets.push(m)}// morph normals
var g=e.morphNormals;for(t=0,n=g.length;t<n;t++){var v={};// vertex normals
if(void 0!==g[t].vertexNormals)for(v.vertexNormals=[],i=0,r=g[t].vertexNormals.length;i<r;i++){var y=g[t].vertexNormals[i],x={};x.a=y.a.clone(),x.b=y.b.clone(),x.c=y.c.clone(),v.vertexNormals.push(x)}// face normals
if(void 0!==g[t].faceNormals)for(v.faceNormals=[],i=0,r=g[t].faceNormals.length;i<r;i++)v.faceNormals.push(g[t].faceNormals[i].clone());this.morphNormals.push(v)}// skin weights
var b=e.skinWeights;for(t=0,n=b.length;t<n;t++)this.skinWeights.push(b[t].clone());// skin indices
var _=e.skinIndices;for(t=0,n=_.length;t<n;t++)this.skinIndices.push(_[t].clone());// line distances
var w=e.lineDistances;for(t=0,n=w.length;t<n;t++)this.lineDistances.push(w[t]);// bounding box
var M=e.boundingBox;null!==M&&(this.boundingBox=M.clone());// bounding sphere
var E=e.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),// update flags
this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Kt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Kt.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new kt),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new _t),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new Et),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new Ct),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),$t.prototype=Object.create(Kt.prototype),$t.prototype.constructor=$t,en.prototype=Object.create(Kt.prototype),en.prototype.constructor=en,tn.prototype=Object.create(Kt.prototype),tn.prototype.constructor=tn,nn.prototype=Object.create(Kt.prototype),nn.prototype.constructor=nn,rn.prototype=Object.create(Kt.prototype),rn.prototype.constructor=rn,on.prototype=Object.create(Kt.prototype),on.prototype.constructor=on,an.prototype=Object.create(Kt.prototype),an.prototype.constructor=an,sn.prototype=Object.create(Kt.prototype),sn.prototype.constructor=sn,ln.prototype=Object.create(Kt.prototype),ln.prototype.constructor=ln,Object.assign(cn.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,o=0;o<r.length;o++){var a=r[o];// materials
a.materialIndex!==i&&(i=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:i})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,r=e.faceVertexUvs,o=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(var c=0;c<l;c++)t[c]=[];this.morphTargets.position=t}var u,h=e.morphNormals,d=h.length;if(d>0){u=[];for(c=0;c<d;c++)u[c]=[];this.morphTargets.normal=u}// skins
var p=e.skinIndices,f=e.skinWeights,m=p.length===i.length,g=f.length===i.length;//
for(c=0;c<n.length;c++){var v=n[c];this.vertices.push(i[v.a],i[v.b],i[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var x=v.normal;this.normals.push(x,x,x)}var b,_=v.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var w=v.color;this.colors.push(w,w,w)}if(!0===o)void 0!==(b=r[0][c])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new _t,new _t,new _t));if(!0===a)void 0!==(b=r[1][c])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new _t,new _t,new _t));// morphs
for(var M=0;M<l;M++){var E=s[M].vertices;t[M].push(E[v.a],E[v.b],E[v.c])}for(M=0;M<d;M++){var T=h[M].vertexNormals[c];u[M].push(T.a,T.b,T.c)}// skins
m&&this.skinIndices.push(p[v.a],p[v.b],p[v.c]),g&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var hn=1;// BufferGeometry uses odd numbers as Id
function dn(){Object.defineProperty(this,"id",{value:hn+=2}),this.uuid=bt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author Mugen87 / https://github.com/Mugen87
 */
// BoxGeometry
function pn(e,t,n,i,r,o){Jt.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new fn(e,t,n,i,r,o)),this.mergeVertices()}// BoxBufferGeometry
function fn(e,t,n,i,r,o){dn.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};var a=this;e=e||1,t=t||1,n=n||1,// segments
i=Math.floor(i)||1,r=Math.floor(r)||1;// buffers
var s=[],l=[],c=[],u=[],h=0,d=0;function p(e,t,n,i,r,o,p,f,m,g,v){var y,x,b=o/m,_=p/g,w=o/2,M=p/2,E=f/2,T=m+1,A=g+1,S=0,C=0,R=new Et;// generate vertices, normals and uvs
for(x=0;x<A;x++){var L=x*_-M;for(y=0;y<T;y++){var P=y*b-w;// set values to correct vector component
R[e]=P*i,R[t]=L*r,R[n]=E,// now apply vector to vertex buffer
l.push(R.x,R.y,R.z),// set values to correct vector component
R[e]=0,R[t]=0,R[n]=f>0?1:-1,// now apply vector to normal buffer
c.push(R.x,R.y,R.z),// uvs
u.push(y/m),u.push(1-x/g),// counters
S+=1}}// indices
// 1. you need three indices to draw a single face
// 2. a single segment consists of two faces
// 3. so we need to generate six (2*3) indices per segment
for(x=0;x<g;x++)for(y=0;y<m;y++){var O=h+y+T*x,I=h+y+T*(x+1),B=h+(y+1)+T*(x+1),D=h+(y+1)+T*x;// faces
s.push(O,I,D),s.push(I,B,D),// increase counter
C+=6}// add a group to the geometry. this will ensure multi material support
a.addGroup(d,C,v),// calculate new start value for groups
d+=C,// update total number of vertices
h+=S}// build each side of the box geometry
p("z","y","x",-1,-1,n,t,e,o=Math.floor(o)||1,r,0),// px
p("z","y","x",1,-1,n,t,-e,o,r,1),// nx
p("x","z","y",1,1,e,n,t,i,o,2),// py
p("x","z","y",1,-1,e,n,-t,i,o,3),// ny
p("x","y","z",1,-1,e,t,n,i,r,4),// pz
p("x","y","z",-1,-1,e,t,-n,i,r,5),// nz
// build geometry
this.setIndex(s),this.addAttribute("position",new sn(l,3)),this.addAttribute("normal",new sn(c,3)),this.addAttribute("uv",new sn(u,2))}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author Mugen87 / https://github.com/Mugen87
 */
// PlaneGeometry
function mn(e,t,n,i){Jt.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new gn(e,t,n,i)),this.mergeVertices()}// PlaneBufferGeometry
function gn(e,t,n,i){dn.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};var r,o,a=(e=e||1)/2,s=(t=t||1)/2,l=Math.floor(n)||1,c=Math.floor(i)||1,u=l+1,h=c+1,d=e/l,p=t/c,f=[],m=[],g=[],v=[];// generate vertices, normals and uvs
for(o=0;o<h;o++){var y=o*p-s;for(r=0;r<u;r++){var x=r*d-a;m.push(x,-y,0),g.push(0,0,1),v.push(r/l),v.push(1-o/c)}}// indices
for(o=0;o<c;o++)for(r=0;r<l;r++){var b=r+u*o,_=r+u*(o+1),w=r+1+u*(o+1),M=r+1+u*o;// faces
f.push(b,_,M),f.push(_,w,M)}// build geometry
this.setIndex(f),this.addAttribute("position",new sn(m,3)),this.addAttribute("normal",new sn(g,3)),this.addAttribute("uv",new sn(v,2))}dn.prototype=Object.assign(Object.create(r.prototype),{constructor:dn,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(un(e)>65535?an:rn)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new Kt(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new Tt).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){// rotate geometry around world x-axis
var e=new wt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){// rotate geometry around world y-axis
var e=new wt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){// rotate geometry around world z-axis
var e=new wt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){// translate geometry
var e=new wt;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){// scale geometry
var e=new wt;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Xt;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new Et;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );
var t=e.geometry;if(e.isPoints||e.isLine){var n=new sn(3*t.vertices.length,3),i=new sn(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new sn(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new sn(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new cn).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new Kt(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new Kt(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new Kt(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new Kt(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new Kt(o,2).copyVector2sArray(e.uvs2))}// groups
// morphs
for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],l=e.morphTargets[a],c=0,u=l.length;c<u;c++){var h=l[c],d=new sn(3*h.length,3);s.push(d.copyVector3sArray(h))}this.morphAttributes[a]=s}// skinning
if(e.skinIndices.length>0){var p=new sn(4*e.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new sn(4*e.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}//
return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ot);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Ot,t=new Et;return function(){null===this.boundingSphere&&(this.boundingSphere=new It);var n=this.attributes.position;if(n){var i=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(i);for(// hoping to find a boundingSphere with a radius smaller than the
// boundingSphere of the boundingBox: sqrt(3) smaller in the best case
var r=0,o=0,a=n.count;o<a;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),r=Math.max(r,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){// backwards compatibility
},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new Kt(new Float32Array(i.length),3));else for(// reset existing normals to zero
var r=t.normal.array,o=0,a=r.length;o<a;o++)r[o]=0;var s,l,c,u=t.normal.array,h=new Et,d=new Et,p=new Et,f=new Et,m=new Et;// indexed elements
if(e){var g=e.array;0===n.length&&this.addGroup(0,g.length);for(var v=0,y=n.length;v<y;++v){var x=n[v],b=x.start;for(o=b,a=b+x.count;o<a;o+=3)s=3*g[o+0],l=3*g[o+1],c=3*g[o+2],h.fromArray(i,s),d.fromArray(i,l),p.fromArray(i,c),f.subVectors(p,d),m.subVectors(h,d),f.cross(m),u[s]+=f.x,u[s+1]+=f.y,u[s+2]+=f.z,u[l]+=f.x,u[l+1]+=f.y,u[l+2]+=f.z,u[c]+=f.x,u[c+1]+=f.y,u[c+2]+=f.z}}else// non-indexed elements (unconnected triangle soup)
for(o=0,a=i.length;o<a;o+=9)h.fromArray(i,o),d.fromArray(i,o+3),p.fromArray(i,o+6),f.subVectors(p,d),m.subVectors(h,d),f.cross(m),u[o]=f.x,u[o+1]=f.y,u[o+2]=f.z,u[o+3]=f.x,u[o+4]=f.y,u[o+5]=f.z,u[o+6]=f.x,u[o+7]=f.y,u[o+8]=f.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i].array,o=e.attributes[i],a=o.array,s=0,l=o.itemSize*t;s<a.length;s++,l++)r[l]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new Et;return function(){for(var t=this.attributes.normal,n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new dn,t=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],o=r.array,a=r.itemSize,s=new o.constructor(t.length*a),l=0,c=0,u=0,h=t.length;u<h;u++){l=t[u]*a;for(var d=0;d<a;d++)s[c++]=o[l++]}e.addAttribute(i,new Kt(s,a))}var p=this.groups;for(u=0,h=p.length;u<h;u++){var f=p[u];e.addGroup(f.start,f.count,f.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};// standard BufferGeometry serialization
if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);e.data.index={type:i.array.constructor.name,array:r}}var o=this.attributes;for(var n in o){var a=o[n];r=Array.prototype.slice.call(a.array);e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:r,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){
/*
		 // Handle primitives

		 var parameters = this.parameters;

		 if ( parameters !== undefined ) {

		 var values = [];

		 for ( var key in parameters ) {

		 values.push( parameters[ key ] );

		 }

		 var geometry = Object.create( this.constructor.prototype );
		 this.constructor.apply( geometry, values );
		 return geometry;

		 }

		 return new this.constructor().copy( this );
		 */
return(new dn).copy(this)},copy:function(e){var t,n,i;// reset
this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,// name
this.name=e.name;// index
var r=e.index;null!==r&&this.setIndex(r.clone());// attributes
var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}// morph attributes
var s=e.morphAttributes;for(t in s){var l=[],c=s[t];// morphAttribute: array of Float32BufferAttributes
for(n=0,i=c.length;n<i;n++)l.push(c[n].clone());this.morphAttributes[t]=l}// groups
var u=e.groups;for(n=0,i=u.length;n<i;n++){var h=u[n];this.addGroup(h.start,h.count,h.materialIndex)}// bounding box
var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());// bounding sphere
var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),// draw range
this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),pn.prototype=Object.create(Jt.prototype),pn.prototype.constructor=pn,fn.prototype=Object.create(dn.prototype),fn.prototype.constructor=fn,mn.prototype=Object.create(Jt.prototype),mn.prototype.constructor=mn,gn.prototype=Object.create(dn.prototype),gn.prototype.constructor=gn;
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 */
var vn=0;function yn(){Object.defineProperty(this,"id",{value:vn++}),this.uuid=bt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=y,this.side=h,this.flatShading=!1,this.vertexColors=f,// THREE.NoColors, THREE.VertexColors, THREE.FaceColors
this.opacity=1,this.transparent=!1,this.blendSrc=O,this.blendDst=I,this.blendEquation=M,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=V,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,// override the renderer's default precision for this material
this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,// Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer
this.visible=!0,this.userData={},this.needsUpdate=!0}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 *
 * parameters = {
 *  color: <hex>,
 *  opacity: <float>,
 *  map: new THREE.Texture( <Image> ),
 *
 *  lightMap: new THREE.Texture( <Image> ),
 *  lightMapIntensity: <float>
 *
 *  aoMap: new THREE.Texture( <Image> ),
 *  aoMapIntensity: <float>
 *
 *  specularMap: new THREE.Texture( <Image> ),
 *
 *  alphaMap: new THREE.Texture( <Image> ),
 *
 *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),
 *  combine: THREE.Multiply,
 *  reflectivity: <float>,
 *  refractionRatio: <float>,
 *
 *  depthTest: <bool>,
 *  depthWrite: <bool>,
 *
 *  wireframe: <boolean>,
 *  wireframeLinewidth: <float>,
 *
 *  skinning: <bool>,
 *  morphTargets: <bool>
 * }
 */
function xn(e){yn.call(this),this.type="MeshBasicMaterial",this.color=new kt(16777215),// emissive
this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}
/**
 * @author alteredq / http://alteredqualia.com/
 *
 * parameters = {
 *  defines: { "label" : "value" },
 *  uniforms: { "parameter1": { value: 1.0 }, "parameter2": { value2: 2 } },
 *
 *  fragmentShader: <string>,
 *  vertexShader: <string>,
 *
 *  wireframe: <boolean>,
 *  wireframeLinewidth: <float>,
 *
 *  lights: <bool>,
 *
 *  skinning: <bool>,
 *  morphTargets: <bool>,
 *  morphNormals: <bool>
 * }
 */
function bn(e){yn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,// set to use scene fog
this.lights=!1,// set to use scene lights
this.clipping=!1,// set to use user-defined clipping planes
this.skinning=!1,// set to use skinning attribute streams
this.morphTargets=!1,// set to use morph targets
this.morphNormals=!1,// set to use morph normals
this.extensions={derivatives:!1,// set to use derivatives
fragDepth:!1,// set to use fragment depth values
drawBuffers:!1,// set to use draw buffers
shaderTextureLOD:!1},// When rendered geometry doesn't include these attributes but the material does,
// use these default values in WebGL. This avoids errors when buffer data is missing.
this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}
/**
 * @author bhouston / http://clara.io
 */
function _n(e,t){this.origin=void 0!==e?e:new Et,this.direction=void 0!==t?t:new Et}
/**
 * @author bhouston / http://clara.io
 */
function wn(e,t){this.start=void 0!==e?e:new Et,this.end=void 0!==t?t:new Et}
/**
 * @author bhouston / http://clara.io
 * @author mrdoob / http://mrdoob.com/
 */
function Mn(e,t,n){this.a=void 0!==e?e:new Et,this.b=void 0!==t?t:new Et,this.c=void 0!==n?n:new Et}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 * @author mikael emtinger / http://gomo.se/
 * @author jonobr1 / http://jonobr1.com/
 */
function En(e,t){Xt.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new dn,this.material=void 0!==t?t:new xn({color:16777215*Math.random()}),this.drawMode=lt,this.updateMorphTargets()}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Tn(e,t){return Math.abs(t[1])-Math.abs(e[1])}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function An(e,t,n,i,r,o,a,s,l,c){e=void 0!==e?e:[],t=void 0!==t?t:te,St.call(this,e,t,n,i,r,o,a,s,l,c),this.flipY=!1}yn.prototype=Object.assign(Object.create(r.prototype),{constructor:yn,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)// for backward compatability if shading is set in the constructor
if("shading"!==t){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):// ensure overdraw is backwards-compatible with legacy boolean type
this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};// standard Material serialization
// TODO: Copied from Object3D.toJSON
function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==y&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==h&&(n.side=this.side),this.vertexColors!==f&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,// rotation (SpriteMaterial)
0!==this.rotation&&(n.rotation=this.rotation),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var r=i(e.textures),o=i(e.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),xn.prototype=Object.create(yn.prototype),xn.prototype.constructor=xn,xn.prototype.isMeshBasicMaterial=!0,xn.prototype.copy=function(e){return yn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},bn.prototype=Object.create(yn.prototype),bn.prototype.constructor=bn,bn.prototype.isShaderMaterial=!0,bn.prototype.copy=function(e){return yn.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Nt.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},bn.prototype.toJSON=function(e){var t=yn.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(_n.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Et),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Et;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Et),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Et;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);// point behind the ray
return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new Et,t=new Et,n=new Et;return function(i,r,o,a){// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h
// It returns the min distance between the ray and the segment
// defined by v0 and v1
// It can also set two optional targets :
// - The closest point on the ray
// - The closest point on the segment
e.copy(i).add(r).multiplyScalar(.5),t.copy(r).sub(i).normalize(),n.copy(this.origin).sub(e);var s,l,c,u,h=.5*i.distanceTo(r),d=-this.direction.dot(t),p=n.dot(this.direction),f=-n.dot(t),m=n.lengthSq(),g=Math.abs(1-d*d);if(g>0)if(// The ray and segment are not parallel.
l=d*p-f,u=h*g,(s=d*f-p)>=0)if(l>=-u)if(l<=u){// region 0
// Minimum at interior points of ray and segment.
var v=1/g;c=(s*=v)*(s+d*(l*=v)+2*p)+l*(d*s+l+2*f)+m}else// region 1
l=h,c=-(s=Math.max(0,-(d*l+p)))*s+l*(l+2*f)+m;else// region 5
l=-h,c=-(s=Math.max(0,-(d*l+p)))*s+l*(l+2*f)+m;else l<=-u?c=-(// region 4
s=Math.max(0,-(-d*h+p)))*s+(l=s>0?-h:Math.min(Math.max(-h,-f),h))*(l+2*f)+m:l<=u?(// region 3
s=0,c=(l=Math.min(Math.max(-h,-f),h))*(l+2*f)+m):c=-(// region 2
s=Math.max(0,-(d*h+p)))*s+(l=s>0?h:Math.min(Math.max(-h,-f),h))*(l+2*f)+m;else// Ray and segment are parallel.
l=d>0?-h:h,c=-(s=Math.max(0,-(d*l+p)))*s+l*(l+2*f)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(l).add(e),c}}(),intersectSphere:function(){var e=new Et;return function(t,n){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),r=e.dot(e)-i*i,o=t.radius*t.radius;if(r>o)return null;var a=Math.sqrt(o-r),s=i-a,l=i+a;// t0 = first intersect point - entrance on front of sphere
// test to see if both t0 and t1 are behind the ray - if so, return null
return s<0&&l<0?null:// test to see if t0 is behind the ray:
// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,
// in order to always return an intersect point that is in front of the ray.
s<0?this.at(l,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)// line is coplanar, return origin
return 0===e.distanceToPoint(this.origin)?0:null;// Null is preferable to undefined since undefined means.... it is undefined
var n=-(this.origin.dot(e.normal)+e.constant)/t;// Return if the ray never intersects the plane
return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){// check if the ray lies on the plane first
var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,o,a,s,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||r>i?null:(// These lines also handle the case where tmin or tmax is NaN
// (result of 0 * Infinity). x !== x returns true if x is NaN
(r>n||n!=n)&&(n=r),(o<i||i!=i)&&(i=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||a>i?null:((a>n||n!=n)&&(n=a),(s<i||i!=i)&&(i=s),//return point closest to the ray (positive side)
i<0?null:this.at(n>=0?n:i,t)))},intersectsBox:function(){var e=new Et;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){// Compute the offset origin, edges, and normal.
var e=new Et,t=new Et,n=new Et,i=new Et;return function(r,o,a,s,l){// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h
t.subVectors(o,r),n.subVectors(a,r),i.crossVectors(t,n);// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,
// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by
//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))
//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))
//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)
var c,u=this.direction.dot(i);if(u>0){if(s)return null;c=1}else{if(!(u<0))return null;c=-1,u=-u}e.subVectors(this.origin,r);var h=c*this.direction.dot(n.crossVectors(e,n));// b1 < 0, no intersection
if(h<0)return null;var d=c*this.direction.dot(t.cross(e));// b2 < 0, no intersection
if(d<0)return null;// b1+b2 > 1, no intersection
if(h+d>u)return null;// Line intersects triangle, check if ray does.
var p=-c*e.dot(i);// t < 0, no intersection
return p<0?null:this.at(p/u,l);// Ray intersects triangle.
}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(wn.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Et),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Et),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Et),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new Et,t=new Et;return function(n,i){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var r=t.dot(t),o=t.dot(e)/r;return i&&(o=bt.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Et),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(Mn,{getNormal:function(){var e=new Et;return function(t,n,i,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Et),r.subVectors(i,n),e.subVectors(t,n),r.cross(e);var o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}}(),// static/instance method to calculate barycentric coordinates
// based on: http://www.blackpawn.com/texts/pointinpoly/default.html
getBarycoord:function(){var e=new Et,t=new Et,n=new Et;return function(i,r,o,a,s){e.subVectors(a,r),t.subVectors(o,r),n.subVectors(i,r);var l=e.dot(e),c=e.dot(t),u=e.dot(n),h=t.dot(t),d=t.dot(n),p=l*h-c*c;// collinear or singular triangle
if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new Et),0===p)// arbitrary location outside of triangle?
// not sure if this is the best idea, maybe should be returning undefined
return s.set(-2,-1,-1);var f=1/p,m=(h*u-c*d)*f,g=(l*d-c*u)*f;// barycentric coordinates must always sum to 1
return s.set(1-m-g,g,m)}}(),containsPoint:function(){var e=new Et;return function(t,n,i,r){return Mn.getBarycoord(t,n,i,r,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}()}),Object.assign(Mn.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new Et,t=new Et;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Et),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Mn.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Et),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Mn.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Mn.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new Bt,t=[new wn,new wn,new wn],n=new Et,i=new Et;return function(r,o){void 0===o&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),o=new Et);var a=1/0;// project the point onto the plane of the triangle
// check if the projection lies within the triangle
if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(r,n),!0===this.containsPoint(n))// if so, this is the closest point
o.copy(n);else{// if not, the point falls outside the triangle. the target is the closest point to the triangle's edges or vertices
t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var s=0;s<t.length;s++){t[s].closestPointToPoint(n,!0,i);var l=n.distanceToSquared(i);l<a&&(a=l,o.copy(i))}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),En.prototype=Object.assign(Object.create(Xt.prototype),{constructor:En,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Xt.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,o=Object.keys(r);if(o.length>0){var a=r[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=i.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){var e=new wt,t=new _n,n=new It,i=new Et,r=new Et,o=new Et,a=new Et,s=new Et,l=new Et,c=new _t,u=new _t,h=new _t,f=new Et,m=new Et,g=new Et;function v(e,t,n,i,r,o,a){return Mn.getBarycoord(e,t,n,i,f),r.multiplyScalar(f.x),o.multiplyScalar(f.y),a.multiplyScalar(f.z),r.add(o).add(a),r.clone()}function y(e,t,n,i,r,o,a,s){if(null===(t.side===d?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,t.side!==p,s)))return null;g.copy(s),g.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(g);return l<n.near||l>n.far?null:{distance:l,point:g.clone(),object:e}}function x(e,t,n,a,s,l,d,p){i.fromBufferAttribute(a,l),r.fromBufferAttribute(a,d),o.fromBufferAttribute(a,p);var f=y(e,e.material,t,n,i,r,o,m);if(f){s&&(c.fromBufferAttribute(s,l),u.fromBufferAttribute(s,d),h.fromBufferAttribute(s,p),f.uv=v(m,i,r,o,c,u,h));var g=new Qt(l,d,p);Mn.getNormal(i,r,o,g.normal),f.face=g,f.faceIndex=l}return f}return function(d,p){var f,g=this.geometry,b=this.material,_=this.matrixWorld;if(void 0!==b&&(// Checking boundingSphere distance to ray
null===g.boundingSphere&&g.computeBoundingSphere(),n.copy(g.boundingSphere),n.applyMatrix4(_),!1!==d.ray.intersectsSphere(n)&&(//
e.getInverse(_),t.copy(d.ray).applyMatrix4(e),null===g.boundingBox||!1!==t.intersectsBox(g.boundingBox))))if(g.isBufferGeometry){var w,M,E,T,A,S=g.index,C=g.attributes.position,R=g.attributes.uv;if(null!==S)// indexed buffer geometry
for(T=0,A=S.count;T<A;T+=3)w=S.getX(T),M=S.getX(T+1),E=S.getX(T+2),(f=x(this,d,t,C,R,w,M,E))&&(f.faceIndex=Math.floor(T/3),// triangle number in indices buffer semantics
p.push(f));else if(void 0!==C)// non-indexed buffer geometry
for(T=0,A=C.count;T<A;T+=3)(f=x(this,d,t,C,R,w=T,M=T+1,E=T+2))&&p.push(f)}else if(g.isGeometry){var L,P,O,I,B=Array.isArray(b),D=g.vertices,U=g.faces,N=g.faceVertexUvs[0];N.length>0&&(I=N);for(var F=0,k=U.length;F<k;F++){var z=U[F],H=B?b[z.materialIndex]:b;if(void 0!==H){if(L=D[z.a],P=D[z.b],O=D[z.c],!0===H.morphTargets){var V=g.morphTargets,G=this.morphTargetInfluences;i.set(0,0,0),r.set(0,0,0),o.set(0,0,0);for(var j=0,W=V.length;j<W;j++){var X=G[j];if(0!==X){var q=V[j].vertices;i.addScaledVector(a.subVectors(q[z.a],L),X),r.addScaledVector(s.subVectors(q[z.b],P),X),o.addScaledVector(l.subVectors(q[z.c],O),X)}}i.add(L),r.add(P),o.add(O),L=i,P=r,O=o}if(f=y(this,H,d,t,L,P,O,m)){if(I&&I[F]){var Y=I[F];c.copy(Y[0]),u.copy(Y[1]),h.copy(Y[2]),f.uv=v(m,L,P,O,c,u,h)}f.face=z,f.faceIndex=F,p.push(f)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),An.prototype=Object.create(St.prototype),An.prototype.constructor=An,An.prototype.isCubeTexture=!0,Object.defineProperty(An.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});
/**
 * @author tschw
 *
 * Uniforms of a program.
 * Those form a tree structure with a special top-level container for the root,
 * which you get by calling 'new WebGLUniforms( gl, program, renderer )'.
 *
 *
 * Properties of inner nodes including the top-level container:
 *
 * .seq - array of nested uniforms
 * .map - nested uniforms by name
 *
 *
 * Methods of all nodes except the top-level container:
 *
 * .setValue( gl, value, [renderer] )
 *
 * 		uploads a uniform value(s)
 *  	the 'renderer' parameter is needed for sampler uniforms
 *
 *
 * Static methods of the top-level container (renderer factorizations):
 *
 * .upload( gl, seq, values, renderer )
 *
 * 		sets uniforms in 'seq' to 'values[id].value'
 *
 * .seqWithValue( seq, values ) : filteredSeq
 *
 * 		filters 'seq' entries with corresponding entry in values
 *
 *
 * Methods of the top-level container (renderer factorizations):
 *
 * .setValue( gl, name, value )
 *
 * 		sets uniform with  name 'name' to 'value'
 *
 * .set( gl, obj, prop )
 *
 * 		sets uniform from object and property with same name than uniform
 *
 * .setOptional( gl, obj, prop )
 *
 * 		like .set for an optional property of the object
 *
 */
var Sn=new St,Cn=new An;// --- Base for inner nodes (including the root) ---
function Rn(){this.seq=[],this.map={}}// --- Utilities ---
// Array Caches (provide typed arrays for temporary by size)
var Ln=[],Pn=[],On=new Float32Array(16),In=new Float32Array(9);// Flattening for arrays of vectors and matrices
function Bn(e,t,n){var i=e[0];if(i<=0||i>0)return e;// unoptimized: ! isNaN( firstElem )
// see http://jacksondunstan.com/articles/983
var r=t*n,o=Ln[r];if(void 0===o&&(o=new Float32Array(r),Ln[r]=o),0!==t){i.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}// Texture unit allocation
function Dn(e,t){var n=Pn[t];void 0===n&&(n=new Int32Array(t),Pn[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocTextureUnit();return n}// --- Setters ---
// Note: Defining these methods externally, because they come in a bunch
// and this way their names minify.
// Single scalar
function Un(e,t){e.uniform1f(this.addr,t)}function Nn(e,t){e.uniform1i(this.addr,t)}// Single float vector (from flat array or THREE.VectorN)
function Fn(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function kn(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function zn(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}// Single matrix (from flat array or MatrixN)
function Hn(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function Vn(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(In.set(t.elements),e.uniformMatrix3fv(this.addr,!1,In))}function Gn(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(On.set(t.elements),e.uniformMatrix4fv(this.addr,!1,On))}// Single texture (2D / Cube)
function jn(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTexture2D(t||Sn,i)}function Wn(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTextureCube(t||Cn,i)}// Integer / Boolean vectors or arrays thereof (always flat arrays)
function Xn(e,t){e.uniform2iv(this.addr,t)}function qn(e,t){e.uniform3iv(this.addr,t)}function Yn(e,t){e.uniform4iv(this.addr,t)}// Helper to pick the right setter for the singular case
// Array of scalars
function Qn(e,t){e.uniform1fv(this.addr,t)}function Zn(e,t){e.uniform1iv(this.addr,t)}// Array of vectors (flat or from THREE classes)
function Jn(e,t){e.uniform2fv(this.addr,Bn(t,this.size,2))}function Kn(e,t){e.uniform3fv(this.addr,Bn(t,this.size,3))}function $n(e,t){e.uniform4fv(this.addr,Bn(t,this.size,4))}// Array of matrices (flat or from THREE clases)
function ei(e,t){e.uniformMatrix2fv(this.addr,!1,Bn(t,this.size,4))}function ti(e,t){e.uniformMatrix3fv(this.addr,!1,Bn(t,this.size,9))}function ni(e,t){e.uniformMatrix4fv(this.addr,!1,Bn(t,this.size,16))}// Array of textures (2D / Cube)
function ii(e,t,n){var i=t.length,r=Dn(n,i);e.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.setTexture2D(t[o]||Sn,r[o])}function ri(e,t,n){var i=t.length,r=Dn(n,i);e.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.setTextureCube(t[o]||Cn,r[o])}// Helper to pick the right setter for a pure (bottom-level) array
// --- Uniform Classes ---
function oi(e,t,n){this.id=e,this.addr=n,this.setValue=function(e){switch(e){case 5126:return Un;// FLOAT
case 35664:return Fn;// _VEC2
case 35665:return kn;// _VEC3
case 35666:return zn;// _VEC4
case 35674:return Hn;// _MAT2
case 35675:return Vn;// _MAT3
case 35676:return Gn;// _MAT4
case 35678:case 36198:return jn;// SAMPLER_2D, SAMPLER_EXTERNAL_OES
case 35680:return Wn;// SAMPLER_CUBE
case 5124:case 35670:return Nn;// INT, BOOL
case 35667:case 35671:return Xn;// _VEC2
case 35668:case 35672:return qn;// _VEC3
case 35669:case 35673:return Yn;// _VEC4
}}(t.type)}function ai(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Qn;// FLOAT
case 35664:return Jn;// _VEC2
case 35665:return Kn;// _VEC3
case 35666:return $n;// _VEC4
case 35674:return ei;// _MAT2
case 35675:return ti;// _MAT3
case 35676:return ni;// _MAT4
case 35678:return ii;// SAMPLER_2D
case 35680:return ri;// SAMPLER_CUBE
case 5124:case 35670:return Zn;// INT, BOOL
case 35667:case 35671:return Xn;// _VEC2
case 35668:case 35672:return qn;// _VEC3
case 35669:case 35673:return Yn;// _VEC4
}}(t.type)}function si(e){this.id=e,Rn.call(this)}si.prototype.setValue=function(e,t){for(// Note: Don't need an extra 'renderer' parameter, since samplers
// are not allowed in structured uniforms.
var n=this.seq,i=0,r=n.length;i!==r;++i){var o=n[i];o.setValue(e,t[o.id])}};// --- Top-level ---
// Parser - builds up the property tree from the path strings
var li=/([\w\d_]+)(\])?(\[|\.)?/g;// extracts
// 	- the identifier (member name or array index)
//  - followed by an optional right bracket (found when array index)
//  - followed by an optional left bracket or dot (type of subscript)
//
// Note: These portions can be read in a non-overlapping fashion and
// allow straightforward parsing of the hierarchy that WebGL encodes
// in the uniform names.
function ci(e,t){e.seq.push(t),e.map[t.id]=t}function ui(e,t,n){var i=e.name,r=i.length;// reset RegExp object, because of the early exit of a previous run
for(li.lastIndex=0;;){var o=li.exec(i),a=li.lastIndex,s=o[1],l="]"===o[2],c=o[3];// convert to integer
if(l&&(s|=0),void 0===c||"["===c&&a+2===r){// bare name or "pure" bottom-level array "[0]" suffix
ci(n,void 0===c?new oi(s,e,t):new ai(s,e,t));break}// step into inner node / create it in case it doesn't exist
var u=n.map[s];void 0===u&&ci(n,u=new si(s)),n=u}}// Root Container
function hi(e,t,n){Rn.call(this),this.renderer=n;for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<i;++r){var o=e.getActiveUniform(t,r);ui(o,e.getUniformLocation(t,o.name),this)}}function di(e,t,n){var i=e.createShader(t);// --enable-privileged-webgl-extension
// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );
return e.shaderSource(i,n),e.compileShader(i),!1===e.getShaderParameter(i,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),
/**
 * @author mrdoob / http://mrdoob.com/
 */
function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),i}
/**
 * @author mrdoob / http://mrdoob.com/
 */hi.prototype.setValue=function(e,t,n){var i=this.map[t];void 0!==i&&i.setValue(e,n,this.renderer)},hi.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},// Static interface
hi.upload=function(e,t,n,i){for(var r=0,o=t.length;r!==o;++r){var a=t[r],s=n[a.id];!1!==s.needsUpdate&&// note: always updating when .needsUpdate is undefined
a.setValue(e,s.value,i)}},hi.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var o=e[i];o.id in t&&n.push(o)}return n};var pi=0;function fi(e){switch(e){case ht:return["Linear","( value )"];case dt:return["sRGB","( value )"];case ft:return["RGBE","( value )"];case mt:return["RGBM","( value, 7.0 )"];case gt:return["RGBM","( value, 16.0 )"];case vt:return["RGBD","( value, 256.0 )"];case pt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function mi(e,t){var n=fi(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function gi(e){return""!==e}function vi(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function yi(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function xi(e){return e.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(e,t){var n=Ut[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return xi(n)})}function bi(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,i){for(var r="",o=parseInt(t);o<parseInt(n);o++)r+=i.replace(/\[ i \]/g,"[ "+o+" ]");return r})}function _i(e,t,n,i,r,o){var a=e.context,s=i.defines,l=r.vertexShader,h=r.fragmentShader,d="SHADOWMAP_TYPE_BASIC";o.shadowMapType===c?d="SHADOWMAP_TYPE_PCF":o.shadowMapType===u&&(d="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",m="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(i.envMap.mapping){case te:case ne:p="ENVMAP_TYPE_CUBE";break;case ae:case se:p="ENVMAP_TYPE_CUBE_UV";break;case ie:case re:p="ENVMAP_TYPE_EQUIREC";break;case oe:p="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case ne:case re:f="ENVMAP_MODE_REFRACTION"}switch(i.combine){case q:m="ENVMAP_BLENDING_MULTIPLY";break;case Y:m="ENVMAP_BLENDING_MIX";break;case Q:m="ENVMAP_BLENDING_ADD"}}var g,v,y=e.gammaFactor>0?e.gammaFactor:1,x=function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(gi).join("\n")}(i.extensions,o,t),b=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(s),_=a.createProgram();// console.log( 'building new program ' );
//
i.isRawShaderMaterial?((g=[b].filter(gi).join("\n")).length>0&&(g+="\n"),(v=[x,b].filter(gi).join("\n")).length>0&&(v+="\n")):(g=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,b,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+y,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+d:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(gi).join("\n"),v=[x,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,b,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+y,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.envMap?"#define "+f:"",o.envMap?"#define "+m:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+d:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==Z?"#define TONE_MAPPING":"",o.toneMapping!==Z?Ut.tonemapping_pars_fragment:"",// this code is required here because it is used by the toneMapping() function defined below
o.toneMapping!==Z?function(e,t){var n;switch(t){case J:n="Linear";break;case K:n="Reinhard";break;case $:n="Uncharted2";break;case ee:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Ut.encodings_pars_fragment:"",// this code is required here because it is used by the various encoding/decoding function defined below
o.mapEncoding?mi("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?mi("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?mi("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?function(e,t){var n=fi(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(gi).join("\n")),l=yi(l=vi(l=xi(l),o),o),h=yi(h=vi(h=xi(h),o),o);var w=g+(l=bi(l)),M=v+(h=bi(h)),E=di(a,a.VERTEX_SHADER,w),T=di(a,a.FRAGMENT_SHADER,M);a.attachShader(_,E),a.attachShader(_,T),// Force a particular attribute to index 0.
void 0!==i.index0AttributeName?a.bindAttribLocation(_,0,i.index0AttributeName):!0===o.morphTargets&&// programs with morphTargets displace position out of attribute 0
a.bindAttribLocation(_,0,"position"),a.linkProgram(_);var A,S,C=a.getProgramInfoLog(_).trim(),R=a.getShaderInfoLog(E).trim(),L=a.getShaderInfoLog(T).trim(),P=!0,O=!0;// console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );
// console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );
return!1===a.getProgramParameter(_,a.LINK_STATUS)?(P=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(_,a.VALIDATE_STATUS),"gl.getProgramInfoLog",C,R,L)):""!==C?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",C):""!==R&&""!==L||(O=!1),O&&(this.diagnostics={runnable:P,material:i,programLog:C,vertexShader:{log:R,prefix:g},fragmentShader:{log:L,prefix:v}}),// clean up
a.deleteShader(E),a.deleteShader(T),this.getUniforms=function(){return void 0===A&&(A=new hi(a,_,e)),A},this.getAttributes=function(){return void 0===S&&(S=function(e,t){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=0;r<i;r++){var o=e.getActiveAttrib(t,r).name;// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );
n[o]=e.getAttribLocation(t,o)}return n}(a,_)),S},// free resource
this.destroy=function(){a.deleteProgram(_),this.program=void 0},// DEPRECATED
Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),//
this.name=r.name,this.id=pi++,this.code=n,this.usedTimes=1,this.program=_,this.vertexShader=E,this.fragmentShader=T,this}
/**
 * @author mrdoob / http://mrdoob.com/
 */function wi(e,t,n){var i=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=ht,// add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.
n===ht&&t&&(n=pt),n}this.getParameters=function(t,i,o,s,l,c,u){var h=r[t.type],f=u.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;// default for when object is not specified
// ( for example when prebuilding shader to be used with multiple objects )
//
//  - leave some extra space for other uniforms
//  - limit here is ANGLE's 254 max uniform vectors
//    (up to 54 should be safe)
var i=n.maxVertexUniforms,r=Math.floor((i-20)/4),o=Math.min(r,t.length);return o<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+o+"."),0):o}(u):0,m=n.precision;// heuristics to create shader parameters according to lights in the scene
// (not to blow over maxLights budget)
null!==t.precision&&(m=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",m,"instead.");var g=e.getRenderTarget();return{shaderID:h,precision:m,supportsVertexTextures:n.vertexTextures,outputEncoding:a(g?g.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:a(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:a(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===ae||t.envMap.mapping===se),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:a(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&f>0,maxBones:f,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:l,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===p,flipSided:t.side===d,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)i.push(r),i.push(t.defines[r]);for(var a=0;a<o.length;a++)i.push(n[o[a]]);return i.push(t.onBeforeCompile.toString()),i.push(e.gammaOutput),i.join()},this.acquireProgram=function(n,r,o,a){// Check if code has been already compiled
for(var s,l=0,c=i.length;l<c;l++){var u=i[l];if(u.code===a){++(s=u).usedTimes;break}}return void 0===s&&(s=new _i(e,t,a,n,r,o),i.push(s)),s},this.releaseProgram=function(e){if(0==--e.usedTimes){// Remove from unordered set
var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),// Free WebGL resources
e.destroy()}},// Exposed for resource monitoring & error feedback via renderer.info:
this.programs=i}
/**
 * @author fordacious / fordacious.github.io
 */
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Mi(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ei(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ti(){var e={};return{get:function(t,n){var i=t.id+","+n.id,r=e[i];return void 0===r&&(// console.log( 'THREE.WebGLRenderLists:', hash );
r=new function(){var e=[],t=0,n=[],i=[];return{opaque:n,transparent:i,init:function(){t=0,n.length=0,i.length=0},push:function(r,o,a,s,l){var c=e[t];void 0===c?(c={id:r.id,object:r,geometry:o,material:a,program:a.program,renderOrder:r.renderOrder,z:s,group:l},e[t]=c):(c.id=r.id,c.object=r,c.geometry=o,c.material=a,c.program=a.program,c.renderOrder=r.renderOrder,c.z=s,c.group=l),(!0===a.transparent?i:n).push(c),t++},sort:function(){n.length>1&&n.sort(Mi),i.length>1&&i.sort(Ei)}}},e[i]=r),r},dispose:function(){e={}}}}
/**
 * @author mrdoob / http://mrdoob.com/
 */var Ai=0;function Si(){var e=new function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Et,color:new kt,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"SpotLight":n={position:new Et,direction:new Et,color:new kt,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new _t};break;case"PointLight":n={position:new Et,color:new kt,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new _t,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Et,skyColor:new kt,groundColor:new kt};break;case"RectAreaLight":n={color:new kt,position:new Et,halfWidth:new Et,halfHeight:new Et}}return e[t.id]=n,n}}},t={id:Ai++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new Et,i=new wt,r=new wt;return{setup:function(o,a,s){for(var l=0,c=0,u=0,h=0,d=0,p=0,f=0,m=0,g=s.matrixWorldInverse,v=0,y=o.length;v<y;v++){var x=o[v],b=x.color,_=x.intensity,w=x.distance,M=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)l+=b.r*_,c+=b.g*_,u+=b.b*_;else if(x.isDirectionalLight){if((T=e.get(x)).color.copy(x.color).multiplyScalar(x.intensity),T.direction.setFromMatrixPosition(x.matrixWorld),n.setFromMatrixPosition(x.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(g),T.shadow=x.castShadow,x.castShadow){var E=x.shadow;T.shadowBias=E.bias,T.shadowRadius=E.radius,T.shadowMapSize=E.mapSize}t.directionalShadowMap[h]=M,t.directionalShadowMatrix[h]=x.shadow.matrix,t.directional[h]=T,h++}else if(x.isSpotLight)(T=e.get(x)).position.setFromMatrixPosition(x.matrixWorld),T.position.applyMatrix4(g),T.color.copy(b).multiplyScalar(_),T.distance=w,T.direction.setFromMatrixPosition(x.matrixWorld),n.setFromMatrixPosition(x.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(g),T.coneCos=Math.cos(x.angle),T.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),T.decay=0===x.distance?0:x.decay,T.shadow=x.castShadow,x.castShadow&&(E=x.shadow,T.shadowBias=E.bias,T.shadowRadius=E.radius,T.shadowMapSize=E.mapSize),t.spotShadowMap[p]=M,t.spotShadowMatrix[p]=x.shadow.matrix,t.spot[p]=T,p++;else if(x.isRectAreaLight)// (a) intensity is the total visible light emitted
//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );
// (b) intensity is the brightness of the light
(T=e.get(x)).color.copy(b).multiplyScalar(_),T.position.setFromMatrixPosition(x.matrixWorld),T.position.applyMatrix4(g),// extract local rotation of light to derive width/height half vectors
r.identity(),i.copy(x.matrixWorld),i.premultiply(g),r.extractRotation(i),T.halfWidth.set(.5*x.width,0,0),T.halfHeight.set(0,.5*x.height,0),T.halfWidth.applyMatrix4(r),T.halfHeight.applyMatrix4(r),// TODO (abelnation): RectAreaLight distance?
// uniforms.distance = distance;
t.rectArea[f]=T,f++;else if(x.isPointLight)(T=e.get(x)).position.setFromMatrixPosition(x.matrixWorld),T.position.applyMatrix4(g),T.color.copy(x.color).multiplyScalar(x.intensity),T.distance=x.distance,T.decay=0===x.distance?0:x.decay,T.shadow=x.castShadow,x.castShadow&&(E=x.shadow,T.shadowBias=E.bias,T.shadowRadius=E.radius,T.shadowMapSize=E.mapSize,T.shadowCameraNear=E.camera.near,T.shadowCameraFar=E.camera.far),t.pointShadowMap[d]=M,t.pointShadowMatrix[d]=x.shadow.matrix,t.point[d]=T,d++;else if(x.isHemisphereLight){var T;(T=e.get(x)).direction.setFromMatrixPosition(x.matrixWorld),T.direction.transformDirection(g),T.direction.normalize(),T.skyColor.copy(x.color).multiplyScalar(_),T.groundColor.copy(x.groundColor).multiplyScalar(_),t.hemi[m]=T,m++}}t.ambient[0]=l,t.ambient[1]=c,t.ambient[2]=u,t.directional.length=h,t.spot.length=p,t.rectArea.length=f,t.point.length=d,t.hemi.length=m,t.hash=t.id+","+h+","+d+","+p+","+f+","+m+","+a.length},state:t}}
/**
 * @author Mugen87 / https://github.com/Mugen87
 */function Ci(){var e={};return{get:function(t,n){var i=t.id+","+n.id,r=e[i];return void 0===r&&(r=new function(){var e=new Si,t=[],n=[],i=[];return{init:function(){t.length=0,n.length=0,i.length=0},state:{lightsArray:t,shadowsArray:n,spritesArray:i,lights:e},setupLights:function(i){e.setup(t,n,i)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)},pushSprite:function(e){i.push(e)}}},e[i]=r),r},dispose:function(){e={}}}}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 * @author bhouston / https://clara.io
 * @author WestLangley / http://github.com/WestLangley
 *
 * parameters = {
 *
 *  opacity: <float>,
 *
 *  map: new THREE.Texture( <Image> ),
 *
 *  alphaMap: new THREE.Texture( <Image> ),
 *
 *  displacementMap: new THREE.Texture( <Image> ),
 *  displacementScale: <float>,
 *  displacementBias: <float>,
 *
 *  wireframe: <boolean>,
 *  wireframeLinewidth: <float>
 * }
 */function Ri(e){yn.call(this),this.type="MeshDepthMaterial",this.depthPacking=yt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}
/**
 * @author WestLangley / http://github.com/WestLangley
 *
 * parameters = {
 *
 *  referencePosition: <float>,
 *  nearDistance: <float>,
 *  farDistance: <float>,
 *
 *  skinning: <bool>,
 *  morphTargets: <bool>,
 *
 *  map: new THREE.Texture( <Image> ),
 *
 *  alphaMap: new THREE.Texture( <Image> ),
 *
 *  displacementMap: new THREE.Texture( <Image> ),
 *  displacementScale: <float>,
 *  displacementBias: <float>
 *
 * }
 */
function Li(e){yn.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Et,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}
/**
 * @author alteredq / http://alteredqualia.com/
 * @author mrdoob / http://mrdoob.com/
 */
function Pi(e,t,n){// init
for(var i=new Dt,r=new wt,o=new _t,a=new _t(n,n),s=new Et,l=new Et,u=1,f=2,m=1+(u|f),g=new Array(m),v=new Array(m),y={},x={0:d,1:h,2:p},b=[new Et(1,0,0),new Et(-1,0,0),new Et(0,0,1),new Et(0,0,-1),new Et(0,1,0),new Et(0,-1,0)],_=[new Et(0,1,0),new Et(0,1,0),new Et(0,1,0),new Et(0,1,0),new Et(0,0,1),new Et(0,0,-1)],w=[new Ct,new Ct,new Ct,new Ct,new Ct,new Ct],M=0;M!==m;++M){var E=0!=(M&u),T=0!=(M&f),A=new Ri({depthPacking:xt,morphTargets:E,skinning:T});g[M]=A;//
var S=new Li({morphTargets:E,skinning:T});v[M]=S}//
var C=this;function R(t,n,i,r,o,a){var s=t.geometry,l=null,c=g,h=t.customDepthMaterial;if(i&&(c=v,h=t.customDistanceMaterial),h)l=h;else{var d=!1;n.morphTargets&&(s&&s.isBufferGeometry?d=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(d=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var p=t.isSkinnedMesh&&n.skinning,m=0;d&&(m|=u),p&&(m|=f),l=c[m]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){// in this case we need a unique material instance reflecting the
// appropriate state
var b=l.uuid,_=n.uuid,w=y[b];void 0===w&&(w={},y[b]=w);var M=w[_];void 0===M&&(M=l.clone(),w[_]=M),l=M}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=null!=n.shadowSide?n.shadowSide:x[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,i&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=o,l.farDistance=a),l}function L(n,r,o,a){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var s=t.update(n),c=n.material;if(Array.isArray(c))for(var u=s.groups,h=0,d=u.length;h<d;h++){var p=u[h],f=c[p.materialIndex];if(f&&f.visible){var m=R(n,f,a,l,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,p)}}else if(c.visible){m=R(n,c,a,l,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,null)}}for(var g=n.children,v=0,y=g.length;v<y;v++)L(g[v],r,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=c,this.render=function(t,n,c){if(!1!==C.enabled&&(!1!==C.autoUpdate||!1!==C.needsUpdate)&&0!==t.length){// TODO Clean up (needed in case of contextlost)
var u,h=e.context,d=e.state;// Set GL state for depth map.
d.disable(h.BLEND),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var p=0,f=t.length;p<f;p++){var m=t[p],g=m.shadow,v=m&&m.isPointLight;if(void 0!==g){var y=g.camera;if(o.copy(g.mapSize),o.min(a),v){var x=o.x,M=o.y;// These viewports map a cube-map onto a 2D texture with the
// following orientation:
//
//  xzXZ
//   y Y
//
// X - Positive x direction
// x - Negative x direction
// Y - Positive y direction
// y - Negative y direction
// Z - Positive z direction
// z - Negative z direction
// positive X
w[0].set(2*x,M,x,M),// negative X
w[1].set(0,M,x,M),// positive Z
w[2].set(3*x,M,x,M),// negative Z
w[3].set(x,M,x,M),// positive Y
w[4].set(3*x,0,x,M),// negative Y
w[5].set(x,0,x,M),o.x*=4,o.y*=2}if(null===g.map){var E={minFilter:he,magFilter:he,format:Pe};g.map=new Rt(o.x,o.y,E),g.map.texture.name=m.name+".shadowMap",y.updateProjectionMatrix()}g.isSpotLightShadow&&g.update(m);var T=g.map,A=g.matrix;l.setFromMatrixPosition(m.matrixWorld),y.position.copy(l),v?(u=6,// for point lights we set the shadow matrix to be a translation-only matrix
// equal to inverse of the light's position
A.makeTranslation(-l.x,-l.y,-l.z)):(u=1,s.setFromMatrixPosition(m.target.matrixWorld),y.lookAt(s),y.updateMatrixWorld(),// compute shadow matrix
A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),A.multiply(y.projectionMatrix),A.multiply(y.matrixWorldInverse)),e.setRenderTarget(T),e.clear();// render shadow map for each cube face (if omni-directional) or
// run a single pass if not
for(var S=0;S<u;S++){if(v){s.copy(y.position),s.add(b[S]),y.up.copy(_[S]),y.lookAt(s),y.updateMatrixWorld();var R=w[S];d.viewport(R)}// update camera matrices and frustum
r.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),i.setFromMatrix(r),// set object matrices & frustum culling
L(n,c,y,v)}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}C.needsUpdate=!1}}}
/**
 * @author mrdoob / http://mrdoob.com/
 */function Oi(e,t,n,i,r,o,a,s,l){St.call(this,e,t,n,i,r,o,a,s,l),this.needsUpdate=!0}
/**
 * @author mikael emtinger / http://gomo.se/
 * @author alteredq / http://alteredqualia.com/
 */
function Ii(e,t,n,i,r){var o,a,s,l,c,u,h=new Et,d=new Mt,p=new Et;function f(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);o=t.createBuffer(),a=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),s=function(){var e=t.createProgram(),n=t.createShader(t.VERTEX_SHADER),i=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),t.shaderSource(i,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),t.compileShader(n),t.compileShader(i),t.attachShader(e,n),t.attachShader(e,i),t.linkProgram(e),e}(),l={position:t.getAttribLocation(s,"position"),uv:t.getAttribLocation(s,"uv")},c={uvOffset:t.getUniformLocation(s,"uvOffset"),uvScale:t.getUniformLocation(s,"uvScale"),rotation:t.getUniformLocation(s,"rotation"),center:t.getUniformLocation(s,"center"),scale:t.getUniformLocation(s,"scale"),color:t.getUniformLocation(s,"color"),map:t.getUniformLocation(s,"map"),opacity:t.getUniformLocation(s,"opacity"),modelViewMatrix:t.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(s,"projectionMatrix"),fogType:t.getUniformLocation(s,"fogType"),fogDensity:t.getUniformLocation(s,"fogDensity"),fogNear:t.getUniformLocation(s,"fogNear"),fogFar:t.getUniformLocation(s,"fogFar"),fogColor:t.getUniformLocation(s,"fogColor"),fogDepth:t.getUniformLocation(s,"fogDepth"),alphaTest:t.getUniformLocation(s,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var h=i.getContext("2d");h.fillStyle="white",h.fillRect(0,0,8,8),u=new Oi(i)}function m(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(r,g,v){if(0!==r.length){// setup gl
void 0===s&&f(),n.useProgram(s),n.initAttributes(),n.enableAttribute(l.position),n.enableAttribute(l.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,o),t.vertexAttribPointer(l.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(l.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a),t.uniformMatrix4fv(c.projectionMatrix,!1,v.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(c.map,0);var y=0,x=0,b=g.fog;b?(t.uniform3f(c.fogColor,b.color.r,b.color.g,b.color.b),b.isFog?(t.uniform1f(c.fogNear,b.near),t.uniform1f(c.fogFar,b.far),t.uniform1i(c.fogType,1),y=1,x=1):b.isFogExp2&&(t.uniform1f(c.fogDensity,b.density),t.uniform1i(c.fogType,2),y=2,x=2)):(t.uniform1i(c.fogType,0),y=0,x=0);// update positions and sort
for(var _=0,w=r.length;_<w;_++){(T=r[_]).modelViewMatrix.multiplyMatrices(v.matrixWorldInverse,T.matrixWorld),T.z=-T.modelViewMatrix.elements[14]}r.sort(m);// render all sprites
var M=[],E=[];for(_=0,w=r.length;_<w;_++){var T,A=(T=r[_]).material;if(!1!==A.visible){T.onBeforeRender(e,g,v,void 0,A,void 0),t.uniform1f(c.alphaTest,A.alphaTest),t.uniformMatrix4fv(c.modelViewMatrix,!1,T.modelViewMatrix.elements),T.matrixWorld.decompose(h,d,p),M[0]=p.x,M[1]=p.y,E[0]=T.center.x-.5,E[1]=T.center.y-.5;var S=0;g.fog&&A.fog&&(S=x),y!==S&&(t.uniform1i(c.fogType,S),y=S),null!==A.map?(t.uniform2f(c.uvOffset,A.map.offset.x,A.map.offset.y),t.uniform2f(c.uvScale,A.map.repeat.x,A.map.repeat.y)):(t.uniform2f(c.uvOffset,0,0),t.uniform2f(c.uvScale,1,1)),t.uniform1f(c.opacity,A.opacity),t.uniform3f(c.color,A.color.r,A.color.g,A.color.b),t.uniform1f(c.rotation,A.rotation),t.uniform2fv(c.center,E),t.uniform2fv(c.scale,M),n.setBlending(A.blending,A.blendEquation,A.blendSrc,A.blendDst,A.blendEquationAlpha,A.blendSrcAlpha,A.blendDstAlpha,A.premultipliedAlpha),n.buffers.depth.setTest(A.depthTest),n.buffers.depth.setMask(A.depthWrite),n.buffers.color.setMask(A.colorWrite),i.setTexture2D(A.map||u,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),T.onAfterRender(e,g,v,void 0,A,void 0)}}// restore gl
n.enable(t.CULL_FACE),n.reset()}}}
/**
 * @author mrdoob / http://mrdoob.com/
 */
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Bi(e,t,n,i,r,o,a){var s,l="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,c={};/* global WebGL2RenderingContext */ //
function u(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");// Warning: Scaling through the canvas will only work with images that use
// premultiplied alpha.
var n=t/Math.max(e.width,e.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.width=Math.floor(e.width*n),i.height=Math.floor(e.height*n),i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+i.width+"x"+i.height,e),i}return e}function h(e){return bt.isPowerOfTwo(e.width)&&bt.isPowerOfTwo(e.height)}function d(e,t){return e.generateMipmaps&&t&&e.minFilter!==he&&e.minFilter!==fe}function p(t,n,r,o){e.generateMipmap(t),// Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11
i.get(n).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}// Fallback filters for non-power-of-2 textures
function f(t){return t===he||t===de||t===pe?e.NEAREST:e.LINEAR}//
function m(t){var n=t.target;n.removeEventListener("dispose",m),//
function(t){var n=i.get(t);if(t.image&&n.__image__webglTextureCube)// cube texture
e.deleteTexture(n.__image__webglTextureCube);else{// 2D texture
if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}// remove all webgl properties
i.remove(t)}(n),n.isVideoTexture&&delete c[n.id],a.memory.textures--}function g(t){var n=t.target;n.removeEventListener("dispose",g),function(t){var n=i.get(t),r=i.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(t.texture),i.remove(t)}//
(n),a.memory.textures--}function v(t,f){var g=i.get(t);if(t.isVideoTexture&&function(e){var t=e.id,n=a.render.frame;// Check the last frame we updated the VideoTexture
c[t]!==n&&(c[t]=n,e.update())}(t),t.version>0&&g.__version!==t.version){var v=t.image;if(void 0===v)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==v.complete)return void function(t,i,c){void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),a.memory.textures++);n.activeTexture(e.TEXTURE0+c),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment);var f=u(i.image,r.maxTextureSize);(function(e){return e.wrapS!==ce||e.wrapT!==ce||e.minFilter!==he&&e.minFilter!==fe})(i)&&!1===h(f)&&(f=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=bt.floorPowerOfTwo(e.width),s.height=bt.floorPowerOfTwo(e.height),s.getContext("2d").drawImage(e,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+s.width+"x"+s.height,e),s):e}(f));var g=h(f),v=o.convert(i.format),x=o.convert(i.type);y(e.TEXTURE_2D,i,g);var b,_=i.mipmaps;if(i.isDepthTexture){// populate depth texture with dummy data
var w=e.DEPTH_COMPONENT;if(i.type===Me){if(!l)throw new Error("Float Depth Texture only supported in WebGL2.0");w=e.DEPTH_COMPONENT32F}else l&&(// WebGL 2.0 requires signed internalformat for glTexImage2D
w=e.DEPTH_COMPONENT16);i.format===De&&w===e.DEPTH_COMPONENT&&i.type!==be&&i.type!==we&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=be,x=o.convert(i.type)),// Depth stencil textures need the DEPTH_STENCIL internal format
// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)
i.format===Ue&&(w=e.DEPTH_STENCIL,// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are
// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.
// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)
i.type!==Ce&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Ce,x=o.convert(i.type))),n.texImage2D(e.TEXTURE_2D,0,w,f.width,f.height,0,v,x,null)}else if(i.isDataTexture)// use manually created mipmaps if available
// if there are no manual mipmaps
// set 0 level mipmap and then use GL to generate other mipmap levels
if(_.length>0&&g){for(var M=0,E=_.length;M<E;M++)b=_[M],n.texImage2D(e.TEXTURE_2D,M,v,b.width,b.height,0,v,x,b.data);i.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else n.texImage2D(e.TEXTURE_2D,0,v,f.width,f.height,0,v,x,f.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(var M=0,E=_.length;M<E;M++)b=_[M],i.format!==Pe&&i.format!==Le?n.getCompressedTextureFormats().indexOf(v)>-1?n.compressedTexImage2D(e.TEXTURE_2D,M,v,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,M,v,b.width,b.height,0,v,x,b.data);t.__maxMipLevel=_.length-1}else// regular Texture (image, video, canvas)
// use manually created mipmaps if available
// if there are no manual mipmaps
// set 0 level mipmap and then use GL to generate other mipmap levels
if(_.length>0&&g){for(var M=0,E=_.length;M<E;M++)b=_[M],n.texImage2D(e.TEXTURE_2D,M,v,v,x,b);i.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else n.texImage2D(e.TEXTURE_2D,0,v,v,x,f),t.__maxMipLevel=0;d(i,g)&&p(e.TEXTURE_2D,i,f.width,f.height);t.__version=i.version,i.onUpdate&&i.onUpdate(i)}// Render targets
// Setup storage for target texture and bind it to correct framebuffer
(g,t,f);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+f),n.bindTexture(e.TEXTURE_2D,g.__webglTexture)}function y(n,a,s){var l;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o.convert(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o.convert(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===ce&&a.wrapT===ce||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(n,e.TEXTURE_MAG_FILTER,f(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,f(a.minFilter)),a.minFilter!==he&&a.minFilter!==fe&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),l=t.get("EXT_texture_filter_anisotropic")){if(a.type===Me&&null===t.get("OES_texture_float_linear"))return;if(a.type===Ee&&null===t.get("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function x(t,r,a,s){var l=o.convert(r.texture.format),c=o.convert(r.texture.type);n.texImage2D(s,0,l,r.width,r.height,0,l,c,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}// Setup storage for internal depth/stencil buffers and bind to correct framebuffer
function b(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):// FIXME: We don't support !depth !stencil
e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}// Setup resources for a Depth Texture for a FBO (needs an extension)
// Setup GL resources for a non-texture depth buffer
function _(t){var n=i.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");// upload an empty depth texture with framebuffer size
i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),v(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===De)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r,0);else{if(n.depthTexture.format!==Ue)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),b(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),b(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}// Set up GL resources for the render target
this.setTexture2D=v,this.setTextureCube=function(t,s){var l=i.get(t);if(6===t.image.length)if(t.version>0&&l.__version!==t.version){l.__image__webglTextureCube||(t.addEventListener("dispose",m),l.__image__webglTextureCube=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var c=t&&t.isCompressedTexture,f=t.image[0]&&t.image[0].isDataTexture,g=[],v=0;v<6;v++)g[v]=c||f?f?t.image[v].image:t.image[v]:u(t.image[v],r.maxCubemapSize);var x=g[0],b=h(x),_=o.convert(t.format),w=o.convert(t.type);for(y(e.TEXTURE_CUBE_MAP,t,b),v=0;v<6;v++)if(c)for(var M,E=g[v].mipmaps,T=0,A=E.length;T<A;T++)M=E[T],t.format!==Pe&&t.format!==Le?n.getCompressedTextureFormats().indexOf(_)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,T,_,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,T,_,M.width,M.height,0,_,w,M.data);else f?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,_,g[v].width,g[v].height,0,_,w,g[v].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,_,_,w,g[v]);l.__maxMipLevel=c?E.length-1:0,d(t,b)&&// We assume images for cube map have the same size.
p(e.TEXTURE_CUBE_MAP,t,x.width,x.height),l.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,r){n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_CUBE_MAP,i.get(t).__webglTexture)},this.setupRenderTarget=function(t){var r=i.get(t),o=i.get(t.texture);t.addEventListener("dispose",g),o.__webglTexture=e.createTexture(),a.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,l=h(t);// Setup framebuffer
if(s){r.__webglFramebuffer=[];for(var c=0;c<6;c++)r.__webglFramebuffer[c]=e.createFramebuffer()}else r.__webglFramebuffer=e.createFramebuffer();// Setup color buffer
if(s){for(n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),y(e.TEXTURE_CUBE_MAP,t.texture,l),c=0;c<6;c++)x(r.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);d(t.texture,l)&&p(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),y(e.TEXTURE_2D,t.texture,l),x(r.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),d(t.texture,l)&&p(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);// Setup depth and stencil buffers
t.depthBuffer&&_(t)},this.updateRenderTargetMipmap=function(t){var r=t.texture;if(d(r,h(t))){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=i.get(r).__webglTexture;n.bindTexture(o,a),p(o,r,t.width,t.height),n.bindTexture(o,null)}}}
/**
 * @author thespite / http://www.twitter.com/thespite
 */function Di(e,t){return{convert:function(n){var i;if(n===le)return e.REPEAT;if(n===ce)return e.CLAMP_TO_EDGE;if(n===ue)return e.MIRRORED_REPEAT;if(n===he)return e.NEAREST;if(n===de)return e.NEAREST_MIPMAP_NEAREST;if(n===pe)return e.NEAREST_MIPMAP_LINEAR;if(n===fe)return e.LINEAR;if(n===me)return e.LINEAR_MIPMAP_NEAREST;if(n===ge)return e.LINEAR_MIPMAP_LINEAR;if(n===ve)return e.UNSIGNED_BYTE;if(n===Te)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Ae)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Se)return e.UNSIGNED_SHORT_5_6_5;if(n===ye)return e.BYTE;if(n===xe)return e.SHORT;if(n===be)return e.UNSIGNED_SHORT;if(n===_e)return e.INT;if(n===we)return e.UNSIGNED_INT;if(n===Me)return e.FLOAT;if(n===Ee&&null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES;if(n===Re)return e.ALPHA;if(n===Le)return e.RGB;if(n===Pe)return e.RGBA;if(n===Oe)return e.LUMINANCE;if(n===Ie)return e.LUMINANCE_ALPHA;if(n===De)return e.DEPTH_COMPONENT;if(n===Ue)return e.DEPTH_STENCIL;if(n===M)return e.FUNC_ADD;if(n===E)return e.FUNC_SUBTRACT;if(n===T)return e.FUNC_REVERSE_SUBTRACT;if(n===C)return e.ZERO;if(n===R)return e.ONE;if(n===L)return e.SRC_COLOR;if(n===P)return e.ONE_MINUS_SRC_COLOR;if(n===O)return e.SRC_ALPHA;if(n===I)return e.ONE_MINUS_SRC_ALPHA;if(n===B)return e.DST_ALPHA;if(n===D)return e.ONE_MINUS_DST_ALPHA;if(n===U)return e.DST_COLOR;if(n===N)return e.ONE_MINUS_DST_COLOR;if(n===F)return e.SRC_ALPHA_SATURATE;if((n===Ne||n===Fe||n===ke||n===ze)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(n===Ne)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Fe)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===ke)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===ze)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===He||n===Ve||n===Ge||n===je)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(n===He)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Ve)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Ge)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===je)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===We&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((n===Xe||n===qe||n===Ye||n===Qe||n===Ze||n===Je||n===Ke||n===$e||n===et||n===tt||n===nt||n===it||n===rt||n===ot)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return n;if((n===A||n===S)&&null!==(i=t.get("EXT_blend_minmax"))){if(n===A)return i.MIN_EXT;if(n===S)return i.MAX_EXT}return n===Ce&&null!==(i=t.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:0}}}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author greggman / http://games.greggman.com/
 * @author zz85 / http://www.lab4games.net/zz85/blog
 * @author tschw
 */function Ui(e,t,n,i){qt.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,// width of the film (default in millimeters)
this.filmOffset=0,// horizontal film offset (same unit as gauge)
this.updateProjectionMatrix()}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Ni(e){Ui.call(this),this.cameras=e||[]}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Fi(e){var t=this,n=null,i=null,r=null,o=new wt,a=new wt;"undefined"!=typeof window&&"VRFrameData"in window&&(i=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",g,!1));var s=new wt,l=new Mt,c=new Et,u=new Ui;u.bounds=new Ct(0,0,.5,1),u.layers.enable(1);var h=new Ui;h.bounds=new Ct(.5,0,.5,1),h.layers.enable(2);var d,p,f=new Ni([u,h]);//
function m(){return null!==n&&!0===n.isPresenting}function g(){if(m()){var i=n.getEyeParameters("left"),r=i.renderWidth,o=i.renderHeight;p=e.getPixelRatio(),d=e.getSize(),e.setDrawingBufferSize(2*r,o,1)}else t.enabled&&e.setDrawingBufferSize(d.width,d.height,p)}//
f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e)},this.setPoseTarget=function(e){void 0!==e&&(r=e)},this.getCamera=function(e){if(null===n)return e;n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(i);//
var d=n.stageParameters;d?o.fromArray(d.sittingToStandingTransform):o.makeTranslation(0,t.userHeight,0);var p=i.pose,m=null!==r?r:e;if(// We want to manipulate poseObject by its position and quaternion components since users may rely on them.
m.matrix.copy(o),m.matrix.decompose(m.position,m.quaternion,m.scale),null!==p.orientation&&(l.fromArray(p.orientation),m.quaternion.multiply(l)),null!==p.position&&(l.setFromRotationMatrix(o),c.fromArray(p.position),c.applyQuaternion(l),m.position.add(c)),m.updateMatrixWorld(),!1===n.isPresenting)return e;//
u.near=e.near,h.near=e.near,u.far=e.far,h.far=e.far,f.matrixWorld.copy(e.matrixWorld),f.matrixWorldInverse.copy(e.matrixWorldInverse),u.matrixWorldInverse.fromArray(i.leftViewMatrix),h.matrixWorldInverse.fromArray(i.rightViewMatrix),// TODO (mrdoob) Double check this code
a.getInverse(o),u.matrixWorldInverse.multiply(a),h.matrixWorldInverse.multiply(a);var g=m.parent;null!==g&&(s.getInverse(g.matrixWorld),u.matrixWorldInverse.multiply(s),h.matrixWorldInverse.multiply(s)),// envMap and Mirror needs camera.matrixWorld
u.matrixWorld.getInverse(u.matrixWorldInverse),h.matrixWorld.getInverse(h.matrixWorldInverse),u.projectionMatrix.fromArray(i.leftProjectionMatrix),h.projectionMatrix.fromArray(i.rightProjectionMatrix),// HACK (mrdoob)
// https://github.com/w3c/webvr/issues/203
f.projectionMatrix.copy(u.projectionMatrix);//
var v=n.getLayers();if(v.length){var y=v[0];null!==y.leftBounds&&4===y.leftBounds.length&&u.bounds.fromArray(y.leftBounds),null!==y.rightBounds&&4===y.rightBounds.length&&h.bounds.fromArray(y.rightBounds)}return f},this.getStandingMatrix=function(){return o},this.submitFrame=function(){m()&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",g)}}
/**
 * @author supereggbert / http://www.paulbrunt.co.uk/
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 * @author szimek / https://github.com/szimek/
 * @author tschw
 */function ki(e){console.log("THREE.WebGLRenderer",o);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,c=void 0===e.stencil||e.stencil,u=void 0!==e.antialias&&e.antialias,h=void 0===e.premultipliedAlpha||e.premultipliedAlpha,m=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,g=void 0!==e.powerPreference?e.powerPreference:"default",M=null,E=null;// public properties
this.domElement=t,this.context=null,// clearing
this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,// scene graph
this.sortObjects=!0,// user-defined clipping
this.clippingPlanes=[],this.localClippingEnabled=!1,// physically based shading
this.gammaFactor=2,// for backwards compatibility
this.gammaInput=!1,this.gammaOutput=!1,// physical lights
this.physicallyCorrectLights=!1,// tone mapping
this.toneMapping=J,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,// morphs
this.maxMorphTargets=8,this.maxMorphNormals=4;// internal properties
var T,A,S,C,R,L,P,O,I,B,D,U,N,F,q,Y,Q,Z,K,$=this,ee=!1,// internal state cache
te=null,ne=null,ie=-1,re="",oe=null,ae=null,se=new Ct,le=new Ct,ce=null,//
ue=0,//
he=t.width,de=t.height,pe=1,fe=new Ct(0,0,he,de),me=new Ct(0,0,he,de),ge=!1,// frustum
ye=new Dt,// clipping
xe=new
/**
 * @author tschw
 */
function(){var e=this,t=null,n=0,i=!1,r=!1,o=new Bt,a=new Tt,s={value:null,needsUpdate:!1};function l(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(t,n,i,r){var l=null!==t?t.length:0,c=null;if(0!==l){if(c=s.value,!0!==r||null===c){var u=i+4*l,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===c||c.length<u)&&(c=new Float32Array(u));for(var d=0,p=i;d!==l;++d,p+=4)o.copy(t[d]).applyMatrix4(h,a),o.normal.toArray(c,p),c[p+3]=o.constant}s.value=c,s.needsUpdate=!0}return e.numPlanes=l,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,o){var a=0!==e.length||r||// enable state of previous frame - the clipping code has to
// run another frame in order to reset the state:
0!==n||i;return i=r,t=c(e,o,0),n=e.length,a},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1,l()},this.setState=function(e,o,a,u,h,d){if(!i||null===e||0===e.length||r&&!a)// there's no local clipping
r?// there's no global clipping
c(null):l();else{var p=r?0:n,f=4*p,m=h.clippingState||null;s.value=m,// ensure unique state
m=c(e,u,f,d);for(var g=0;g!==f;++g)m[g]=t[g];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}
/**
 * @author mrdoob / http://mrdoob.com/
 */,be=!1,_e=!1,// camera matrices cache
we=new wt,Te=new Et;function Ae(){return null===te?pe:1}// initialize
try{var Se={alpha:i,depth:r,stencil:c,antialias:u,premultipliedAlpha:h,preserveDrawingBuffer:m,powerPreference:g};// event listeners must be registered before WebGL context is created, see #12753
if(t.addEventListener("webglcontextlost",Oe,!1),t.addEventListener("webglcontextrestored",Ie,!1),null===(T=n||t.getContext("webgl",Se)||t.getContext("experimental-webgl",Se)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");// Some experimental-webgl implementations do not have getShaderPrecisionFormat
void 0===T.getShaderPrecisionFormat&&(T.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}function Ce(){(A=new function(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=i,i}}}
/**
 * @author mrdoob / http://mrdoob.com/
 */(T)).get("WEBGL_depth_texture"),A.get("OES_texture_float"),A.get("OES_texture_float_linear"),A.get("OES_texture_half_float"),A.get("OES_texture_half_float_linear"),A.get("OES_standard_derivatives"),A.get("OES_element_index_uint"),A.get("ANGLE_instanced_arrays"),K=new Di(T,A),S=new
/**
 * @author mrdoob / http://mrdoob.com/
 */
function(e,t,n){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o=void 0!==n.precision?n.precision:"highp",a=r(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);var s=!0===n.logarithmicDepthBuffer,l=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_TEXTURE_SIZE),h=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),d=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),f=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),g=c>0,v=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:s,maxTextures:l,maxVertexTextures:c,maxTextureSize:u,maxCubemapSize:h,maxAttributes:d,maxVertexUniforms:p,maxVaryings:f,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v}}(T,A,e),(C=new function(e,t,n){//
var i=new function(){var t=!1,n=new Ct,i=null,r=new Ct(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,o,a,s){!0===s&&(t*=a,i*=a,o*=a),n.set(t,i,o,a),!1===r.equals(n)&&(e.clearColor(t,i,o,a),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},r=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(t){t?te(e.DEPTH_TEST):ne(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case k:e.depthFunc(e.NEVER);break;case z:e.depthFunc(e.ALWAYS);break;case H:e.depthFunc(e.LESS);break;case V:e.depthFunc(e.LEQUAL);break;case G:e.depthFunc(e.EQUAL);break;case j:e.depthFunc(e.GEQUAL);break;case W:e.depthFunc(e.GREATER);break;case X:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},o=new function(){var t=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(t){t?te(e.STENCIL_TEST):ne(e.STENCIL_TEST)},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,a){i===t&&r===n&&o===a||(e.stencilFunc(t,n,a),i=t,r=n,o=a)},setOp:function(t,n,i){a===t&&s===n&&l===i||(e.stencilOp(t,n,i),a=t,s=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null}}},c=e.getParameter(e.MAX_VERTEX_ATTRIBS),u=new Uint8Array(c),h=new Uint8Array(c),f=new Uint8Array(c),m={},g=null,M=null,E=null,T=null,A=null,S=null,C=null,R=null,L=null,P=!1,O=null,I=null,B=null,D=null,U=null,N=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),F=!1,q=0,Y=e.getParameter(e.VERSION);-1!==Y.indexOf("WebGL")?(q=parseFloat(/^WebGL\ ([0-9])/.exec(Y)[1]),F=q>=1):-1!==Y.indexOf("OpenGL ES")&&(q=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(Y)[1]),F=q>=2);var Q=null,Z={},J=new Ct,K=new Ct;function $(t,n,i){var r=new Uint8Array(4),o=e.createTexture();// 4 is required to match default unpack alignment of 4.
e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<i;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r);return o}var ee={};function te(t){!0!==m[t]&&(e.enable(t),m[t]=!0)}function ne(t){!1!==m[t]&&(e.disable(t),m[t]=!1)}function ie(t,i,r,o,a,s,l,c){if(t!==v?te(e.BLEND):ne(e.BLEND),t!==w){if(t!==E||c!==P)switch(t){case x:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case b:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case _:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:c?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}T=null,A=null,S=null,C=null,R=null,L=null}else a=a||i,s=s||r,l=l||o,i===T&&a===C||(e.blendEquationSeparate(n.convert(i),n.convert(a)),T=i,C=a),r===A&&o===S&&s===R&&l===L||(e.blendFuncSeparate(n.convert(r),n.convert(o),n.convert(s),n.convert(l)),A=r,S=o,R=s,L=l);E=t,P=c}//
function re(t){O!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),O=t)}function oe(t){t!==a?(te(e.CULL_FACE),t!==I&&(t===s?e.cullFace(e.BACK):t===l?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):ne(e.CULL_FACE),I=t}function ae(t,n,i){t?(te(e.POLYGON_OFFSET_FILL),D===n&&U===i||(e.polygonOffset(n,i),D=n,U=i)):ne(e.POLYGON_OFFSET_FILL)}// texture
function se(t){void 0===t&&(t=e.TEXTURE0+N-1),Q!==t&&(e.activeTexture(t),Q=t)}return ee[e.TEXTURE_2D]=$(e.TEXTURE_2D,e.TEXTURE_2D,1),ee[e.TEXTURE_CUBE_MAP]=$(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),// init
i.setClear(0,0,0,1),r.setClear(1),o.setClear(0),te(e.DEPTH_TEST),r.setFunc(V),re(!1),oe(s),te(e.CULL_FACE),te(e.BLEND),ie(y),{buffers:{color:i,depth:r,stencil:o},initAttributes://
function(){for(var e=0,t=u.length;e<t;e++)u[e]=0},enableAttribute:function(n){u[n]=1,0===h[n]&&(e.enableVertexAttribArray(n),h[n]=1),0!==f[n]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),f[n]=0)},enableAttributeAndDivisor:function(n,i){u[n]=1,0===h[n]&&(e.enableVertexAttribArray(n),h[n]=1),f[n]!==i&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,i),f[n]=i)},disableUnusedAttributes:function(){for(var t=0,n=h.length;t!==n;++t)h[t]!==u[t]&&(e.disableVertexAttribArray(t),h[t]=0)},enable:te,disable:ne,getCompressedTextureFormats:function(){if(null===g&&(g=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++)g.push(n[i]);return g},useProgram:function(t){return M!==t&&(e.useProgram(t),M=t,!0)},setBlending:ie,setMaterial:function(t,n){t.side===p?ne(e.CULL_FACE):te(e.CULL_FACE);var o=t.side===d;n&&(o=!o),re(o),!0===t.transparent?ie(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):ie(v),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),i.setMask(t.colorWrite),ae(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:re,setCullFace:oe,setLineWidth:function(t){t!==B&&(F&&e.lineWidth(t),B=t)},setPolygonOffset:ae,setScissorTest:function(t){t?te(e.SCISSOR_TEST):ne(e.SCISSOR_TEST)},activeTexture:se,bindTexture:function(t,n){null===Q&&se();var i=Z[Q];void 0===i&&(i={type:void 0,texture:void 0},Z[Q]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||ee[t]),i.type=t,i.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}//
,scissor:function(t){!1===J.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),J.copy(t))},viewport:function(t){!1===K.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),K.copy(t))}//
,reset:function(){for(var t=0;t<h.length;t++)1===h[t]&&(e.disableVertexAttribArray(t),h[t]=0);m={},g=null,Q=null,Z={},M=null,E=null,O=null,I=null,i.reset(),r.reset(),o.reset()}}}(T,A,K)).scissor(le.copy(me).multiplyScalar(pe)),C.viewport(se.copy(fe).multiplyScalar(pe)),R=new
/**
 * @author Mugen87 / https://github.com/Mugen87
 */
function(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(r=r||1,t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=r*(n-2);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}(T),L=new function(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}},P=new Bi(T,A,C,L,S,K,R),O=new Vt(T),I=new function(e,t,n){var i={},r={};function o(e){var a=e.target,s=i[a.id];for(var l in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[l]);a.removeEventListener("dispose",o),delete i[a.id];// TODO Remove duplicate code
var c=r[a.id];c&&(t.remove(c),delete r[a.id]),(c=r[s.id])&&(t.remove(c),delete r[s.id]),//
n.memory.geometries--}return{get:function(e,t){var r=i[t.id];return r||(t.addEventListener("dispose",o),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new dn).setFromObject(e)),r=t._bufferGeometry),i[t.id]=r,n.memory.geometries++,r)},update:function(n){var i=n.index,r=n.attributes;for(var o in null!==i&&t.update(i,e.ELEMENT_ARRAY_BUFFER),r)t.update(r[o],e.ARRAY_BUFFER);// morph targets
var a=n.morphAttributes;for(var o in a)for(var s=a[o],l=0,c=s.length;l<c;l++)t.update(s[l],e.ARRAY_BUFFER)},getWireframeAttribute:function(n){var i=r[n.id];if(i)return i;var o,a=[],s=n.index,l=n.attributes;// console.time( 'wireframe' );
if(null!==s)for(var c=0,u=(o=s.array).length;c<u;c+=3){var h=o[c+0],d=o[c+1],p=o[c+2];a.push(h,d,d,p,p,h)}else for(c=0,u=(o=l.position.array).length/3-1;c<u;c+=3)h=c+0,d=c+1,p=c+2,a.push(h,d,d,p,p,h);// console.timeEnd( 'wireframe' );
return i=new(un(a)>65535?an:rn)(a,1),t.update(i,e.ELEMENT_ARRAY_BUFFER),r[n.id]=i,i}}}
/**
 * @author mrdoob / http://mrdoob.com/
 */(T,O,R),B=new
/**
 * @author mrdoob / http://mrdoob.com/
 */
function(e,t){var n={};return{update:function(i){var r=t.render.frame,o=i.geometry,a=e.get(i,o);// Update once per frame
return n[a.id]!==r&&(o.isGeometry&&a.updateFromObject(i),e.update(a),n[a.id]=r),a},dispose:function(){n={}}}}(I,R),q=new function(e){var t={},n=new Float32Array(8);return{update:function(i,r,o,a){var s=i.morphTargetInfluences,l=s.length,c=t[r.id];if(void 0===c){// initialise list
c=[];for(var u=0;u<l;u++)c[u]=[u,0];t[r.id]=c}var h=o.morphTargets&&r.morphAttributes.position,d=o.morphNormals&&r.morphAttributes.normal;// Remove current morphAttributes
for(u=0;u<l;u++)0!==(p=c[u])[1]&&(h&&r.removeAttribute("morphTarget"+u),d&&r.removeAttribute("morphNormal"+u));// Collect influences
for(u=0;u<l;u++)(p=c[u])[0]=u,p[1]=s[u];// Add morphAttributes
for(c.sort(Tn),u=0;u<8;u++){var p;if(p=c[u]){var f=p[0],m=p[1];if(m){h&&r.addAttribute("morphTarget"+u,h[f]),d&&r.addAttribute("morphNormal"+u,d[f]),n[u]=m;continue}}n[u]=0}a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}(T),D=new wi($,A,S),U=new Ti,N=new Ci,F=new
/**
 * @author mrdoob / http://mrdoob.com/
 */
function(e,t,n,i){var r,o,a,s=new kt(0),l=0;function c(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,i)}return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),c(s,l=void 0!==t?t:1)},getClearAlpha:function(){return l},setClearAlpha:function(e){c(s,l=e)},render:function(t,i,u,h){var p=i.background;null===p?c(s,l):p&&p.isColor&&(c(p,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&p.isCubeTexture?(void 0===a&&((a=new En(new fn(1,1,1),new bn({uniforms:Ht.cube.uniforms,vertexShader:Ht.cube.vertexShader,fragmentShader:Ht.cube.fragmentShader,side:d,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(a.geometry)),a.material.uniforms.tCube.value=p,t.push(a,a.geometry,a.material,0,null)):p&&p.isTexture&&(void 0===r&&(r=new Yt(-1,1,1,-1,0,1),o=new En(new gn(2,2),new xn({depthTest:!1,depthWrite:!1,fog:!1})),n.update(o.geometry)),o.material.map=p,// TODO Push this to renderList
e.renderBufferDirect(r,null,o.geometry,o.material,o,null))}}}
/**
 * @author mrdoob / http://mrdoob.com/
 */($,C,I,h),Y=new function(e,t,n){var i;//
this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(e,r,o){var a=t.get("ANGLE_instanced_arrays");if(null!==a){var s=e.attributes.position;s.isInterleavedBufferAttribute?(o=s.data.count,a.drawArraysInstancedANGLE(i,0,o,e.maxInstancedCount)):a.drawArraysInstancedANGLE(i,r,o,e.maxInstancedCount),n.update(o,i,e.maxInstancedCount)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}(T,A,R),Q=new function(e,t,n){var i,r,o;//
this.setMode=function(e){i=e},this.setIndex=function(e){r=e.type,o=e.bytesPerElement},this.render=function(t,a){e.drawElements(i,a,r,t*o),n.update(a,i)},this.renderInstances=function(e,a,s){var l=t.get("ANGLE_instanced_arrays");null!==l?(l.drawElementsInstancedANGLE(i,s,r,a*o,e.maxInstancedCount),n.update(s,i,e.maxInstancedCount)):console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}(T,A,R),Z=new Ii($,T,C,P,S),R.programs=D.programs,$.context=T,$.capabilities=S,$.extensions=A,$.properties=L,$.renderLists=U,$.state=C,$.info=R}Ce();// vr
var Re=new Fi($);this.vr=Re;// shadow map
var Le=new Pi($,B,S.maxTextureSize);// Events
function Oe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ee=!0}function Ie(){console.log("THREE.WebGLRenderer: Context Restored."),ee=!1,Ce()}function Be(e){var t=e.target;t.removeEventListener("dispose",Be),// Buffer deallocation
function(e){De(e),L.remove(e)}(t)}function De(e){var t=L.get(e).program;e.program=void 0,void 0!==t&&D.releaseProgram(t)}// Buffer rendering
this.shadowMap=Le,// API
this.getContext=function(){return T},this.getContextAttributes=function(){return T.getContextAttributes()},this.forceContextLoss=function(){var e=A.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=A.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return pe},this.setPixelRatio=function(e){void 0!==e&&(pe=e,this.setSize(he,de,!1))},this.getSize=function(){return{width:he,height:de}},this.setSize=function(e,n,i){var r=Re.getDevice();r&&r.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(he=e,de=n,t.width=e*pe,t.height=n*pe,!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(){return{width:he*pe,height:de*pe}},this.setDrawingBufferSize=function(e,n,i){he=e,de=n,pe=i,t.width=e*i,t.height=n*i,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(){return se},this.setViewport=function(e,t,n,i){fe.set(e,de-t-i,n,i),C.viewport(se.copy(fe).multiplyScalar(pe))},this.setScissor=function(e,t,n,i){me.set(e,de-t-i,n,i),C.scissor(le.copy(me).multiplyScalar(pe))},this.setScissorTest=function(e){C.setScissorTest(ge=e)},// Clearing
this.getClearColor=function(){return F.getClearColor()},this.setClearColor=function(){F.setClearColor.apply(F,arguments)},this.getClearAlpha=function(){return F.getClearAlpha()},this.setClearAlpha=function(){F.setClearAlpha.apply(F,arguments)},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=T.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=T.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=T.STENCIL_BUFFER_BIT),T.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,i){this.setRenderTarget(e),this.clear(t,n,i)},//
this.dispose=function(){t.removeEventListener("webglcontextlost",Oe,!1),t.removeEventListener("webglcontextrestored",Ie,!1),U.dispose(),N.dispose(),L.dispose(),B.dispose(),Re.dispose(),Fe()},this.renderBufferImmediate=function(e,t,n){C.initAttributes();var i=L.get(e);e.hasPositions&&!i.position&&(i.position=T.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=T.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=T.createBuffer()),e.hasColors&&!i.color&&(i.color=T.createBuffer());var r=t.getAttributes();if(e.hasPositions&&(T.bindBuffer(T.ARRAY_BUFFER,i.position),T.bufferData(T.ARRAY_BUFFER,e.positionArray,T.DYNAMIC_DRAW),C.enableAttribute(r.position),T.vertexAttribPointer(r.position,3,T.FLOAT,!1,0,0)),e.hasNormals){if(T.bindBuffer(T.ARRAY_BUFFER,i.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var o=0,a=3*e.count;o<a;o+=9){var s=e.normalArray,l=(s[o+0]+s[o+3]+s[o+6])/3,c=(s[o+1]+s[o+4]+s[o+7])/3,u=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=l,s[o+1]=c,s[o+2]=u,s[o+3]=l,s[o+4]=c,s[o+5]=u,s[o+6]=l,s[o+7]=c,s[o+8]=u}T.bufferData(T.ARRAY_BUFFER,e.normalArray,T.DYNAMIC_DRAW),C.enableAttribute(r.normal),T.vertexAttribPointer(r.normal,3,T.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(T.bindBuffer(T.ARRAY_BUFFER,i.uv),T.bufferData(T.ARRAY_BUFFER,e.uvArray,T.DYNAMIC_DRAW),C.enableAttribute(r.uv),T.vertexAttribPointer(r.uv,2,T.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==f&&(T.bindBuffer(T.ARRAY_BUFFER,i.color),T.bufferData(T.ARRAY_BUFFER,e.colorArray,T.DYNAMIC_DRAW),C.enableAttribute(r.color),T.vertexAttribPointer(r.color,3,T.FLOAT,!1,0,0)),C.disableUnusedAttributes(),T.drawArrays(T.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,o){var a=r.isMesh&&r.matrixWorld.determinant()<0;C.setMaterial(i,a);var s=je(e,t,i,r),l=n.id+"_"+s.id+"_"+(!0===i.wireframe),c=!1;l!==re&&(re=l,c=!0),r.morphTargetInfluences&&(q.update(r,n,i,s),c=!0);//
var u,h=n.index,d=n.attributes.position,p=1;!0===i.wireframe&&(h=I.getWireframeAttribute(n),p=2);var f=Y;null!==h&&(u=O.get(h),(f=Q).setIndex(u)),c&&(!function(e,t,n){if(n&&n.isInstancedBufferGeometry&&null===A.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");C.initAttributes();var i=n.attributes,r=t.getAttributes(),o=e.defaultAttributeValues;for(var a in r){var s=r[a];if(s>=0){var l=i[a];if(void 0!==l){var c=l.normalized,u=l.itemSize,h=O.get(l);// TODO Attribute may not be available on context restore
if(void 0===h)continue;var d=h.buffer,p=h.type,f=h.bytesPerElement;if(l.isInterleavedBufferAttribute){var m=l.data,g=m.stride,v=l.offset;m&&m.isInstancedInterleavedBuffer?(C.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):C.enableAttribute(s),T.bindBuffer(T.ARRAY_BUFFER,d),T.vertexAttribPointer(s,u,p,c,g*f,v*f)}else l.isInstancedBufferAttribute?(C.enableAttributeAndDivisor(s,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):C.enableAttribute(s),T.bindBuffer(T.ARRAY_BUFFER,d),T.vertexAttribPointer(s,u,p,c,0,0)}else if(void 0!==o){var y=o[a];if(void 0!==y)switch(y.length){case 2:T.vertexAttrib2fv(s,y);break;case 3:T.vertexAttrib3fv(s,y);break;case 4:T.vertexAttrib4fv(s,y);break;default:T.vertexAttrib1fv(s,y)}}}}C.disableUnusedAttributes()}// Compile
(i,s,n),null!==h&&T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,u.buffer));//
var m=1/0;null!==h?m=h.count:void 0!==d&&(m=d.count);var g=n.drawRange.start*p,v=n.drawRange.count*p,y=null!==o?o.start*p:0,x=null!==o?o.count*p:1/0,b=Math.max(g,y),_=Math.min(m,g+v,y+x)-1,w=Math.max(0,_-b+1);if(0!==w){//
if(r.isMesh)if(!0===i.wireframe)C.setLineWidth(i.wireframeLinewidth*Ae()),f.setMode(T.LINES);else switch(r.drawMode){case lt:f.setMode(T.TRIANGLES);break;case ct:f.setMode(T.TRIANGLE_STRIP);break;case ut:f.setMode(T.TRIANGLE_FAN)}else if(r.isLine){var M=i.linewidth;void 0===M&&(M=1),// Not using Line*Material
C.setLineWidth(M*Ae()),r.isLineSegments?f.setMode(T.LINES):r.isLineLoop?f.setMode(T.LINE_LOOP):f.setMode(T.LINE_STRIP)}else r.isPoints&&f.setMode(T.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&f.renderInstances(n,b,w):f.render(b,w)}},this.compile=function(e,t){(E=N.get(e,t)).init(),e.traverse(function(e){e.isLight&&(E.pushLight(e),e.castShadow&&E.pushShadow(e))}),E.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)Ge(t.material[n],e.fog,t);else Ge(t.material,e.fog,t)})};// Animation Loop
var Ue=!1,Ne=null;function Fe(){Ue=!1}function ke(){var e=Re.getDevice();e&&e.isPresenting?e.requestAnimationFrame(ze):window.requestAnimationFrame(ze)}function ze(e){!1!==Ue&&(Ne(e),ke())}function He(e,t,n,i){for(var r=0,o=e.length;r<o;r++){var a=e[r],s=a.object,l=a.geometry,c=void 0===i?a.material:i,u=a.group;if(n.isArrayCamera){ae=n;for(var h=n.cameras,d=0,p=h.length;d<p;d++){var f=h[d];if(s.layers.test(f.layers)){var m=f.bounds,g=m.x*he,v=m.y*de,y=m.z*he,x=m.w*de;C.viewport(se.set(g,v,y,x).multiplyScalar(pe)),Ve(s,t,f,l,c,u)}}}else ae=null,Ve(s,t,n,l,c,u)}}function Ve(e,t,n,i,r,o){if(e.onBeforeRender($,t,n,i,r,o),E=N.get(t,ae||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var a=e.isMesh&&e.matrixWorld.determinant()<0;C.setMaterial(r,a);var s=je(n,t.fog,r,e);re="",function(e,t,n){e.render(function(e){$.renderBufferImmediate(e,t,n)})}(e,s,r)}else $.renderBufferDirect(n,t.fog,i,r,e,o);e.onAfterRender($,t,n,i,r,o),E=N.get(t,ae||n)}function Ge(e,t,n){var i=L.get(e),r=E.state.lights,o=E.state.shadowsArray,a=D.getParameters(e,r.state,o,t,xe.numPlanes,xe.numIntersection,n),s=D.getProgramCode(e,a),l=i.program,c=!0;if(void 0===l)// new material
e.addEventListener("dispose",Be);else if(l.code!==s)// changed glsl or parameters
De(e);else if(i.lightsHash!==r.state.hash)L.update(e,"lightsHash",r.state.hash),c=!1;else{if(void 0!==a.shaderID)// same glsl and uniform list
return;// only rebuild uniform list
c=!1}if(c){if(a.shaderID){var u=Ht[a.shaderID];i.shader={name:e.type,uniforms:Nt.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else i.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(i.shader,$),l=D.acquireProgram(e,i.shader,a,s),i.program=l,e.program=l}var h=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<$.maxMorphTargets;d++)h["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(d=0;d<$.maxMorphNormals;d++)h["morphNormal"+d]>=0&&e.numSupportedMorphNormals++}var p=i.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=xe.numPlanes,i.numIntersection=xe.numIntersection,p.clippingPlanes=xe.uniform),i.fog=t,// store the light setup it was created for
i.lightsHash=r.state.hash,e.lights&&(// wire up the material to this renderer's lighting state
p.ambientLightColor.value=r.state.ambient,p.directionalLights.value=r.state.directional,p.spotLights.value=r.state.spot,p.rectAreaLights.value=r.state.rectArea,p.pointLights.value=r.state.point,p.hemisphereLights.value=r.state.hemi,p.directionalShadowMap.value=r.state.directionalShadowMap,p.directionalShadowMatrix.value=r.state.directionalShadowMatrix,p.spotShadowMap.value=r.state.spotShadowMap,p.spotShadowMatrix.value=r.state.spotShadowMatrix,p.pointShadowMap.value=r.state.pointShadowMap,p.pointShadowMatrix.value=r.state.pointShadowMatrix);var f=i.program.getUniforms(),m=hi.seqWithValue(f.seq,p);i.uniformsList=m}function je(e,t,n,i){ue=0;var r=L.get(n),o=E.state.lights;if(be&&(_e||e!==oe)){var a=e===oe&&n.id===ie;// we might want to call this function with some ClippingGroup
// object instead of the material, once it becomes feasible
// (#8465, #8379)
xe.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,r,a)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==t?n.needsUpdate=!0:n.lights&&r.lightsHash!==o.state.hash?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===xe.numPlanes&&r.numIntersection===xe.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(Ge(n,t,i),n.needsUpdate=!1);var s=!1,l=!1,c=!1,u=r.program,h=u.getUniforms(),d=r.shader.uniforms;if(C.useProgram(u.program)&&(s=!0,l=!0,c=!0),n.id!==ie&&(ie=n.id,l=!0),s||e!==oe){// load material specific uniforms
// (shader material also gets them for the sake of genericity)
if(h.setValue(T,"projectionMatrix",e.projectionMatrix),S.logarithmicDepthBuffer&&h.setValue(T,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),// Avoid unneeded uniform updates per ArrayCamera's sub-camera
oe!==(ae||e)&&(oe=ae||e,// lighting uniforms depend on the camera so enforce an update
// now, in case this material supports lights - or later, when
// the next material that does gets activated:
l=!0,// set to true on material change
c=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var p=h.map.cameraPosition;void 0!==p&&p.setValue(T,Te.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&h.setValue(T,"viewMatrix",e.matrixWorldInverse)}// skinning uniforms must be set even if material didn't change
// auto-setting of texture unit for bone texture must go before other textures
// not sure why, but otherwise weird things happen
if(n.skinning){h.setOptional(T,i,"bindMatrix"),h.setOptional(T,i,"bindMatrixInverse");var f=i.skeleton;if(f){var m=f.bones;if(S.floatVertexTextures){if(void 0===f.boneTexture){// layout (1 matrix = 4 pixels)
//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)
//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)
//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)
//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)
//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)
var g=Math.sqrt(4*m.length);// 4 pixels needed for 1 matrix
g=bt.ceilPowerOfTwo(g),g=Math.max(g,4);var v=new Float32Array(g*g*4);// 4 floats per RGBA pixel
v.set(f.boneMatrices);// copy current values
var y=new Pt(v,g,g,Pe,Me);y.needsUpdate=!0,f.boneMatrices=v,f.boneTexture=y,f.boneTextureSize=g}h.setValue(T,"boneTexture",f.boneTexture),h.setValue(T,"boneTextureSize",f.boneTextureSize)}else h.setOptional(T,f,"boneMatrices")}}return l&&(h.setValue(T,"toneMappingExposure",$.toneMappingExposure),h.setValue(T,"toneMappingWhitePoint",$.toneMappingWhitePoint),n.lights&&// the current material requires lighting info
// note: all lighting uniforms are always set correctly
// they simply reference the renderer's state for their
// values
//
// use the current material's .needsUpdate flags to set
// the GL state when required
// If uniforms are marked as clean, they don't need to be loaded to the GPU.
function(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}// Textures
(d,c),// refresh uniforms common to several materials
t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(d,t),n.isMeshBasicMaterial?We(d,n):n.isMeshLambertMaterial?(We(d,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(d,n)):n.isMeshPhongMaterial?(We(d,n),n.isMeshToonMaterial?function(e,t){Xe(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(d,n):Xe(d,n)):n.isMeshStandardMaterial?(We(d,n),n.isMeshPhysicalMaterial?function(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,qe(e,t)}(d,n):qe(d,n)):n.isMeshDepthMaterial?(We(d,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(d,n)):n.isMeshDistanceMaterial?(We(d,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(d,n)):n.isMeshNormalMaterial?(We(d,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale);t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(d,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(d,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(d,n)):n.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*pe,e.scale.value=.5*de,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(d,n):n.isShadowMaterial&&(d.color.value=n.color,d.opacity.value=n.opacity),// RectAreaLight Texture
// TODO (mrdoob): Find a nicer implementation
void 0!==d.ltc_1&&(d.ltc_1.value=zt.LTC_1),void 0!==d.ltc_2&&(d.ltc_2.value=zt.LTC_2),hi.upload(T,r.uniformsList,d,$)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(hi.upload(T,r.uniformsList,d,$),n.uniformsNeedUpdate=!1),// common matrices
h.setValue(T,"modelViewMatrix",i.modelViewMatrix),h.setValue(T,"normalMatrix",i.normalMatrix),h.setValue(T,"modelMatrix",i.matrixWorld),u}// Uniforms (refresh uniforms objects)
function We(e,t){// uv repeat and offset setting priorities
// 1. color map
// 2. specular map
// 3. normal map
// 4. bump map
// 5. alpha map
// 6. emissive map
var n;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,// don't flip CubeTexture envMaps, flip everything else:
//  WebGLRenderTargetCube will be flipped for backwards compatibility
//  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture
// this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future
e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=L.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(// backwards compatibility
n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function Xe(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),// to prevent pow( 0.0, 0.0 )
t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function qe(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(//uniforms.envMap.value = material.envMap; // part of uniforms common
e.envMapIntensity.value=t.envMapIntensity)}this.animate=function(e){null!==(Ne=e)?Ue||(ke(),Ue=!0):Fe()},// Rendering
this.render=function(e,t,n,i){if(t&&t.isCamera){if(!ee){// reset caching for this frame
re="",ie=-1,oe=null,// update scene graph
!0===e.autoUpdate&&e.updateMatrixWorld(),// update camera matrices and frustum
null===t.parent&&t.updateMatrixWorld(),Re.enabled&&(t=Re.getCamera(t)),(//
E=N.get(e,t)).init(),e.onBeforeRender($,e,t,n),we.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ye.setFromMatrix(we),_e=this.localClippingEnabled,be=xe.init(this.clippingPlanes,_e,t),(M=U.get(e,t)).init(),
/*
	// TODO Duplicated code (Frustum)

	var _sphere = new Sphere();

	function isObjectViewable( object ) {

		var geometry = object.geometry;

		if ( geometry.boundingSphere === null )
			geometry.computeBoundingSphere();

		_sphere.copy( geometry.boundingSphere ).
		applyMatrix4( object.matrixWorld );

		return isSphereViewable( _sphere );

	}

	function isSpriteViewable( sprite ) {

		_sphere.center.set( 0, 0, 0 );
		_sphere.radius = 0.7071067811865476;
		_sphere.applyMatrix4( sprite.matrixWorld );

		return isSphereViewable( _sphere );

	}

	function isSphereViewable( sphere ) {

		if ( ! _frustum.intersectsSphere( sphere ) ) return false;

		var numPlanes = _clipping.numPlanes;

		if ( numPlanes === 0 ) return true;

		var planes = _this.clippingPlanes,

			center = sphere.center,
			negRad = - sphere.radius,
			i = 0;

		do {

			// out when deeper than radius in the negative halfspace
			if ( planes[ i ].distanceToPoint( center ) < negRad ) return false;

		} while ( ++ i !== numPlanes );

		return true;

	}
	*/
function e(t,n,i){if(!1===t.visible)return;var r=t.layers.test(n.layers);if(r)if(t.isLight)E.pushLight(t),t.castShadow&&E.pushShadow(t);else if(t.isSprite)t.frustumCulled&&!ye.intersectsSprite(t)||E.pushSprite(t);else if(t.isImmediateRenderObject)i&&Te.setFromMatrixPosition(t.matrixWorld).applyMatrix4(we),M.push(t,null,t.material,Te.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||ye.intersectsObject(t))){i&&Te.setFromMatrixPosition(t.matrixWorld).applyMatrix4(we);var o=B.update(t),a=t.material;if(Array.isArray(a))for(var s=o.groups,l=0,c=s.length;l<c;l++){var u=s[l],h=a[u.materialIndex];h&&h.visible&&M.push(t,o,h,Te.z,u)}else a.visible&&M.push(t,o,a,Te.z,null)}var d=t.children;for(var l=0,c=d.length;l<c;l++)e(d[l],n,i)}(e,t,$.sortObjects),!0===$.sortObjects&&M.sort(),//
be&&xe.beginShadows();var r=E.state.shadowsArray;Le.render(r,e,t),E.setupLights(t),be&&xe.endShadows(),//
this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),//
F.render(M,e,t,i);// render scene
var o=M.opaque,a=M.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&He(o,e,t,s),a.length&&He(a,e,t,s)}else// opaque pass (front-to-back order)
o.length&&He(o,e,t),// transparent pass (back-to-front order)
a.length&&He(a,e,t);// custom renderers
var l=E.state.spritesArray;Z.render(l,e,t),// Generate mipmap if we're using any kind of mipmap filtering
n&&P.updateRenderTargetMipmap(n),// Ensure depth buffer writing is enabled so it can be cleared on next render
C.buffers.depth.setTest(!0),C.buffers.depth.setMask(!0),C.buffers.color.setMask(!0),C.setPolygonOffset(!1),e.onAfterRender($,e,t),Re.enabled&&Re.submitFrame(),// _gl.finish();
M=null,E=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=ue;return e>=S.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+S.maxTextures),ue+=1,e},// this.setTexture2D = setTexture2D;
this.setTexture2D=function(){var e=!1;// backwards compatibility: peel texture.texture
return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),P.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),P.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){// backwards compatibility: peel texture.texture
t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),// currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture
// TODO: unify these code paths
t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?// CompressedTexture can have Array in image :/
// this function alone should take care of cube textures
P.setTextureCube(t,n):// assumed: texture property of THREE.WebGLRenderTargetCube
P.setTextureCubeDynamic(t,n)}}(),this.getRenderTarget=function(){return te},this.setRenderTarget=function(e){te=e,e&&void 0===L.get(e).__webglFramebuffer&&P.setupRenderTarget(e);var t=null,n=!1;if(e){var i=L.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=i[e.activeCubeFace],n=!0):t=i,se.copy(e.viewport),le.copy(e.scissor),ce=e.scissorTest}else se.copy(fe).multiplyScalar(pe),le.copy(me).multiplyScalar(pe),ce=ge;if(ne!==t&&(T.bindFramebuffer(T.FRAMEBUFFER,t),ne=t),C.viewport(se),C.scissor(le),C.setScissorTest(ce),n){var r=L.get(e.texture);T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,r.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,i,r,o){if(e&&e.isWebGLRenderTarget){var a=L.get(e).__webglFramebuffer;if(a){var s=!1;a!==ne&&(T.bindFramebuffer(T.FRAMEBUFFER,a),s=!0);try{var l=e.texture,c=l.format,u=l.type;if(c!==Pe&&K.convert(c)!==T.getParameter(T.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===ve||K.convert(u)===T.getParameter(T.IMPLEMENTATION_COLOR_READ_TYPE)||u===Me&&(A.get("OES_texture_float")||A.get("WEBGL_color_buffer_float"))||u===Ee&&A.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");T.checkFramebufferStatus(T.FRAMEBUFFER)===T.FRAMEBUFFER_COMPLETE?// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)
t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&T.readPixels(t,n,i,r,K.convert(c),K.convert(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&T.bindFramebuffer(T.FRAMEBUFFER,ne)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var i=t.image.width,r=t.image.height,o=K.convert(t.format);this.setTexture2D(t,0),T.copyTexImage2D(T.TEXTURE_2D,n||0,o,e.x,e.y,i,r,0)},this.copyTextureToTexture=function(e,t,n,i){var r=t.image.width,o=t.image.height,a=K.convert(n.format),s=K.convert(n.type),l=t.isDataTexture?t.image.data:t.image;this.setTexture2D(n,0),T.texSubImage2D(T.TEXTURE_2D,i||0,e.x,e.y,r,o,a,s,l)}}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 */function zi(e,t){this.name="",this.color=new kt(e),this.density=void 0!==t?t:25e-5}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 */
function Hi(e,t,n){this.name="",this.color=new kt(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Vi(){Xt.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}
/**
 * @author alteredq / http://alteredqualia.com/
 *
 * parameters = {
 *  color: <hex>,
 *  opacity: <float>,
 *  map: new THREE.Texture( <Image> ),
 *
 *	uvOffset: new THREE.Vector2(),
 *	uvScale: new THREE.Vector2()
 * }
 */
function Gi(e){yn.call(this),this.type="SpriteMaterial",this.color=new kt(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}
/**
 * @author mikael emtinger / http://gomo.se/
 * @author alteredq / http://alteredqualia.com/
 */
function ji(e){Xt.call(this),this.type="Sprite",this.material=void 0!==e?e:new Gi,this.center=new _t(.5,.5)}
/**
 * @author mikael emtinger / http://gomo.se/
 * @author alteredq / http://alteredqualia.com/
 * @author mrdoob / http://mrdoob.com/
 */
function Wi(){Xt.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}
/**
 * @author mikael emtinger / http://gomo.se/
 * @author alteredq / http://alteredqualia.com/
 * @author michael guerrero / http://realitymeltdown.com
 * @author ikerr / http://verold.com
 */
function Xi(e,t){// use the supplied bone inverses or calculate the inverses
if(// copy the bone array
e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new wt)}}
/**
 * @author mikael emtinger / http://gomo.se/
 * @author alteredq / http://alteredqualia.com/
 * @author ikerr / http://verold.com
 */
function qi(){Xt.call(this),this.type="Bone"}
/**
 * @author mikael emtinger / http://gomo.se/
 * @author alteredq / http://alteredqualia.com/
 * @author ikerr / http://verold.com
 */
function Yi(e,t){En.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new wt,this.bindMatrixInverse=new wt;var n=new Xi(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 *
 * parameters = {
 *  color: <hex>,
 *  opacity: <float>,
 *
 *  linewidth: <float>,
 *  linecap: "round",
 *  linejoin: "round"
 * }
 */
function Qi(e){yn.call(this),this.type="LineBasicMaterial",this.color=new kt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Zi(e,t,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Ji(e,t);Xt.call(this),this.type="Line",this.geometry=void 0!==e?e:new dn,this.material=void 0!==t?t:new Qi({color:16777215*Math.random()})}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Ji(e,t){Zi.call(this,e,t),this.type="LineSegments"}
/**
 * @author mgreter / http://github.com/mgreter
 */
function Ki(e,t){Zi.call(this,e,t),this.type="LineLoop"}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 *
 * parameters = {
 *  color: <hex>,
 *  opacity: <float>,
 *  map: new THREE.Texture( <Image> ),
 *
 *  size: <float>,
 *  sizeAttenuation: <bool>
 * }
 */
function $i(e){yn.call(this),this.type="PointsMaterial",this.color=new kt(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}
/**
 * @author alteredq / http://alteredqualia.com/
 */
function er(e,t){Xt.call(this),this.type="Points",this.geometry=void 0!==e?e:new dn,this.material=void 0!==t?t:new $i({color:16777215*Math.random()})}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function tr(){Xt.call(this),this.type="Group"}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function nr(e,t,n,i,r,o,a,s,l){St.call(this,e,t,n,i,r,o,a,s,l),this.generateMipmaps=!1}
/**
 * @author alteredq / http://alteredqualia.com/
 */
function ir(e,t,n,i,r,o,a,s,l,c,u,h){St.call(this,null,o,a,s,l,c,i,r,u,h),this.image={width:t,height:n},this.mipmaps=e,// no flipping for cube textures
// (also flipping doesn't work for compressed textures )
this.flipY=!1,// can't generate mipmaps for compressed textures
// mips must be embedded in DDS files
this.generateMipmaps=!1}
/**
 * @author Matt DesLauriers / @mattdesl
 * @author atix / arthursilber.de
 */
function rr(e,t,n,i,r,o,a,s,l,c){if((c=void 0!==c?c:De)!==De&&c!==Ue)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===De&&(n=be),void 0===n&&c===Ue&&(n=Ce),St.call(this,null,i,r,o,a,s,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:he,this.minFilter=void 0!==s?s:he,this.flipY=!1,this.generateMipmaps=!1}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author Mugen87 / https://github.com/Mugen87
 */
function or(e){dn.call(this),this.type="WireframeGeometry";// buffer
var t,n,i,r,o,a,s,l,c,u,h=[],d=[0,0],p={},f=["a","b","c"];// helper variables
// different logic for Geometry and BufferGeometry
if(e&&e.isGeometry){// create a data structure that contains all edges without duplicates
var m=e.faces;for(t=0,i=m.length;t<i;t++){var g=m[t];for(n=0;n<3;n++)s=g[f[n]],l=g[f[(n+1)%3]],d[0]=Math.min(s,l),// sorting prevents duplicates
d[1]=Math.max(s,l),void 0===p[c=d[0]+","+d[1]]&&(p[c]={index1:d[0],index2:d[1]})}// generate vertices
for(c in p)a=p[c],u=e.vertices[a.index1],h.push(u.x,u.y,u.z),u=e.vertices[a.index2],h.push(u.x,u.y,u.z)}else if(e&&e.isBufferGeometry){var v,y,x,b,_,w,M;if(u=new Et,null!==e.index){// create a data structure that contains all eges without duplicates
for(// indexed BufferGeometry
v=e.attributes.position,y=e.index,0===(x=e.groups).length&&(x=[{start:0,count:y.count,materialIndex:0}]),r=0,o=x.length;r<o;++r)for(t=_=(b=x[r]).start,i=_+b.count;t<i;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),l=y.getX(t+(n+1)%3),d[0]=Math.min(s,l),// sorting prevents duplicates
d[1]=Math.max(s,l),void 0===p[c=d[0]+","+d[1]]&&(p[c]={index1:d[0],index2:d[1]});// generate vertices
for(c in p)a=p[c],u.fromBufferAttribute(v,a.index1),h.push(u.x,u.y,u.z),u.fromBufferAttribute(v,a.index2),h.push(u.x,u.y,u.z)}else for(// non-indexed BufferGeometry
t=0,i=(v=e.attributes.position).count/3;t<i;t++)for(n=0;n<3;n++)// three edges per triangle, an edge is represented as (index1, index2)
// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)
w=3*t+n,u.fromBufferAttribute(v,w),h.push(u.x,u.y,u.z),M=3*t+(n+1)%3,u.fromBufferAttribute(v,M),h.push(u.x,u.y,u.z)}// build geometry
this.addAttribute("position",new sn(h,3))}
/**
 * @author zz85 / https://github.com/zz85
 * @author Mugen87 / https://github.com/Mugen87
 *
 * Parametric Surfaces Geometry
 * based on the brilliant article by @prideout http://prideout.net/blog/?p=44
 */
// ParametricGeometry
function ar(e,t,n){Jt.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new sr(e,t,n)),this.mergeVertices()}// ParametricBufferGeometry
function sr(e,t,n){dn.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};// buffers
var i,r,o=[],a=[],s=[],l=[],c=new Et,u=new Et,h=new Et,d=new Et,p=new Et,f=t+1;for(i=0;i<=n;i++){var m=i/n;for(r=0;r<=t;r++){var g=r/t;// vertex
e(g,m,u),a.push(u.x,u.y,u.z),// normal
// approximate tangent vectors via finite differences
g-1e-5>=0?(e(g-1e-5,m,h),d.subVectors(u,h)):(e(g+1e-5,m,h),d.subVectors(h,u)),m-1e-5>=0?(e(g,m-1e-5,h),p.subVectors(u,h)):(e(g,m+1e-5,h),p.subVectors(h,u)),// cross product of tangent vectors returns surface normal
c.crossVectors(d,p).normalize(),s.push(c.x,c.y,c.z),// uv
l.push(g,m)}}// generate indices
for(i=0;i<n;i++)for(r=0;r<t;r++){var v=i*f+r,y=i*f+r+1,x=(i+1)*f+r+1,b=(i+1)*f+r;// faces one and two
o.push(v,y,b),o.push(y,x,b)}// build geometry
this.setIndex(o),this.addAttribute("position",new sn(a,3)),this.addAttribute("normal",new sn(s,3)),this.addAttribute("uv",new sn(l,2))}
/**
 * @author clockworkgeek / https://github.com/clockworkgeek
 * @author timothypratley / https://github.com/timothypratley
 * @author WestLangley / http://github.com/WestLangley
 * @author Mugen87 / https://github.com/Mugen87
 */
// PolyhedronGeometry
function lr(e,t,n,i){Jt.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new cr(e,t,n,i)),this.mergeVertices()}// PolyhedronBufferGeometry
function cr(e,t,n,i){dn.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1;// default buffer data
var r=[],o=[];function a(e,t,n,i){var r,o,a=Math.pow(2,i),l=[];// we use this multidimensional array as a data structure for creating the subdivision
// construct all of the vertices for this subdivision
for(r=0;r<=a;r++){l[r]=[];var c=e.clone().lerp(n,r/a),u=t.clone().lerp(n,r/a),h=a-r;for(o=0;o<=h;o++)l[r][o]=0===o&&r===a?c:c.clone().lerp(u,o/h)}// construct all of the faces
for(r=0;r<a;r++)for(o=0;o<2*(a-r)-1;o++){var d=Math.floor(o/2);o%2==0?(s(l[r][d+1]),s(l[r+1][d]),s(l[r][d])):(s(l[r][d+1]),s(l[r+1][d+1]),s(l[r+1][d]))}}function s(e){r.push(e.x,e.y,e.z)}function l(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(e,t,n,i){i<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=i/2/Math.PI+.5)}// Angle around the Y axis, counter-clockwise when looking from above.
function u(e){return Math.atan2(e.z,-e.x)}// Angle above the XZ plane.
function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}// the subdivision creates the vertex buffer data
!// helper functions
function(e){// iterate over all faces and apply a subdivison with the given detail value
for(var n=new Et,i=new Et,r=new Et,o=0;o<t.length;o+=3)// get the vertices of the face
l(t[o+0],n),l(t[o+1],i),l(t[o+2],r),// perform subdivision
a(n,i,r,e)}(i=i||0),// all vertices should lie on a conceptual sphere with a given radius
function(e){// iterate over the entire buffer and apply the radius to each vertex
for(var t=new Et,n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),// finally, create the uv data
function(){for(var e=new Et,t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];var n=u(e)/2/Math.PI+.5,i=h(e)/Math.PI+.5;o.push(n,1-i)}(function(){for(var e=new Et,t=new Et,n=new Et,i=new Et,a=new _t,s=new _t,l=new _t,h=0,d=0;h<r.length;h+=9,d+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),l.set(o[d+4],o[d+5]),i.copy(e).add(t).add(n).divideScalar(3);var p=u(i);c(a,d+0,e,p),c(s,d+2,t,p),c(l,d+4,n,p)}})(),function(){// handle case when face straddles the seam, see #3269
for(var e=0;e<o.length;e+=6){// uv data of a single face
var t=o[e+0],n=o[e+2],i=o[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);// 0.9 is somewhat arbitrary
r>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),i<.2&&(o[e+4]+=1))}}()}(),// build non-indexed geometry
this.addAttribute("position",new sn(r,3)),this.addAttribute("normal",new sn(r.slice(),3)),this.addAttribute("uv",new sn(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}
/**
 * @author timothypratley / https://github.com/timothypratley
 * @author Mugen87 / https://github.com/Mugen87
 */
// TetrahedronGeometry
function ur(e,t){Jt.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new hr(e,t)),this.mergeVertices()}// TetrahedronBufferGeometry
function hr(e,t){cr.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}
/**
 * @author timothypratley / https://github.com/timothypratley
 * @author Mugen87 / https://github.com/Mugen87
 */
// OctahedronGeometry
function dr(e,t){Jt.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new pr(e,t)),this.mergeVertices()}// OctahedronBufferGeometry
function pr(e,t){cr.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}
/**
 * @author timothypratley / https://github.com/timothypratley
 * @author Mugen87 / https://github.com/Mugen87
 */
// IcosahedronGeometry
function fr(e,t){Jt.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new mr(e,t)),this.mergeVertices()}// IcosahedronBufferGeometry
function mr(e,t){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];cr.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}
/**
 * @author Abe Pazos / https://hamoid.com
 * @author Mugen87 / https://github.com/Mugen87
 */
// DodecahedronGeometry
function gr(e,t){Jt.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new vr(e,t)),this.mergeVertices()}// DodecahedronBufferGeometry
function vr(e,t){var n=(1+Math.sqrt(5))/2,i=1/n,r=[// (±1, ±1, ±1)
-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,// (0, ±1/φ, ±φ)
0,-i,-n,0,-i,n,0,i,-n,0,i,n,// (±1/φ, ±φ, 0)
-i,-n,0,-i,n,0,i,-n,0,i,n,0,// (±φ, 0, ±1/φ)
-n,0,-i,n,0,-i,-n,0,i,n,0,i];cr.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}
/**
 * @author oosmoxiecode / https://github.com/oosmoxiecode
 * @author WestLangley / https://github.com/WestLangley
 * @author zz85 / https://github.com/zz85
 * @author miningold / https://github.com/miningold
 * @author jonobr1 / https://github.com/jonobr1
 * @author Mugen87 / https://github.com/Mugen87
 *
 */
// TubeGeometry
function yr(e,t,n,i,r,o){Jt.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new xr(e,t,n,i,r);// expose internals
this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,// create geometry
this.fromBufferGeometry(a),this.mergeVertices()}// TubeBufferGeometry
function xr(e,t,n,i,r){dn.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},t=t||64,n=n||1,i=i||8,r=r||!1;var o=e.computeFrenetFrames(t,r);// expose internals
this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;// helper variables
var a,s,l=new Et,c=new Et,u=new _t,h=new Et,d=[],p=[],f=[],m=[];function g(r){// we use getPointAt to sample evenly distributed points from the given path
h=e.getPointAt(r/t,h);// retrieve corresponding normal and binormal
var a=o.normals[r],u=o.binormals[r];// generate normals and vertices for the current segment
for(s=0;s<=i;s++){var f=s/i*Math.PI*2,m=Math.sin(f),g=-Math.cos(f);// normal
c.x=g*a.x+m*u.x,c.y=g*a.y+m*u.y,c.z=g*a.z+m*u.z,c.normalize(),p.push(c.x,c.y,c.z),// vertex
l.x=h.x+n*c.x,l.y=h.y+n*c.y,l.z=h.z+n*c.z,d.push(l.x,l.y,l.z)}}// create buffer data
!// functions
function(){for(a=0;a<t;a++)g(a);// if the geometry is not closed, generate the last row of vertices and normals
// at the regular position on the given path
//
// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)
g(!1===r?t:0),// uvs are generated in a separate function.
// this makes it easy compute correct values for closed geometries
function(){for(a=0;a<=t;a++)for(s=0;s<=i;s++)u.x=a/t,u.y=s/i,f.push(u.x,u.y)}(),// finally create faces
function(){for(s=1;s<=t;s++)for(a=1;a<=i;a++){var e=(i+1)*(s-1)+(a-1),n=(i+1)*s+(a-1),r=(i+1)*s+a,o=(i+1)*(s-1)+a;// faces
m.push(e,n,o),m.push(n,r,o)}}()}(),// build geometry
this.setIndex(m),this.addAttribute("position",new sn(d,3)),this.addAttribute("normal",new sn(p,3)),this.addAttribute("uv",new sn(f,2))}
/**
 * @author oosmoxiecode
 * @author Mugen87 / https://github.com/Mugen87
 *
 * based on http://www.blackpawn.com/texts/pqtorus/
 */
// TorusKnotGeometry
function br(e,t,n,i,r,o,a){Jt.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new _r(e,t,n,i,r,o)),this.mergeVertices()}// TorusKnotBufferGeometry
function _r(e,t,n,i,r,o){dn.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,o=o||3;// buffers
var a,s,l=[],c=[],u=[],h=[],d=new Et,p=new Et,f=new Et,m=new Et,g=new Et,v=new Et,y=new Et;// generate vertices, normals and uvs
for(a=0;a<=n;++a){// the radian "u" is used to calculate the position on the torus curve of the current tubular segement
var x=a/n*r*Math.PI*2;// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.
// these points are used to create a special "coordinate space", which is necessary to calculate the correct vertex positions
for(S(x,r,o,e,f),S(x+.01,r,o,e,m),// calculate orthonormal basis
v.subVectors(m,f),y.addVectors(m,f),g.crossVectors(v,y),y.crossVectors(g,v),// normalize B, N. T can be ignored, we don't use it
g.normalize(),y.normalize(),s=0;s<=i;++s){// now calculate the vertices. they are nothing more than an extrusion of the torus curve.
// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.
var b=s/i*Math.PI*2,_=-t*Math.cos(b),w=t*Math.sin(b);// now calculate the final vertex position.
// first we orient the extrusion with our basis vectos, then we add it to the current position on the curve
d.x=f.x+(_*y.x+w*g.x),d.y=f.y+(_*y.y+w*g.y),d.z=f.z+(_*y.z+w*g.z),c.push(d.x,d.y,d.z),// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)
p.subVectors(d,f).normalize(),u.push(p.x,p.y,p.z),// uv
h.push(a/n),h.push(s/i)}}// generate indices
for(s=1;s<=n;s++)for(a=1;a<=i;a++){// indices
var M=(i+1)*(s-1)+(a-1),E=(i+1)*s+(a-1),T=(i+1)*s+a,A=(i+1)*(s-1)+a;// faces
l.push(M,E,A),l.push(E,T,A)}// build geometry
// this function calculates the current position on the torus curve
function S(e,t,n,i,r){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(s)*.5}this.setIndex(l),this.addAttribute("position",new sn(c,3)),this.addAttribute("normal",new sn(u,3)),this.addAttribute("uv",new sn(h,2))}
/**
 * @author oosmoxiecode
 * @author mrdoob / http://mrdoob.com/
 * @author Mugen87 / https://github.com/Mugen87
 */
// TorusGeometry
function wr(e,t,n,i,r){Jt.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Mr(e,t,n,i,r)),this.mergeVertices()}// TorusBufferGeometry
function Mr(e,t,n,i,r){dn.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;// buffers
var o,a,s=[],l=[],c=[],u=[],h=new Et,d=new Et,p=new Et;// generate vertices, normals and uvs
for(o=0;o<=n;o++)for(a=0;a<=i;a++){var f=a/i*r,m=o/n*Math.PI*2;// vertex
d.x=(e+t*Math.cos(m))*Math.cos(f),d.y=(e+t*Math.cos(m))*Math.sin(f),d.z=t*Math.sin(m),l.push(d.x,d.y,d.z),// normal
h.x=e*Math.cos(f),h.y=e*Math.sin(f),p.subVectors(d,h).normalize(),c.push(p.x,p.y,p.z),// uv
u.push(a/i),u.push(o/n)}// generate indices
for(o=1;o<=n;o++)for(a=1;a<=i;a++){// indices
var g=(i+1)*o+a-1,v=(i+1)*(o-1)+a-1,y=(i+1)*(o-1)+a,x=(i+1)*o+a;// faces
s.push(g,v,x),s.push(v,y,x)}// build geometry
this.setIndex(s),this.addAttribute("position",new sn(l,3)),this.addAttribute("normal",new sn(c,3)),this.addAttribute("uv",new sn(u,2))}Ri.prototype=Object.create(yn.prototype),Ri.prototype.constructor=Ri,Ri.prototype.isMeshDepthMaterial=!0,Ri.prototype.copy=function(e){return yn.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Li.prototype=Object.create(yn.prototype),Li.prototype.constructor=Li,Li.prototype.isMeshDistanceMaterial=!0,Li.prototype.copy=function(e){return yn.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Oi.prototype=Object.create(St.prototype),Oi.prototype.constructor=Oi,Ui.prototype=Object.assign(Object.create(qt.prototype),{constructor:Ui,isPerspectiveCamera:!0,copy:function(e,t){return qt.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},
/**
	 * Sets the FOV by focal length in respect to the current .filmGauge.
	 *
	 * The default film gauge is 35, so that the focal length can be specified for
	 * a 35mm (full frame) camera.
	 *
	 * Values for focal length and film gauge must have the same unit.
	 */
setFocalLength:function(e){// see http://www.bobatkins.com/photography/technical/field_of_view.html
var t=.5*this.getFilmHeight()/e;this.fov=2*bt.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},
/**
	 * Calculates the focal length from the current .fov and .filmGauge.
	 */
getFocalLength:function(){var e=Math.tan(.5*bt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*bt.RAD2DEG*Math.atan(Math.tan(.5*bt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){// film not completely covered in portrait format (aspect < 1)
return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){// film not completely covered in landscape format (aspect > 1)
return this.filmGauge/Math.max(this.aspect,1)},
/**
	 * Sets an offset in a larger frustum. This is useful for multi-window or
	 * multi-monitor/multi-machine setups.
	 *
	 * For example, if you have 3x2 monitors and each monitor is 1920x1080 and
	 * the monitors are in grid like this
	 *
	 *   +---+---+---+
	 *   | A | B | C |
	 *   +---+---+---+
	 *   | D | E | F |
	 *   +---+---+---+
	 *
	 * then for each monitor you would call it like this
	 *
	 *   var w = 1920;
	 *   var h = 1080;
	 *   var fullWidth = w * 3;
	 *   var fullHeight = h * 2;
	 *
	 *   --A--
	 *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );
	 *   --B--
	 *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );
	 *   --C--
	 *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );
	 *   --D--
	 *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );
	 *   --E--
	 *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );
	 *   --F--
	 *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );
	 *
	 *   Note there is no reason monitors have to be the same size or in a grid.
	 */
setViewOffset:function(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*bt.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;r+=o.offsetX*i/a,t-=o.offsetY*n/s,i*=o.width/a,n*=o.height/s}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far)},toJSON:function(e){var t=Xt.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Ni.prototype=Object.assign(Object.create(Ui.prototype),{constructor:Ni,isArrayCamera:!0}),zi.prototype.isFogExp2=!0,zi.prototype.clone=function(){return new zi(this.color.getHex(),this.density)},zi.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Hi.prototype.isFog=!0,Hi.prototype.clone=function(){return new Hi(this.color.getHex(),this.near,this.far)},Hi.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Vi.prototype=Object.assign(Object.create(Xt.prototype),{constructor:Vi,copy:function(e,t){return Xt.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Xt.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Gi.prototype=Object.create(yn.prototype),Gi.prototype.constructor=Gi,Gi.prototype.isSpriteMaterial=!0,Gi.prototype.copy=function(e){return yn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},ji.prototype=Object.assign(Object.create(Xt.prototype),{constructor:ji,isSprite:!0,raycast:function(){var e=new Et,t=new Et,n=new Et;return function(i,r){t.setFromMatrixPosition(this.matrixWorld),i.ray.closestPointToPoint(t,e),n.setFromMatrixScale(this.matrixWorld);var o=n.x*n.y/4;if(!(t.distanceToSquared(e)>o)){var a=i.ray.origin.distanceTo(e);a<i.near||a>i.far||r.push({distance:a,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return Xt.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Wi.prototype=Object.assign(Object.create(Xt.prototype),{constructor:Wi,copy:function(e){Xt.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);n.splice(i,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new Et;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(e);this.getObjectForDistance(i).raycast(t,n)}}(),update:function(){var e=new Et,t=new Et;return function(n){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);i[0].object.visible=!0;for(var o=1,a=i.length;o<a&&r>=i[o].distance;o++)i[o-1].object.visible=!1,i[o].object.visible=!0;for(;o<a;o++)i[o].object.visible=!1}}}(),toJSON:function(e){var t=Xt.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var o=n[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(Xi.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new wt;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;// recover the bind-time world matrices
for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);// compute the local matrices, positions, rotations and scales
for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new wt,t=new wt;return function(){// flatten bone matrices to array
for(var n=this.bones,i=this.boneInverses,r=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++){// compute the offset between the current and the original transform
var l=n[a]?n[a].matrixWorld:t;e.multiplyMatrices(l,i[a]),e.toArray(r,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new Xi(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}}),qi.prototype=Object.assign(Object.create(Xt.prototype),{constructor:qi,isBone:!0}),Yi.prototype=Object.assign(Object.create(En.prototype),{constructor:Yi,isSkinnedMesh:!0,initBones:function(){var e,t,n,i,r=[];if(this.geometry&&void 0!==this.geometry.bones){// first, create array of 'Bone' objects from geometry data
for(n=0,i=this.geometry.bones.length;n<i;n++)t=this.geometry.bones[n],// create new 'Bone' object
e=new qi,r.push(e),// apply values
e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);// second, create bone hierarchy
for(n=0,i=this.geometry.bones.length;n<i;n++)-1!==(t=this.geometry.bones[n]).parent&&null!==t.parent&&void 0!==r[t.parent]?// subsequent bones in the hierarchy
r[t.parent].add(r[n]):// topmost bone, immediate child of the skinned mesh
this.add(r[n])}// now the bones are part of the scene graph and children of the skinned mesh.
// let's update the corresponding matrices
return this.updateMatrixWorld(!0),r},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];(e=1/n.manhattanLength())!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new Ct,r=this.geometry.attributes.skinWeight;for(t=0;t<r.count;t++)i.x=r.getX(t),i.y=r.getY(t),i.z=r.getZ(t),i.w=r.getW(t),(e=1/i.manhattanLength())!==1/0?i.multiplyScalar(e):i.set(1,0,0,0),r.setXYZW(t,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(e){En.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Qi.prototype=Object.create(yn.prototype),Qi.prototype.constructor=Qi,Qi.prototype.isLineBasicMaterial=!0,Qi.prototype.copy=function(e){return yn.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Zi.prototype=Object.assign(Object.create(Xt.prototype),{constructor:Zi,isLine:!0,computeLineDistances:function(){var e=new Et,t=new Et;return function(){var n=this.geometry;if(n.isBufferGeometry)// we assume non-indexed geometry
if(null===n.index){for(var i=n.attributes.position,r=[0],o=1,a=i.count;o<a;o++)e.fromBufferAttribute(i,o-1),t.fromBufferAttribute(i,o),r[o]=r[o-1],r[o]+=e.distanceTo(t);n.addAttribute("lineDistance",new sn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;(r=n.lineDistances)[0]=0;for(o=1,a=s.length;o<a;o++)r[o]=r[o-1],r[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var e=new wt,t=new _n,n=new It;return function(i,r){var o=i.linePrecision,a=o*o,s=this.geometry,l=this.matrixWorld;if(// Checking boundingSphere distance to ray
null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(l),!1!==i.ray.intersectsSphere(n)){//
e.getInverse(l),t.copy(i.ray).applyMatrix4(e);var c=new Et,u=new Et,h=new Et,d=new Et,p=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var f=s.index,m=s.attributes.position.array;if(null!==f)for(var g=f.array,v=0,y=g.length-1;v<y;v+=p){var x=g[v],b=g[v+1];if(c.fromArray(m,3*x),u.fromArray(m,3*b),!(t.distanceSqToSegment(c,u,d,h)>a))d.applyMatrix4(this.matrixWorld),(M=i.ray.origin.distanceTo(d))<i.near||M>i.far||r.push({distance:M,// What do we want? intersection point on the ray or on the segment??
// point: raycaster.ray.at( distance ),
point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}else for(v=0,y=m.length/3-1;v<y;v+=p){if(c.fromArray(m,3*v),u.fromArray(m,3*v+3),!(t.distanceSqToSegment(c,u,d,h)>a))d.applyMatrix4(this.matrixWorld),(M=i.ray.origin.distanceTo(d))<i.near||M>i.far||r.push({distance:M,// What do we want? intersection point on the ray or on the segment??
// point: raycaster.ray.at( distance ),
point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else if(s.isGeometry){var _=s.vertices,w=_.length;for(v=0;v<w-1;v+=p){var M;if(!(t.distanceSqToSegment(_[v],_[v+1],d,h)>a))d.applyMatrix4(this.matrixWorld),(M=i.ray.origin.distanceTo(d))<i.near||M>i.far||r.push({distance:M,// What do we want? intersection point on the ray or on the segment??
// point: raycaster.ray.at( distance ),
point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ji.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Ji,isLineSegments:!0,computeLineDistances:function(){var e=new Et,t=new Et;return function(){var n=this.geometry;if(n.isBufferGeometry)// we assume non-indexed geometry
if(null===n.index){for(var i=n.attributes.position,r=[],o=0,a=i.count;o<a;o+=2)e.fromBufferAttribute(i,o),t.fromBufferAttribute(i,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+e.distanceTo(t);n.addAttribute("lineDistance",new sn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(r=n.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+e.distanceTo(t)}return this}}()}),Ki.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Ki,isLineLoop:!0}),$i.prototype=Object.create(yn.prototype),$i.prototype.constructor=$i,$i.prototype.isPointsMaterial=!0,$i.prototype.copy=function(e){return yn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},er.prototype=Object.assign(Object.create(Xt.prototype),{constructor:er,isPoints:!0,raycast:function(){var e=new wt,t=new _n,n=new It;return function(i,r){var o=this,a=this.geometry,s=this.matrixWorld,l=i.params.Points.threshold;if(// Checking boundingSphere distance to ray
null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=l,!1!==i.ray.intersectsSphere(n)){//
e.getInverse(s),t.copy(i.ray).applyMatrix4(e);var c=l/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,h=new Et,d=new Et;if(a.isBufferGeometry){var p=a.index,f=a.attributes.position.array;if(null!==p)for(var m=p.array,g=0,v=m.length;g<v;g++){var y=m[g];h.fromArray(f,3*y),_(h,y)}else{g=0;for(var x=f.length/3;g<x;g++)h.fromArray(f,3*g),_(h,g)}}else{var b=a.vertices;for(g=0,x=b.length;g<x;g++)_(b[g],g)}}function _(e,n){var a=t.distanceSqToPoint(e);if(a<u){t.closestPointToPoint(e,d),d.applyMatrix4(s);var l=i.ray.origin.distanceTo(d);if(l<i.near||l>i.far)return;r.push({distance:l,distanceToRay:Math.sqrt(a),point:d.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),tr.prototype=Object.assign(Object.create(Xt.prototype),{constructor:tr,isGroup:!0}),nr.prototype=Object.assign(Object.create(St.prototype),{constructor:nr,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),ir.prototype=Object.create(St.prototype),ir.prototype.constructor=ir,ir.prototype.isCompressedTexture=!0,rr.prototype=Object.create(St.prototype),rr.prototype.constructor=rr,rr.prototype.isDepthTexture=!0,or.prototype=Object.create(dn.prototype),or.prototype.constructor=or,ar.prototype=Object.create(Jt.prototype),ar.prototype.constructor=ar,sr.prototype=Object.create(dn.prototype),sr.prototype.constructor=sr,lr.prototype=Object.create(Jt.prototype),lr.prototype.constructor=lr,cr.prototype=Object.create(dn.prototype),cr.prototype.constructor=cr,ur.prototype=Object.create(Jt.prototype),ur.prototype.constructor=ur,hr.prototype=Object.create(cr.prototype),hr.prototype.constructor=hr,dr.prototype=Object.create(Jt.prototype),dr.prototype.constructor=dr,pr.prototype=Object.create(cr.prototype),pr.prototype.constructor=pr,fr.prototype=Object.create(Jt.prototype),fr.prototype.constructor=fr,mr.prototype=Object.create(cr.prototype),mr.prototype.constructor=mr,gr.prototype=Object.create(Jt.prototype),gr.prototype.constructor=gr,vr.prototype=Object.create(cr.prototype),vr.prototype.constructor=vr,yr.prototype=Object.create(Jt.prototype),yr.prototype.constructor=yr,xr.prototype=Object.create(dn.prototype),xr.prototype.constructor=xr,br.prototype=Object.create(Jt.prototype),br.prototype.constructor=br,_r.prototype=Object.create(dn.prototype),_r.prototype.constructor=_r,wr.prototype=Object.create(Jt.prototype),wr.prototype.constructor=wr,Mr.prototype=Object.create(dn.prototype),Mr.prototype.constructor=Mr;
/**
 * @author Mugen87 / https://github.com/Mugen87
 * Port from https://github.com/mapbox/earcut (v2.1.2)
 */
var Er=function(e,t,n){n=n||2;var i,r,o,a,s,l,c,u=t&&t.length,h=u?t[0]*n:e.length,d=Tr(e,0,h,n,!0),p=[];if(!d)return p;// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox
if(u&&(d=// link every hole into the outer loop, producing a single-ring polygon without holes
function(e,t,n,i){var r,o,a,s,l,c=[];for(r=0,o=t.length;r<o;r++)a=t[r]*i,s=r<o-1?t[r+1]*i:e.length,(l=Tr(e,a,s,i,!1))===l.next&&(l.steiner=!0),c.push(Dr(l));// process holes from left to right
for(c.sort(Or),r=0;r<c.length;r++)Ir(c[r],n),n=Ar(n,n.next);return n}(e,t,d,n)),e.length>80*n){i=o=e[0],r=a=e[1];for(var f=n;f<h;f+=n)s=e[f],l=e[f+1],s<i&&(i=s),l<r&&(r=l),s>o&&(o=s),l>a&&(a=l);// minX, minY and invSize are later used to transform coords into integers for z-order calculation
c=0!==(c=Math.max(o-i,a-r))?1/c:0}return Sr(d,p,n,i,r,c),p};// create a circular doubly linked list from polygon points in the specified winding order
function Tr(e,t,n,i,r){var o,a;if(r===function(e,t,n,i){for(var r=0,o=t,a=n-i;o<n;o+=i)r+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return r}
/**
 * @author zz85 / http://www.lab4games.net/zz85/blog
 */(e,t,n,i)>0)for(o=t;o<n;o+=i)a=Gr(o,e[o],e[o+1],a);else for(o=n-i;o>=t;o-=i)a=Gr(o,e[o],e[o+1],a);return a&&kr(a,a.next)&&(jr(a),a=a.next),a}// eliminate colinear or duplicate points
function Ar(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!kr(i,i.next)&&0!==Fr(i.prev,i,i.next))i=i.next;else{if(jr(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}// main ear slicing loop which triangulates a polygon (given as a linked list)
function Sr(e,t,n,i,r,o,a){if(e){// interlink polygon nodes in z-order
!a&&o&&// interlink polygon nodes in z-order
function(e,t,n,i){var r=e;do{null===r.z&&(r.z=Br(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,// Simon Tatham's linked list merge sort algorithm
// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html
function(e){var t,n,i,r,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,i=n,s=0,t=0;t<c&&(s++,i=i.nextZ);t++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1)}// z-order of a point given coords and inverse of the longer side of data bbox
(r)}(e,i,r,o);// iterate through ears, slicing them one by one
for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Rr(e,i,r,o):Cr(e))// cut off the triangle
t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),jr(e),// skipping the next vertice leads to less sliver triangles
e=l.next,c=l.next;else// if we looped through the whole remaining polygon and can't find any more ears
if((e=l)===c){// try filtering points and slicing again
a?1===a?Sr(e=Lr(e,t,n),t,n,i,r,o,2):2===a&&Pr(e,t,n,i,r,o):Sr(Ar(e),t,n,i,r,o,1);break}}}// check whether a polygon node forms a valid ear with adjacent nodes
function Cr(e){var t=e.prev,n=e,i=e.next;if(Fr(t,n,i)>=0)return!1;// reflex, can't be an ear
// now make sure we don't have other points inside the potential ear
for(var r=e.next.next;r!==e.prev;){if(Ur(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Fr(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Rr(e,t,n,i){var r=e.prev,o=e,a=e.next;if(Fr(r,o,a)>=0)return!1;// reflex, can't be an ear
// triangle bbox; min & max are calculated like this for speed
for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=Br(s,l,t,n,i),d=Br(c,u,t,n,i),p=e.nextZ// z-order range for the current triangle bbox;
;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&Ur(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Fr(p.prev,p,p.next)>=0)return!1;p=p.nextZ}// then look for points in decreasing z-order
for(p=e.prevZ;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&Ur(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Fr(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}// go through all polygon nodes and cure small local self-intersections
function Lr(e,t,n){var i=e;do{var r=i.prev,o=i.next.next;!kr(r,o)&&zr(r,i,i.next,o)&&Hr(r,o)&&Hr(o,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(o.i/n),// remove two nodes involved
jr(i),jr(i.next),i=e=o),i=i.next}while(i!==e);return i}// try splitting polygon into two and triangulate them independently
function Pr(e,t,n,i,r,o){// look for a valid diagonal that divides the polygon into two
var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Nr(a,s)){// split the polygon in two by the diagonal
var l=Vr(a,s);// filter colinear points around the cuts
return a=Ar(a,a.next),l=Ar(l,l.next),// run earcut on each half
Sr(a,t,n,i,r,o),void Sr(l,t,n,i,r,o)}s=s.next}a=a.next}while(a!==e)}function Or(e,t){return e.x-t.x}// find a bridge between vertices that connects hole with an outer ring and and link it
function Ir(e,t){if(t=// David Eberly's algorithm for finding a bridge between hole and outer polygon
function(e,t){var n,i=t,r=e.x,o=e.y,a=-1/0;// find a segment intersected by a ray from the hole's leftmost point to the left;
// segment's endpoint with lesser x will be potential connection point
do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===a)return n.prev;// hole touches outer segment; pick lower endpoint
// look for points inside the triangle of hole point, segment intersection and endpoint;
// if there are no points found, we have a valid connection;
// otherwise choose the point of the minimum angle with the ray as connection point
var l,c=n,u=n.x,h=n.y,d=1/0;i=n.next;for(;i!==c;)r>=i.x&&i.x>=u&&r!==i.x&&Ur(o<h?r:a,o,u,h,o<h?a:r,o,i.x,i.y)&&((l=Math.abs(o-i.y)/(r-i.x))<d||l===d&&i.x>n.x)&&Hr(i,e)&&(n=i,d=l),i=i.next;return n}(e,t)){var n=Vr(t,e);Ar(n,n.next)}}function Br(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((// coords are transformed into non-negative 15-bit integer range
e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}// find the leftmost node of a polygon ring
function Dr(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}// check if a point lies within a convex triangle
function Ur(e,t,n,i,r,o,a,s){return(r-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(i-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}// check if a diagonal between two polygon nodes is valid (lies in polygon interior)
function Nr(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!// check if a polygon diagonal intersects any polygon segments
function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&zr(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}// check if a polygon diagonal is locally inside the polygon
(e,t)&&Hr(e,t)&&Hr(t,e)&&// check if the middle point of a polygon diagonal is inside the polygon
function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;
// if one belongs to the outer ring and another to a hole, it merges it into a single ring
(e,t)}// signed area of a triangle
function Fr(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}// check if two points are equal
function kr(e,t){return e.x===t.x&&e.y===t.y}// check if two segments intersect
function zr(e,t,n,i){return!!(kr(e,t)&&kr(n,i)||kr(e,i)&&kr(n,t))||Fr(e,t,n)>0!=Fr(e,t,i)>0&&Fr(n,i,e)>0!=Fr(n,i,t)>0}function Hr(e,t){return Fr(e.prev,e,e.next)<0?Fr(e,t,e.next)>=0&&Fr(e,e.prev,t)>=0:Fr(e,t,e.prev)<0||Fr(e,e.next,t)<0}function Vr(e,t){var n=new Wr(e.i,e.x,e.y),i=new Wr(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}// create a node and optionally link it with previous one (in a circular doubly linked list)
function Gr(e,t,n,i){var r=new Wr(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function jr(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Wr(e,t,n){// vertice index in coordinates array
this.i=e,// vertex coordinates
this.x=t,this.y=n,// previous and next vertice nodes in a polygon ring
this.prev=null,this.next=null,// z-order curve value
this.z=null,// previous and next nodes in z-order
this.prevZ=null,this.nextZ=null,// indicates whether this is a steiner point
this.steiner=!1}var Xr={// calculate area of the contour polygon
area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return Xr.area(e)<0},triangulateShape:function(e,t){var n=[],i=[],r=[];// flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]
// final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]
qr(e),Yr(n,e);//
var o=e.length;t.forEach(qr);for(var a=0;a<t.length;a++)i.push(o),o+=t[a].length,Yr(n,t[a]);//
var s=Er(n,i);//
for(a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}};function qr(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Yr(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}
/**
 * @author zz85 / http://www.lab4games.net/zz85/blog
 *
 * Creates extruded geometry from a path shape.
 *
 * parameters = {
 *
 *  curveSegments: <int>, // number of points on the curves
 *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too
 *  amount: <int>, // Depth to extrude the shape
 *
 *  bevelEnabled: <bool>, // turn on bevel
 *  bevelThickness: <float>, // how deep into the original shape bevel goes
 *  bevelSize: <float>, // how far from shape outline is bevel
 *  bevelSegments: <int>, // number of bevel layers
 *
 *  extrudePath: <THREE.Curve> // curve to extrude shape along
 *
 *  UVGenerator: <Object> // object that provides UV generator functions
 *
 * }
 */
// ExtrudeGeometry
function Qr(e,t){Jt.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Zr(e,t)),this.mergeVertices()}// ExtrudeBufferGeometry
function Zr(e,t){dn.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t};for(var n=this,i=[],r=[],o=0,a=(e=Array.isArray(e)?e:[e]).length;o<a;o++){s(e[o])}// build geometry
// functions
function s(e){var o,a,s,l,c,u,h,d,p=[],f=void 0!==t.curveSegments?t.curveSegments:12,m=void 0!==t.steps?t.steps:1,g=void 0!==t.amount?t.amount:100,v=void 0===t.bevelEnabled||t.bevelEnabled,y=void 0!==t.bevelThickness?t.bevelThickness:6,x=void 0!==t.bevelSize?t.bevelSize:y-2,b=void 0!==t.bevelSegments?t.bevelSegments:3,_=t.extrudePath,w=void 0!==t.UVGenerator?t.UVGenerator:Jr,M=!1;// options
_&&(o=_.getSpacedPoints(m),M=!0,v=!1,// bevels not supported for path extrusion
// SETUP TNB variables
// TODO1 - have a .isClosed in spline?
a=_.computeFrenetFrames(m,!1),// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);
s=new Et,l=new Et,c=new Et),// Safeguards if bevels are not enabled
v||(b=0,y=0,x=0);// looping of holes
var E=e.extractPoints(f),T=E.shape,A=E.holes;if(!Xr.isClockWise(T))// Maybe we should also check if holes are in the opposite direction, just to be safe ...
for(T=T.reverse(),h=0,d=A.length;h<d;h++)u=A[h],Xr.isClockWise(u)&&(A[h]=u.reverse());var S=Xr.triangulateShape(T,A),C=T;/* Vertices */ // vertices has all points but contour has only points of circumference
for(h=0,d=A.length;h<d;h++)u=A[h],T=T.concat(u);function R(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var L,P,O,I,B,D,U=T.length,N=S.length;// Find directions for point movement
function F(e,t,n){// computes for inPt the corresponding point inPt' on a new contour
//   shifted by 1 unit (length of normalized vector) to the left
// if we walk along contour clockwise, this new contour is outside the old one
//
// inPt' is the intersection of the two lines parallel to the two
//  adjacent edges of inPt at a distance of 1 unit on the left side.
var i,r,o,a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+s*s,h=a*c-s*l;// resulting translation vector for inPt
// good reading for geometry algorithms (here: line-line intersection)
// http://geomalgorithms.com/a05-_intersect-1.html
if(Math.abs(h)>Number.EPSILON){// not collinear
// length of vectors for normalizing
var d=Math.sqrt(u),p=Math.sqrt(l*l+c*c),f=t.x-s/d,m=t.y+a/d,g=((n.x-c/p-f)*c-(n.y+l/p-m)*l)/(a*c-s*l),v=(// vector from inPt to intersection point
i=f+a*g-e.x)*i+(r=m+s*g-e.y)*r;if(v<=2)return new _t(i,r);o=Math.sqrt(v/2)}else{// handle special case of collinear edges
var y=!1;// assumes: opposite
a>Number.EPSILON?l>Number.EPSILON&&(y=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(c)&&(y=!0),y?(// console.log("Warning: lines are a straight sequence");
i=-s,r=a,o=Math.sqrt(u)):(// console.log("Warning: lines are a straight spike");
i=a,r=s,o=Math.sqrt(u/2))}return new _t(i/o,r/o)}for(var k=[],z=0,H=C.length,V=H-1,G=z+1;z<H;z++,V++,G++)V===H&&(V=0),G===H&&(G=0),//  (j)---(i)---(k)
// console.log('i,j,k', i, j , k)
k[z]=F(C[z],C[V],C[G]);var j,W,X=[],q=k.concat();for(h=0,d=A.length;h<d;h++){for(u=A[h],j=[],z=0,V=(H=u.length)-1,G=z+1;z<H;z++,V++,G++)V===H&&(V=0),G===H&&(G=0),//  (j)---(i)---(k)
j[z]=F(u[z],u[V],u[G]);X.push(j),q=q.concat(j)}// Loop bevelSegments, 1 for the front, 1 for the back
for(L=0;L<b;L++){// contract shape
for(//for ( b = bevelSegments; b > 0; b -- ) {
O=L/b,I=y*Math.cos(O*Math.PI/2),P=x*Math.sin(O*Math.PI/2),z=0,H=C.length;z<H;z++)Q((B=R(C[z],k[z],P)).x,B.y,-I);// expand holes
for(h=0,d=A.length;h<d;h++)for(u=A[h],j=X[h],z=0,H=u.length;z<H;z++)Q((B=R(u[z],j[z],P)).x,B.y,-I)}// Back facing vertices
for(P=x,z=0;z<U;z++)B=v?R(T[z],q[z],P):T[z],M?(// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );
l.copy(a.normals[0]).multiplyScalar(B.x),s.copy(a.binormals[0]).multiplyScalar(B.y),c.copy(o[0]).add(l).add(s),Q(c.x,c.y,c.z)):Q(B.x,B.y,0);// Add stepped vertices...
// Including front facing vertices
for(W=1;W<=m;W++)for(z=0;z<U;z++)B=v?R(T[z],q[z],P):T[z],M?(// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );
l.copy(a.normals[W]).multiplyScalar(B.x),s.copy(a.binormals[W]).multiplyScalar(B.y),c.copy(o[W]).add(l).add(s),Q(c.x,c.y,c.z)):Q(B.x,B.y,g/m*W);// Add bevel segments planes
//for ( b = 1; b <= bevelSegments; b ++ ) {
for(L=b-1;L>=0;L--){// contract shape
for(O=L/b,I=y*Math.cos(O*Math.PI/2),P=x*Math.sin(O*Math.PI/2),z=0,H=C.length;z<H;z++)Q((B=R(C[z],k[z],P)).x,B.y,g+I);// expand holes
for(h=0,d=A.length;h<d;h++)for(u=A[h],j=X[h],z=0,H=u.length;z<H;z++)B=R(u[z],j[z],P),M?Q(B.x,B.y+o[m-1].y,o[m-1].x+I):Q(B.x,B.y,g+I)}/* Faces */ // Top and bottom faces
function Y(e,t){var n,i;for(z=e.length;--z>=0;){n=z,(i=z-1)<0&&(i=e.length-1);//console.log('b', i,j, i-1, k,vertices.length);
var r=0,o=m+2*b;for(r=0;r<o;r++){var a=U*r,s=U*(r+1);J(t+n+a,t+i+a,t+i+s,t+n+s)}}}function Q(e,t,n){p.push(e),p.push(t),p.push(n)}function Z(e,t,r){K(e),K(t),K(r);var o=i.length/3,a=w.generateTopUV(n,i,o-3,o-2,o-1);$(a[0]),$(a[1]),$(a[2])}function J(e,t,r,o){K(e),K(t),K(o),K(t),K(r),K(o);var a=i.length/3,s=w.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);$(s[0]),$(s[1]),$(s[3]),$(s[1]),$(s[2]),$(s[3])}function K(e){i.push(p[3*e+0]),i.push(p[3*e+1]),i.push(p[3*e+2])}function $(e){r.push(e.x),r.push(e.y)}!/////  Internal functions
function(){var e=i.length/3;if(v){var t=0,r=U*t;// steps + 1
// Bottom faces
for(z=0;z<N;z++)Z((D=S[z])[2]+r,D[1]+r,D[0]+r);// Top faces
for(r=U*(t=m+2*b),z=0;z<N;z++)Z((D=S[z])[0]+r,D[1]+r,D[2]+r)}else{// Bottom faces
for(z=0;z<N;z++)Z((D=S[z])[2],D[1],D[0]);// Top faces
for(z=0;z<N;z++)Z((D=S[z])[0]+U*m,D[1]+U*m,D[2]+U*m)}n.addGroup(e,i.length/3-e,0)}// Create faces for the z-sides of the shape
(),// Sides faces
function(){var e=i.length/3,t=0;for(Y(C,t),t+=C.length,h=0,d=A.length;h<d;h++)Y(u=A[h],t),//, true
t+=u.length;n.addGroup(e,i.length/3-e,1)}()}this.addAttribute("position",new sn(i,3)),this.addAttribute("uv",new sn(r,2)),this.computeVertexNormals()}Qr.prototype=Object.create(Jt.prototype),Qr.prototype.constructor=Qr,Zr.prototype=Object.create(dn.prototype),Zr.prototype.constructor=Zr;var Jr={generateTopUV:function(e,t,n,i,r){var o=t[3*n],a=t[3*n+1],s=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new _t(o,a),new _t(s,l),new _t(c,u)]},generateSideWallUV:function(e,t,n,i,r,o){var a=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],h=t[3*i+2],d=t[3*r],p=t[3*r+1],f=t[3*r+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-u)<.01?[new _t(a,1-l),new _t(c,1-h),new _t(d,1-f),new _t(m,1-v)]:[new _t(s,1-l),new _t(u,1-h),new _t(p,1-f),new _t(g,1-v)]}};
/**
 * @author zz85 / http://www.lab4games.net/zz85/blog
 * @author alteredq / http://alteredqualia.com/
 *
 * Text = 3D Text
 *
 * parameters = {
 *  font: <THREE.Font>, // font
 *
 *  size: <float>, // size of the text
 *  height: <float>, // thickness to extrude text
 *  curveSegments: <int>, // number of points on the curves
 *
 *  bevelEnabled: <bool>, // turn on bevel
 *  bevelThickness: <float>, // how deep into text bevel goes
 *  bevelSize: <float> // how far from text outline is bevel
 * }
 */
// TextGeometry
function Kr(e,t){Jt.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new $r(e,t)),this.mergeVertices()}// TextBufferGeometry
function $r(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Jt;var i=n.generateShapes(e,t.size,t.curveSegments);// translate parameters to ExtrudeGeometry API
t.amount=void 0!==t.height?t.height:50,// defaults
void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Zr.call(this,i,t),this.type="TextBufferGeometry"}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author benaadams / https://twitter.com/ben_a_adams
 * @author Mugen87 / https://github.com/Mugen87
 */
// SphereGeometry
function eo(e,t,n,i,r,o,a){Jt.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new to(e,t,n,i,r,o,a)),this.mergeVertices()}// SphereBufferGeometry
function to(e,t,n,i,r,o,a){dn.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var s,l,c=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),u=0,h=[],d=new Et,p=new Et,f=[],m=[],g=[],v=[];// generate vertices, normals and uvs
for(l=0;l<=n;l++){var y=[],x=l/n;for(s=0;s<=t;s++){var b=s/t;// vertex
d.x=-e*Math.cos(i+b*r)*Math.sin(o+x*a),d.y=e*Math.cos(o+x*a),d.z=e*Math.sin(i+b*r)*Math.sin(o+x*a),m.push(d.x,d.y,d.z),// normal
p.set(d.x,d.y,d.z).normalize(),g.push(p.x,p.y,p.z),// uv
v.push(b,1-x),y.push(u++)}h.push(y)}// indices
for(l=0;l<n;l++)for(s=0;s<t;s++){var _=h[l][s+1],w=h[l][s],M=h[l+1][s],E=h[l+1][s+1];(0!==l||o>0)&&f.push(_,w,E),(l!==n-1||c<Math.PI)&&f.push(w,M,E)}// build geometry
this.setIndex(f),this.addAttribute("position",new sn(m,3)),this.addAttribute("normal",new sn(g,3)),this.addAttribute("uv",new sn(v,2))}
/**
 * @author Kaleb Murphy
 * @author Mugen87 / https://github.com/Mugen87
 */
// RingGeometry
function no(e,t,n,i,r,o){Jt.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new io(e,t,n,i,r,o)),this.mergeVertices()}// RingBufferGeometry
function io(e,t,n,i,r,o){dn.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},e=e||.5,t=t||1,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;// buffers
var a,s,l,c=[],u=[],h=[],d=[],p=e,f=(t-e)/(i=void 0!==i?Math.max(1,i):1),m=new Et,g=new _t;// generate vertices, normals and uvs
for(s=0;s<=i;s++){for(l=0;l<=n;l++)// values are generate from the inside of the ring to the outside
a=r+l/n*o,// vertex
m.x=p*Math.cos(a),m.y=p*Math.sin(a),u.push(m.x,m.y,m.z),// normal
h.push(0,0,1),// uv
g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,d.push(g.x,g.y);// increase the radius for next row of vertices
p+=f}// indices
for(s=0;s<i;s++){var v=s*(n+1);for(l=0;l<n;l++){var y=a=l+v,x=a+n+1,b=a+n+2,_=a+1;// faces
c.push(y,x,_),c.push(x,b,_)}}// build geometry
this.setIndex(c),this.addAttribute("position",new sn(u,3)),this.addAttribute("normal",new sn(h,3)),this.addAttribute("uv",new sn(d,2))}
/**
 * @author astrodud / http://astrodud.isgreat.org/
 * @author zz85 / https://github.com/zz85
 * @author bhouston / http://clara.io
 * @author Mugen87 / https://github.com/Mugen87
 */
// LatheGeometry
function ro(e,t,n,i){Jt.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new oo(e,t,n,i)),this.mergeVertices()}// LatheBufferGeometry
function oo(e,t,n,i){dn.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,// clamp phiLength so it's in range of [ 0, 2PI ]
i=bt.clamp(i,0,2*Math.PI);// buffers
var r,o,a,s=[],l=[],c=[],u=1/t,h=new Et,d=new _t;// generate vertices and uvs
for(o=0;o<=t;o++){var p=n+o*u*i,f=Math.sin(p),m=Math.cos(p);for(a=0;a<=e.length-1;a++)// vertex
h.x=e[a].x*f,h.y=e[a].y,h.z=e[a].x*m,l.push(h.x,h.y,h.z),// uv
d.x=o/t,d.y=a/(e.length-1),c.push(d.x,d.y)}// indices
for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var g=r=a+o*e.length,v=r+e.length,y=r+e.length+1,x=r+1;// faces
s.push(g,v,x),s.push(v,y,x)}// build geometry
// if the geometry is closed, we need to average the normals along the seam.
// because the corresponding vertices are identical (but still have different UVs).
if(this.setIndex(s),this.addAttribute("position",new sn(l,3)),this.addAttribute("uv",new sn(c,2)),// generate normals
this.computeVertexNormals(),i===2*Math.PI){var b=this.attributes.normal.array,_=new Et,w=new Et,M=new Et;for(// this is the buffer offset for the last line of vertices
r=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)// select the normal of the vertex in the first line
_.x=b[a+0],_.y=b[a+1],_.z=b[a+2],// select the normal of the vertex in the last line
w.x=b[r+a+0],w.y=b[r+a+1],w.z=b[r+a+2],// average normals
M.addVectors(_,w).normalize(),// assign the new values to both normals
b[a+0]=b[r+a+0]=M.x,b[a+1]=b[r+a+1]=M.y,b[a+2]=b[r+a+2]=M.z}}
/**
 * @author jonobr1 / http://jonobr1.com
 * @author Mugen87 / https://github.com/Mugen87
 */
// ShapeGeometry
function ao(e,t){Jt.call(this),this.type="ShapeGeometry","object"===(void 0===t?"undefined":i(t))&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new so(e,t)),this.mergeVertices()}// ShapeBufferGeometry
function so(e,t){dn.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;// buffers
var n=[],i=[],r=[],o=[],a=0,s=0;// allow single and array values for "shapes" parameter
if(!1===Array.isArray(e))c(e);else for(var l=0;l<e.length;l++)c(e[l]),this.addGroup(a,s,l),// enables MultiMaterial support
a+=s,s=0;// build geometry
// helper functions
function c(e){var a,l,c,u=i.length/3,h=e.extractPoints(t),d=h.shape,p=h.holes;// check direction of vertices
if(!1===Xr.isClockWise(d))// also check if holes are in the opposite direction
for(d=d.reverse(),a=0,l=p.length;a<l;a++)c=p[a],!0===Xr.isClockWise(c)&&(p[a]=c.reverse());var f=Xr.triangulateShape(d,p);// join vertices of inner and outer paths to a single array
for(a=0,l=p.length;a<l;a++)c=p[a],d=d.concat(c);// vertices, normals, uvs
for(a=0,l=d.length;a<l;a++){var m=d[a];i.push(m.x,m.y,0),r.push(0,0,1),o.push(m.x,m.y)}// incides
for(a=0,l=f.length;a<l;a++){var g=f[a],v=g[0]+u,y=g[1]+u,x=g[2]+u;n.push(v,y,x),s+=3}}this.setIndex(n),this.addAttribute("position",new sn(i,3)),this.addAttribute("normal",new sn(r,3)),this.addAttribute("uv",new sn(o,2))}//
function lo(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}
/**
 * @author WestLangley / http://github.com/WestLangley
 * @author Mugen87 / https://github.com/Mugen87
 */function co(e,t){dn.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;// buffer
var n,i,r,o,a=[],s=Math.cos(bt.DEG2RAD*t),l=[0,0],c={},u=["a","b","c"];// helper variables
e.isBufferGeometry?(o=new Jt).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();// now create a data structure where each entry represents an edge with its adjoining faces
for(var h=o.vertices,d=o.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],g=0;g<3;g++)n=m[u[g]],i=m[u[(g+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),void 0===c[r=l[0]+","+l[1]]?c[r]={index1:l[0],index2:l[1],face1:p,face2:void 0}:c[r].face2=p;// generate vertices
for(r in c){var v=c[r];// an edge is only rendered if the angle (in degrees) between the face normals of the adjoining faces exceeds this value. default = 1 degree.
if(void 0===v.face2||d[v.face1].normal.dot(d[v.face2].normal)<=s){var y=h[v.index1];a.push(y.x,y.y,y.z),y=h[v.index2],a.push(y.x,y.y,y.z)}}// build geometry
this.addAttribute("position",new sn(a,3))}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author Mugen87 / https://github.com/Mugen87
 */
// CylinderGeometry
function uo(e,t,n,i,r,o,a,s){Jt.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new ho(e,t,n,i,r,o,a,s)),this.mergeVertices()}// CylinderBufferGeometry
function ho(e,t,n,i,r,o,a,s){dn.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;// buffers
var c=[],u=[],h=[],d=[],p=0,f=[],m=n/2,g=0;function v(n){var r,o,f,v=new _t,y=new Et,x=0,b=!0===n?e:t,_=!0===n?1:-1;// first we generate the center vertex data of the cap.
// because the geometry needs one set of uvs per face,
// we must generate a center vertex per face/segment
for(// save the index of the first center vertex
o=p,r=1;r<=i;r++)// vertex
u.push(0,m*_,0),// normal
h.push(0,_,0),// uv
d.push(.5,.5),// increase index
p++;// save the index of the last center vertex
// now we generate the surrounding vertices, normals and uvs
for(f=p,r=0;r<=i;r++){var w=r/i*s+a,M=Math.cos(w),E=Math.sin(w);// vertex
y.x=b*E,y.y=m*_,y.z=b*M,u.push(y.x,y.y,y.z),// normal
h.push(0,_,0),// uv
v.x=.5*M+.5,v.y=.5*E*_+.5,d.push(v.x,v.y),// increase index
p++}// generate indices
for(r=0;r<i;r++){var T=o+r,A=f+r;!0===n?// face top
c.push(A,A+1,T):// face bottom
c.push(A+1,A,T),x+=3}// add a group to the geometry. this will ensure multi material support
l.addGroup(g,x,!0===n?1:2),// calculate new start value for groups
g+=x}// generate geometry
!function(){var o,v,y=new Et,x=new Et,b=0,_=(t-e)/n;// generate vertices, normals and uvs
for(v=0;v<=r;v++){var w=[],M=v/r,E=M*(t-e)+e;for(o=0;o<=i;o++){var T=o/i,A=T*s+a,S=Math.sin(A),C=Math.cos(A);// vertex
x.x=E*S,x.y=-M*n+m,x.z=E*C,u.push(x.x,x.y,x.z),// normal
y.set(S,_,C).normalize(),h.push(y.x,y.y,y.z),// uv
d.push(T,1-M),// save index of vertex in respective row
w.push(p++)}// now save vertices of the row in our index array
f.push(w)}// generate indices
for(o=0;o<i;o++)for(v=0;v<r;v++){// we use the index array to access the correct indices
var R=f[v][o],L=f[v+1][o],P=f[v+1][o+1],O=f[v][o+1];// faces
c.push(R,L,O),c.push(L,P,O),// update group counter
b+=6}// add a group to the geometry. this will ensure multi material support
l.addGroup(g,b,0),// calculate new start value for groups
g+=b}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),// build geometry
this.setIndex(c),this.addAttribute("position",new sn(u,3)),this.addAttribute("normal",new sn(h,3)),this.addAttribute("uv",new sn(d,2))}
/**
 * @author abelnation / http://github.com/abelnation
 */
// ConeGeometry
function po(e,t,n,i,r,o,a){uo.call(this,0,e,t,n,i,r,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}// ConeBufferGeometry
function fo(e,t,n,i,r,o,a){ho.call(this,0,e,t,n,i,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}
/**
 * @author benaadams / https://twitter.com/ben_a_adams
 * @author Mugen87 / https://github.com/Mugen87
 * @author hughes
 */
// CircleGeometry
function mo(e,t,n,i){Jt.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new go(e,t,n,i)),this.mergeVertices()}// CircleBufferGeometry
function go(e,t,n,i){dn.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;// buffers
var r,o,a=[],s=[],l=[],c=[],u=new Et,h=new _t;for(// center point
s.push(0,0,0),l.push(0,0,1),c.push(.5,.5),o=0,r=3;o<=t;o++,r+=3){var d=n+o/t*i;// vertex
u.x=e*Math.cos(d),u.y=e*Math.sin(d),s.push(u.x,u.y,u.z),// normal
l.push(0,0,1),// uvs
h.x=(s[r]/e+1)/2,h.y=(s[r+1]/e+1)/2,c.push(h.x,h.y)}// indices
for(r=1;r<=t;r++)a.push(r,r+1,0);// build geometry
this.setIndex(a),this.addAttribute("position",new sn(s,3)),this.addAttribute("normal",new sn(l,3)),this.addAttribute("uv",new sn(c,2))}Kr.prototype=Object.create(Jt.prototype),Kr.prototype.constructor=Kr,$r.prototype=Object.create(Zr.prototype),$r.prototype.constructor=$r,eo.prototype=Object.create(Jt.prototype),eo.prototype.constructor=eo,to.prototype=Object.create(dn.prototype),to.prototype.constructor=to,no.prototype=Object.create(Jt.prototype),no.prototype.constructor=no,io.prototype=Object.create(dn.prototype),io.prototype.constructor=io,ro.prototype=Object.create(Jt.prototype),ro.prototype.constructor=ro,oo.prototype=Object.create(dn.prototype),oo.prototype.constructor=oo,ao.prototype=Object.create(Jt.prototype),ao.prototype.constructor=ao,ao.prototype.toJSON=function(){var e=Jt.prototype.toJSON.call(this);return lo(this.parameters.shapes,e)},so.prototype=Object.create(dn.prototype),so.prototype.constructor=so,so.prototype.toJSON=function(){var e=dn.prototype.toJSON.call(this);return lo(this.parameters.shapes,e)},co.prototype=Object.create(dn.prototype),co.prototype.constructor=co,uo.prototype=Object.create(Jt.prototype),uo.prototype.constructor=uo,ho.prototype=Object.create(dn.prototype),ho.prototype.constructor=ho,po.prototype=Object.create(uo.prototype),po.prototype.constructor=po,fo.prototype=Object.create(ho.prototype),fo.prototype.constructor=fo,mo.prototype=Object.create(Jt.prototype),mo.prototype.constructor=mo,go.prototype=Object.create(dn.prototype),go.prototype.constructor=go;var vo=Object.freeze({WireframeGeometry:or,ParametricGeometry:ar,ParametricBufferGeometry:sr,TetrahedronGeometry:ur,TetrahedronBufferGeometry:hr,OctahedronGeometry:dr,OctahedronBufferGeometry:pr,IcosahedronGeometry:fr,IcosahedronBufferGeometry:mr,DodecahedronGeometry:gr,DodecahedronBufferGeometry:vr,PolyhedronGeometry:lr,PolyhedronBufferGeometry:cr,TubeGeometry:yr,TubeBufferGeometry:xr,TorusKnotGeometry:br,TorusKnotBufferGeometry:_r,TorusGeometry:wr,TorusBufferGeometry:Mr,TextGeometry:Kr,TextBufferGeometry:$r,SphereGeometry:eo,SphereBufferGeometry:to,RingGeometry:no,RingBufferGeometry:io,PlaneGeometry:mn,PlaneBufferGeometry:gn,LatheGeometry:ro,LatheBufferGeometry:oo,ShapeGeometry:ao,ShapeBufferGeometry:so,ExtrudeGeometry:Qr,ExtrudeBufferGeometry:Zr,EdgesGeometry:co,ConeGeometry:po,ConeBufferGeometry:fo,CylinderGeometry:uo,CylinderBufferGeometry:ho,CircleGeometry:mo,CircleBufferGeometry:go,BoxGeometry:pn,BoxBufferGeometry:fn});
/**
 * @author mrdoob / http://mrdoob.com/
 *
 * parameters = {
 *  color: <THREE.Color>
 * }
 */function yo(e){yn.call(this),this.type="ShadowMaterial",this.color=new kt(0),this.transparent=!0,this.setValues(e)}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function xo(e){bn.call(this,e),this.type="RawShaderMaterial"}
/**
 * @author WestLangley / http://github.com/WestLangley
 *
 * parameters = {
 *  color: <hex>,
 *  roughness: <float>,
 *  metalness: <float>,
 *  opacity: <float>,
 *
 *  map: new THREE.Texture( <Image> ),
 *
 *  lightMap: new THREE.Texture( <Image> ),
 *  lightMapIntensity: <float>
 *
 *  aoMap: new THREE.Texture( <Image> ),
 *  aoMapIntensity: <float>
 *
 *  emissive: <hex>,
 *  emissiveIntensity: <float>
 *  emissiveMap: new THREE.Texture( <Image> ),
 *
 *  bumpMap: new THREE.Texture( <Image> ),
 *  bumpScale: <float>,
 *
 *  normalMap: new THREE.Texture( <Image> ),
 *  normalScale: <Vector2>,
 *
 *  displacementMap: new THREE.Texture( <Image> ),
 *  displacementScale: <float>,
 *  displacementBias: <float>,
 *
 *  roughnessMap: new THREE.Texture( <Image> ),
 *
 *  metalnessMap: new THREE.Texture( <Image> ),
 *
 *  alphaMap: new THREE.Texture( <Image> ),
 *
 *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),
 *  envMapIntensity: <float>
 *
 *  refractionRatio: <float>,
 *
 *  wireframe: <boolean>,
 *  wireframeLinewidth: <float>,
 *
 *  skinning: <bool>,
 *  morphTargets: <bool>,
 *  morphNormals: <bool>
 * }
 */
function bo(e){yn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new kt(16777215),// diffuse
this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}
/**
 * @author WestLangley / http://github.com/WestLangley
 *
 * parameters = {
 *  reflectivity: <float>
 * }
 */
function _o(e){bo.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,// maps to F0 = 0.04
this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 *
 * parameters = {
 *  color: <hex>,
 *  specular: <hex>,
 *  shininess: <float>,
 *  opacity: <float>,
 *
 *  map: new THREE.Texture( <Image> ),
 *
 *  lightMap: new THREE.Texture( <Image> ),
 *  lightMapIntensity: <float>
 *
 *  aoMap: new THREE.Texture( <Image> ),
 *  aoMapIntensity: <float>
 *
 *  emissive: <hex>,
 *  emissiveIntensity: <float>
 *  emissiveMap: new THREE.Texture( <Image> ),
 *
 *  bumpMap: new THREE.Texture( <Image> ),
 *  bumpScale: <float>,
 *
 *  normalMap: new THREE.Texture( <Image> ),
 *  normalScale: <Vector2>,
 *
 *  displacementMap: new THREE.Texture( <Image> ),
 *  displacementScale: <float>,
 *  displacementBias: <float>,
 *
 *  specularMap: new THREE.Texture( <Image> ),
 *
 *  alphaMap: new THREE.Texture( <Image> ),
 *
 *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),
 *  combine: THREE.Multiply,
 *  reflectivity: <float>,
 *  refractionRatio: <float>,
 *
 *  wireframe: <boolean>,
 *  wireframeLinewidth: <float>,
 *
 *  skinning: <bool>,
 *  morphTargets: <bool>,
 *  morphNormals: <bool>
 * }
 */
function wo(e){yn.call(this),this.type="MeshPhongMaterial",this.color=new kt(16777215),// diffuse
this.specular=new kt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}
/**
 * @author takahirox / http://github.com/takahirox
 *
 * parameters = {
 *  gradientMap: new THREE.Texture( <Image> )
 * }
 */
function Mo(e){wo.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author WestLangley / http://github.com/WestLangley
 *
 * parameters = {
 *  opacity: <float>,
 *
 *  bumpMap: new THREE.Texture( <Image> ),
 *  bumpScale: <float>,
 *
 *  normalMap: new THREE.Texture( <Image> ),
 *  normalScale: <Vector2>,
 *
 *  displacementMap: new THREE.Texture( <Image> ),
 *  displacementScale: <float>,
 *  displacementBias: <float>,
 *
 *  wireframe: <boolean>,
 *  wireframeLinewidth: <float>
 *
 *  skinning: <bool>,
 *  morphTargets: <bool>,
 *  morphNormals: <bool>
 * }
 */
function Eo(e){yn.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new _t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 *
 * parameters = {
 *  color: <hex>,
 *  opacity: <float>,
 *
 *  map: new THREE.Texture( <Image> ),
 *
 *  lightMap: new THREE.Texture( <Image> ),
 *  lightMapIntensity: <float>
 *
 *  aoMap: new THREE.Texture( <Image> ),
 *  aoMapIntensity: <float>
 *
 *  emissive: <hex>,
 *  emissiveIntensity: <float>
 *  emissiveMap: new THREE.Texture( <Image> ),
 *
 *  specularMap: new THREE.Texture( <Image> ),
 *
 *  alphaMap: new THREE.Texture( <Image> ),
 *
 *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),
 *  combine: THREE.Multiply,
 *  reflectivity: <float>,
 *  refractionRatio: <float>,
 *
 *  wireframe: <boolean>,
 *  wireframeLinewidth: <float>,
 *
 *  skinning: <bool>,
 *  morphTargets: <bool>,
 *  morphNormals: <bool>
 * }
 */
function To(e){yn.call(this),this.type="MeshLambertMaterial",this.color=new kt(16777215),// diffuse
this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}
/**
 * @author alteredq / http://alteredqualia.com/
 *
 * parameters = {
 *  color: <hex>,
 *  opacity: <float>,
 *
 *  linewidth: <float>,
 *
 *  scale: <float>,
 *  dashSize: <float>,
 *  gapSize: <float>
 * }
 */
function Ao(e){Qi.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}yo.prototype=Object.create(yn.prototype),yo.prototype.constructor=yo,yo.prototype.isShadowMaterial=!0,yo.prototype.copy=function(e){return yn.prototype.copy.call(this,e),this.color.copy(e.color),this},xo.prototype=Object.create(bn.prototype),xo.prototype.constructor=xo,xo.prototype.isRawShaderMaterial=!0,bo.prototype=Object.create(yn.prototype),bo.prototype.constructor=bo,bo.prototype.isMeshStandardMaterial=!0,bo.prototype.copy=function(e){return yn.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},_o.prototype=Object.create(bo.prototype),_o.prototype.constructor=_o,_o.prototype.isMeshPhysicalMaterial=!0,_o.prototype.copy=function(e){return bo.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},wo.prototype=Object.create(yn.prototype),wo.prototype.constructor=wo,wo.prototype.isMeshPhongMaterial=!0,wo.prototype.copy=function(e){return yn.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Mo.prototype=Object.create(wo.prototype),Mo.prototype.constructor=Mo,Mo.prototype.isMeshToonMaterial=!0,Mo.prototype.copy=function(e){return wo.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Eo.prototype=Object.create(yn.prototype),Eo.prototype.constructor=Eo,Eo.prototype.isMeshNormalMaterial=!0,Eo.prototype.copy=function(e){return yn.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},To.prototype=Object.create(yn.prototype),To.prototype.constructor=To,To.prototype.isMeshLambertMaterial=!0,To.prototype.copy=function(e){return yn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ao.prototype=Object.create(Qi.prototype),Ao.prototype.constructor=Ao,Ao.prototype.isLineDashedMaterial=!0,Ao.prototype.copy=function(e){return Qi.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var So=Object.freeze({ShadowMaterial:yo,SpriteMaterial:Gi,RawShaderMaterial:xo,ShaderMaterial:bn,PointsMaterial:$i,MeshPhysicalMaterial:_o,MeshStandardMaterial:bo,MeshPhongMaterial:wo,MeshToonMaterial:Mo,MeshNormalMaterial:Eo,MeshLambertMaterial:To,MeshDepthMaterial:Ri,MeshDistanceMaterial:Li,MeshBasicMaterial:xn,LineDashedMaterial:Ao,LineBasicMaterial:Qi,Material:yn}),Co={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(// console.log( 'THREE.Cache', 'Adding key:', key );
this.files[e]=t)},get:function(e){if(!1!==this.enabled)// console.log( 'THREE.Cache', 'Checking key:', key );
return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};
/**
 * @author mrdoob / http://mrdoob.com/
 */
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Ro(e,t,n){var i=this,r=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===r&&void 0!==i.onStart&&i.onStart(e,o,a),r=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,a),o===a&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var Lo=new Ro,Po={};
/**
 * @author mrdoob / http://mrdoob.com/
 */function Oo(e){this.manager=void 0!==e?e:Lo}
/**
 * @author mrdoob / http://mrdoob.com/
 *
 * Abstract Base class to block based textures loader (dds, pvr, ...)
 */
function Io(e){this.manager=void 0!==e?e:Lo,// override in sub classes
this._parser=null}
/**
 * @author Nikos M. / https://github.com/foo123/
 *
 * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)
 */
function Bo(e){this.manager=void 0!==e?e:Lo,// override in sub classes
this._parser=null}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Do(e){this.manager=void 0!==e?e:Lo}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Uo(e){this.manager=void 0!==e?e:Lo}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function No(e){this.manager=void 0!==e?e:Lo}
/**
 * @author zz85 / http://www.lab4games.net/zz85/blog
 * Extensible curve object
 *
 * Some common of curve methods:
 * .getPoint( t, optionalTarget ), .getTangent( t )
 * .getPointAt( u, optionalTarget ), .getTangentAt( u )
 * .getPoints(), .getSpacedPoints()
 * .getLength()
 * .updateArcLengths()
 *
 * This following curves inherit from THREE.Curve:
 *
 * -- 2D curves --
 * THREE.ArcCurve
 * THREE.CubicBezierCurve
 * THREE.EllipseCurve
 * THREE.LineCurve
 * THREE.QuadraticBezierCurve
 * THREE.SplineCurve
 *
 * -- 3D curves --
 * THREE.CatmullRomCurve3
 * THREE.CubicBezierCurve3
 * THREE.LineCurve3
 * THREE.QuadraticBezierCurve3
 *
 * A series of curves can be represented as a THREE.CurvePath.
 *
 **/
/**************************************************************
 *	Abstract Curve base class
 **************************************************************/
function Fo(){this.type="Curve",this.arcLengthDivisions=200}function ko(e,t,n,i,r,o,a,s){Fo.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function zo(e,t,n,i,r,o){ko.call(this,e,t,n,n,i,r,o),this.type="ArcCurve"}
/**
 * @author zz85 https://github.com/zz85
 *
 * Centripetal CatmullRom Curve - which is useful for avoiding
 * cusps and self-intersections in non-uniform catmull rom curves.
 * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf
 *
 * curve.type accepts centripetal(default), chordal and catmullrom
 * curve.tension is used for catmullrom which defaults to 0.5
 */
/*
Based on an optimized c++ solution in
 - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/
 - http://ideone.com/NoEbVM

This CubicPoly class could be used for reusing some variables and calculations,
but for three.js curve use, it could be possible inlined and flatten into a single function call
which can be placed in CurveUtils.
*/
function Ho(){var e=0,t=0,n=0,i=0;
/*
	 * Compute coefficients for a cubic polynomial
	 *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3
	 * such that
	 *   p(0) = x0, p(1) = x1
	 *  and
	 *   p'(0) = t0, p'(1) = t1.
	 */function r(r,o,a,s){e=r,t=a,n=-3*r+3*o-2*a-s,i=2*r-2*o+a+s}return{initCatmullRom:function(e,t,n,i,o){r(t,n,o*(n-e),o*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,o,a,s){// compute tangents when parameterized in [t1,t2]
var l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(i-t)/(a+s)+(i-n)/s;r(t,n,// rescale tangents for parametrization in [0,1]
l*=a,c*=a)},calc:function(r){var o=r*r;return e+t*r+n*o+i*(o*r)}}}//
Object.assign(Oo.prototype,{load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Co.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;// Check if request is duplicate
if(void 0===Po[e]){// Check for data: URI
var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);// Safari can not handle Data URIs through XMLHttpRequest so process manually
if(a){var s=a[1],l=!!a[2],c=a[3];c=window.decodeURIComponent(c),l&&(c=window.atob(c));try{var u,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(c.length),p=0;p<c.length;p++)d[p]=c.charCodeAt(p);u="blob"===h?new Blob([d.buffer],{type:s}):d.buffer;break;case"document":var f=new DOMParser;u=f.parseFromString(c,s);break;case"json":u=JSON.parse(c);break;default:// 'text' or other
u=c}// Wait for next browser tick like standard XMLHttpRequest event dispatching does
window.setTimeout(function(){t&&t(u),r.manager.itemEnd(e)},0)}catch(t){// Wait for next browser tick like standard XMLHttpRequest event dispatching does
window.setTimeout(function(){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)},0)}}else{// Initialise array for duplicate requests
Po[e]=[],Po[e].push({onLoad:t,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var g in m.open("GET",e,!0),m.addEventListener("load",function(t){var n=this.response;Co.add(e,n);var i=Po[e];if(delete Po[e],200===this.status){for(var o=0,a=i.length;o<a;o++){(s=i[o]).onLoad&&s.onLoad(n)}r.manager.itemEnd(e)}else if(0===this.status){// Some browsers return HTTP Status 0 when using non-http protocol
// e.g. 'file://' or 'data://'. Handle as success.
console.warn("THREE.FileLoader: HTTP Status 0 received.");for(o=0,a=i.length;o<a;o++){(s=i[o]).onLoad&&s.onLoad(n)}r.manager.itemEnd(e)}else{for(o=0,a=i.length;o<a;o++){var s;(s=i[o]).onError&&s.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)}},!1),m.addEventListener("progress",function(t){for(var n=Po[e],i=0,r=n.length;i<r;i++){var o=n[i];o.onProgress&&o.onProgress(t)}},!1),m.addEventListener("error",function(t){var n=Po[e];delete Po[e];for(var i=0,o=n.length;i<o;i++){var a=n[i];a.onError&&a.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return r.manager.itemStart(e),m}Po[e].push({onLoad:t,onProgress:n,onError:i})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(Io.prototype,{load:function(e,t,n,i){var r=this,o=[],a=new ir;a.image=o;var s=new Oo(this.manager);function l(l){s.load(e[l],function(e){var n=r._parser(e,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(a.minFilter=fe),a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,i)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,u=0,h=e.length;u<h;++u)l(u);else// compressed cubemap texture stored in a single DDS file
s.load(e,function(e){var n=r._parser(e,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){o[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=fe),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,i);return a},setPath:function(e){return this.path=e,this}}),Object.assign(Bo.prototype,{load:function(e,t,n,i){var r=this,o=new Pt,a=new Oo(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var n=r._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ce,o.wrapT=void 0!==n.wrapT?n.wrapT:ce,o.magFilter=void 0!==n.magFilter?n.magFilter:fe,o.minFilter=void 0!==n.minFilter?n.minFilter:ge,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=fe),o.needsUpdate=!0,t&&t(o,n))},n,i),o}}),Object.assign(Do.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=Co.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",function(){Co.add(e,this),t&&t(this),r.manager.itemEnd(e)},!1),
/*
		image.addEventListener( 'progress', function ( event ) {

			if ( onProgress ) onProgress( event );

		}, false );
		*/
a.addEventListener("error",function(t){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)},!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Uo.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){var r=new An,o=new Do(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],function(e){r.images[n]=e,6===++a&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(var l=0;l<e.length;++l)s(l);return r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(No.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){var r=new St,o=new Do(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){r.image=n;// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.
var i=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?Le:Pe,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Fo.prototype,{// Virtual base class method to overwrite and implement in subclasses
//	- t [0 .. 1]
getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},// Get point at relative position in curve according to arc length
// - u [0 .. 1]
getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},// Get sequence of points using getPoint( t )
getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},// Get sequence of points using getPointAt( u )
getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},// Get total curve arc length
getLength:function(){var e=this.getLengths();return e[e.length-1]},// Get list of cumulative segment lengths
getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),o=0;for(i.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(r),i.push(o),r=t;return this.cacheArcLengths=i,i;// { sums: cache, sum: sum }; Sum is in the last element.
},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant
getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,o=i.length;// The targeted u distance value to get
n=t||e*i[o-1];// binary search for the index with largest value smaller than target u distance
for(var a,s=0,l=o-1;s<=l;)if((// less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats
a=i[r=Math.floor(s+(l-s)/2)]-n)<0)s=r+1;else{if(!(a>0)){l=r;break;// DONE
}l=r-1}if(i[r=l]===n)return r/(o-1);// we could get finer grain at lengths, or use simple interpolation between two points
var c=i[r];return(r+(n-c)/(i[r+1]-c))/(o-1)},// Returns a unit vector tangent at t
// In case any sub curve does not implement its tangent derivation,
// 2 points a small delta apart will be used to find its gradient
// which seems to give a reasonable approximation
getTangent:function(e){var t=e-1e-4,n=e+1e-4;// Capping in case of danger
t<0&&(t=0),n>1&&(n=1);var i=this.getPoint(t);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf
var n,i,r,o=new Et,a=[],s=[],l=[],c=new Et,u=new wt;// compute the tangent vectors for each segment on the curve
for(n=0;n<=e;n++)i=n/e,a[n]=this.getTangentAt(i),a[n].normalize();// select an initial normal vector perpendicular to the first tangent vector,
// and in the direction of the minimum tangent xyz component
s[0]=new Et,l[0]=new Et;var h=Number.MAX_VALUE,d=Math.abs(a[0].x),p=Math.abs(a[0].y),f=Math.abs(a[0].z);// compute the slowly-varying normal and binormal vectors for each segment on the curve
for(d<=h&&(h=d,o.set(1,0,0)),p<=h&&(h=p,o.set(0,1,0)),f<=h&&o.set(0,0,1),c.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],c),l[0].crossVectors(a[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),l[n]=l[n-1].clone(),c.crossVectors(a[n-1],a[n]),c.length()>Number.EPSILON&&(c.normalize(),r=Math.acos(bt.clamp(a[n-1].dot(a[n]),-1,1)),// clamp for floating pt errors
s[n].applyMatrix4(u.makeRotationAxis(c,r))),l[n].crossVectors(a[n],s[n]);// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same
if(!0===t)for(r=Math.acos(bt.clamp(s[0].dot(s[e]),-1,1)),r/=e,a[0].dot(c.crossVectors(s[0],s[e]))>0&&(r=-r),n=1;n<=e;n++)// twist a little...
s[n].applyMatrix4(u.makeRotationAxis(a[n],r*n)),l[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),ko.prototype=Object.create(Fo.prototype),ko.prototype.constructor=ko,ko.prototype.isEllipseCurve=!0,ko.prototype.getPoint=function(e,t){// ensures that deltaAngle is 0 .. 2 PI
for(var n=t||new _t,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);var a=this.aStartAngle+e*r,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=s-this.aX,d=l-this.aY;// Rotate the point about the center of the ellipse.
s=h*c-d*u+this.aX,l=h*u+d*c+this.aY}return n.set(s,l)},ko.prototype.copy=function(e){return Fo.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ko.prototype.toJSON=function(){var e=Fo.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},ko.prototype.fromJSON=function(e){return Fo.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},zo.prototype=Object.create(ko.prototype),zo.prototype.constructor=zo,zo.prototype.isArcCurve=!0;var Vo=new Et,Go=new Ho,jo=new Ho,Wo=new Ho;function Xo(e,t,n,i){Fo.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i||.5}
/**
 * @author zz85 / http://www.lab4games.net/zz85/blog
 *
 * Bezier Curves formulas obtained from
 * http://en.wikipedia.org/wiki/Bézier_curve
 */
function qo(e,t,n,i,r){var o=.5*(i-t),a=.5*(r-n),s=e*e;return(2*n-2*i+o+a)*(e*s)+(-3*n+3*i-2*o-a)*s+o*e+n}//
function Yo(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}//
function Qo(e,t,n,i,r){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}function Zo(e,t,n,i){Fo.call(this),this.type="CubicBezierCurve",this.v0=e||new _t,this.v1=t||new _t,this.v2=n||new _t,this.v3=i||new _t}function Jo(e,t,n,i){Fo.call(this),this.type="CubicBezierCurve3",this.v0=e||new Et,this.v1=t||new Et,this.v2=n||new Et,this.v3=i||new Et}function Ko(e,t){Fo.call(this),this.type="LineCurve",this.v1=e||new _t,this.v2=t||new _t}function $o(e,t){Fo.call(this),this.type="LineCurve3",this.v1=e||new Et,this.v2=t||new Et}function ea(e,t,n){Fo.call(this),this.type="QuadraticBezierCurve",this.v0=e||new _t,this.v1=t||new _t,this.v2=n||new _t}function ta(e,t,n){Fo.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Et,this.v1=t||new Et,this.v2=n||new Et}function na(e/* array of Vector2 */){Fo.call(this),this.type="SplineCurve",this.points=e||[]}Xo.prototype=Object.create(Fo.prototype),Xo.prototype.constructor=Xo,Xo.prototype.isCatmullRomCurve3=!0,Xo.prototype.getPoint=function(e,t){var n,i,r,o,a=t||new Et,s=this.points,l=s.length,c=(l-(this.closed?0:1))*e,u=Math.floor(c),h=c-u;if(this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/l)+1)*l:0===h&&u===l-1&&(u=l-2,h=1),// 4 points
this.closed||u>0?n=s[(u-1)%l]:(// extrapolate first point
Vo.subVectors(s[0],s[1]).add(s[0]),n=Vo),i=s[u%l],r=s[(u+1)%l],this.closed||u+2<l?o=s[(u+2)%l]:(// extrapolate last point
Vo.subVectors(s[l-1],s[l-2]).add(s[l-1]),o=Vo),"centripetal"===this.curveType||"chordal"===this.curveType){// init Centripetal / Chordal Catmull-Rom
var d="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(i),d),f=Math.pow(i.distanceToSquared(r),d),m=Math.pow(r.distanceToSquared(o),d);// safety check for repeated points
f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),Go.initNonuniformCatmullRom(n.x,i.x,r.x,o.x,p,f,m),jo.initNonuniformCatmullRom(n.y,i.y,r.y,o.y,p,f,m),Wo.initNonuniformCatmullRom(n.z,i.z,r.z,o.z,p,f,m)}else"catmullrom"===this.curveType&&(Go.initCatmullRom(n.x,i.x,r.x,o.x,this.tension),jo.initCatmullRom(n.y,i.y,r.y,o.y,this.tension),Wo.initCatmullRom(n.z,i.z,r.z,o.z,this.tension));return a.set(Go.calc(h),jo.calc(h),Wo.calc(h)),a},Xo.prototype.copy=function(e){Fo.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Xo.prototype.toJSON=function(){var e=Fo.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Xo.prototype.fromJSON=function(e){Fo.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new Et).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Zo.prototype=Object.create(Fo.prototype),Zo.prototype.constructor=Zo,Zo.prototype.isCubicBezierCurve=!0,Zo.prototype.getPoint=function(e,t){var n=t||new _t,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(Qo(e,i.x,r.x,o.x,a.x),Qo(e,i.y,r.y,o.y,a.y)),n},Zo.prototype.copy=function(e){return Fo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Zo.prototype.toJSON=function(){var e=Fo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Zo.prototype.fromJSON=function(e){return Fo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Jo.prototype=Object.create(Fo.prototype),Jo.prototype.constructor=Jo,Jo.prototype.isCubicBezierCurve3=!0,Jo.prototype.getPoint=function(e,t){var n=t||new Et,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(Qo(e,i.x,r.x,o.x,a.x),Qo(e,i.y,r.y,o.y,a.y),Qo(e,i.z,r.z,o.z,a.z)),n},Jo.prototype.copy=function(e){return Fo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Jo.prototype.toJSON=function(){var e=Fo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Jo.prototype.fromJSON=function(e){return Fo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Ko.prototype=Object.create(Fo.prototype),Ko.prototype.constructor=Ko,Ko.prototype.isLineCurve=!0,Ko.prototype.getPoint=function(e,t){var n=t||new _t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},// Line curve is linear, so we can overwrite default getPointAt
Ko.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Ko.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Ko.prototype.copy=function(e){return Fo.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ko.prototype.toJSON=function(){var e=Fo.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ko.prototype.fromJSON=function(e){return Fo.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},$o.prototype=Object.create(Fo.prototype),$o.prototype.constructor=$o,$o.prototype.isLineCurve3=!0,$o.prototype.getPoint=function(e,t){var n=t||new Et;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},// Line curve is linear, so we can overwrite default getPointAt
$o.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},$o.prototype.copy=function(e){return Fo.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},$o.prototype.toJSON=function(){var e=Fo.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},$o.prototype.fromJSON=function(e){return Fo.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ea.prototype=Object.create(Fo.prototype),ea.prototype.constructor=ea,ea.prototype.isQuadraticBezierCurve=!0,ea.prototype.getPoint=function(e,t){var n=t||new _t,i=this.v0,r=this.v1,o=this.v2;return n.set(Yo(e,i.x,r.x,o.x),Yo(e,i.y,r.y,o.y)),n},ea.prototype.copy=function(e){return Fo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ea.prototype.toJSON=function(){var e=Fo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ea.prototype.fromJSON=function(e){return Fo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ta.prototype=Object.create(Fo.prototype),ta.prototype.constructor=ta,ta.prototype.isQuadraticBezierCurve3=!0,ta.prototype.getPoint=function(e,t){var n=t||new Et,i=this.v0,r=this.v1,o=this.v2;return n.set(Yo(e,i.x,r.x,o.x),Yo(e,i.y,r.y,o.y),Yo(e,i.z,r.z,o.z)),n},ta.prototype.copy=function(e){return Fo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ta.prototype.toJSON=function(){var e=Fo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ta.prototype.fromJSON=function(e){return Fo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},na.prototype=Object.create(Fo.prototype),na.prototype.constructor=na,na.prototype.isSplineCurve=!0,na.prototype.getPoint=function(e,t){var n=t||new _t,i=this.points,r=(i.length-1)*e,o=Math.floor(r),a=r-o,s=i[0===o?o:o-1],l=i[o],c=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2];return n.set(qo(a,s.x,l.x,c.x,u.x),qo(a,s.y,l.y,c.y,u.y)),n},na.prototype.copy=function(e){Fo.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this},na.prototype.toJSON=function(){var e=Fo.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e},na.prototype.fromJSON=function(e){Fo.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new _t).fromArray(i))}return this};var ia=Object.freeze({ArcCurve:zo,CatmullRomCurve3:Xo,CubicBezierCurve:Zo,CubicBezierCurve3:Jo,EllipseCurve:ko,LineCurve:Ko,LineCurve3:$o,QuadraticBezierCurve:ea,QuadraticBezierCurve3:ta,SplineCurve:na});
/**
 * @author zz85 / http://www.lab4games.net/zz85/blog
 *
 **/
/**************************************************************
 *	Curved Path - a curve path is simply a array of connected
 *  curves, but retains the api of a curve
 **************************************************************/function ra(){Fo.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}
/**
 * @author zz85 / http://www.lab4games.net/zz85/blog
 * Creates free form 2d path using series of points, lines or curves.
 **/
function oa(e){ra.call(this),this.type="Path",this.currentPoint=new _t,e&&this.setFromPoints(e)}
/**
 * @author zz85 / http://www.lab4games.net/zz85/blog
 * Defines a 2d shape plane using paths.
 **/
// STEP 1 Create a path.
// STEP 2 Turn path into shape.
// STEP 3 ExtrudeGeometry takes in Shape/Shapes
// STEP 3a - Extract points from each shape, turn to vertices
// STEP 3b - Triangulate each shape, add faces.
function aa(e){oa.call(this,e),this.uuid=bt.generateUUID(),this.type="Shape",this.holes=[]}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 */
function sa(e,t){Xt.call(this),this.type="Light",this.color=new kt(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}
/**
 * @author alteredq / http://alteredqualia.com/
 */
function la(e,t,n){sa.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Xt.DefaultUp),this.updateMatrix(),this.groundColor=new kt(t)}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function ca(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new _t(512,512),this.map=null,this.matrix=new wt}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function ua(){ca.call(this,new Ui(50,1,.5,500))}
/**
 * @author alteredq / http://alteredqualia.com/
 */
function ha(e,t,n,i,r,o){sa.call(this,e,t),this.type="SpotLight",this.position.copy(Xt.DefaultUp),this.updateMatrix(),this.target=new Xt,Object.defineProperty(this,"power",{get:function(){// intensity = power per solid angle.
// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf
return this.intensity*Math.PI},set:function(e){// intensity = power per solid angle.
// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf
this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,// for physically correct lights, should be 2.
this.shadow=new ua}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function da(e,t,n,i){sa.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){// intensity = power per solid angle.
// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf
return 4*this.intensity*Math.PI},set:function(e){// intensity = power per solid angle.
// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf
this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,// for physically correct lights, should be 2.
this.shadow=new ca(new Ui(90,1,.5,500))}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function pa(){ca.call(this,new Yt(-5,5,5,-5,.5,500))}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 */
function fa(e,t){sa.call(this,e,t),this.type="DirectionalLight",this.position.copy(Xt.DefaultUp),this.updateMatrix(),this.target=new Xt,this.shadow=new pa}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function ma(e,t){sa.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}
/**
 * @author abelnation / http://github.com/abelnation
 */
function ga(e,t,n,i){sa.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}
/**
 *
 * A Track that interpolates Strings
 *
 *
 * @author Ben Houston / http://clara.io/
 * @author David Sarno / http://lighthaus.us/
 * @author tschw
 */
function va(e,t,n,i){Ca.call(this,e,t,n,i)}
/**
 *
 * A Track of Boolean keyframe values.
 *
 *
 * @author Ben Houston / http://clara.io/
 * @author David Sarno / http://lighthaus.us/
 * @author tschw
 */
function ya(e,t,n){Ca.call(this,e,t,n)}
/**
 * Abstract base class of interpolants over parametric samples.
 *
 * The parameter domain is one dimensional, typically the time or a path
 * along a curve defined by the data.
 *
 * The sample values can have any dimensionality and derived classes may
 * apply special interpretations to the data.
 *
 * This class provides the interval seek in a Template Method, deferring
 * the actual interpolation to derived classes.
 *
 * Time complexity is O(1) for linear access crossing at most two points
 * and O(log N) for random access, where N is the number of positions.
 *
 * References:
 *
 * 		http://www.oodesign.com/template-method-pattern.html
 *
 * @author tschw
 */
function xa(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}
/**
 * Spherical linear unit quaternion interpolant.
 *
 * @author tschw
 */
function ba(e,t,n,i){xa.call(this,e,t,n,i)}
/**
 *
 * A Track of quaternion keyframe values.
 *
 * @author Ben Houston / http://clara.io/
 * @author David Sarno / http://lighthaus.us/
 * @author tschw
 */
function _a(e,t,n,i){Ca.call(this,e,t,n,i)}
/**
 *
 * A Track of keyframe values that represent color.
 *
 *
 * @author Ben Houston / http://clara.io/
 * @author David Sarno / http://lighthaus.us/
 * @author tschw
 */
function wa(e,t,n,i){Ca.call(this,e,t,n,i)}
/**
 *
 * A Track of numeric keyframe values.
 *
 * @author Ben Houston / http://clara.io/
 * @author David Sarno / http://lighthaus.us/
 * @author tschw
 */
function Ma(e,t,n,i){Ca.call(this,e,t,n,i)}
/**
 * Fast and simple cubic spline interpolant.
 *
 * It was derived from a Hermitian construction setting the first derivative
 * at each sample position to the linear slope between neighboring positions
 * over their parameter interval.
 *
 * @author tschw
 */
function Ea(e,t,n,i){xa.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}
/**
 * @author tschw
 */
function Ta(e,t,n,i){xa.call(this,e,t,n,i)}
/**
 *
 * Interpolant that evaluates to the sample value at the position preceeding
 * the parameter.
 *
 * @author tschw
 */
function Aa(e,t,n,i){xa.call(this,e,t,n,i)}ra.prototype=Object.assign(Object.create(Fo.prototype),{constructor:ra,add:function(e){this.curves.push(e)},closePath:function(){// Add a line curve if start and end of lines are not connected
var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ko(t,e))},// To get accurate point with reference to
// entire path distance at time t,
// following has to be done:
// 1. Length of each sub path have to be known
// 2. Locate and identify type of curve
// 3. Get t for the curve
// 4. Return curve.getPointAt(t')
getPoint:function(e){// To think about boundaries points.
for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,o=this.curves[i],a=o.getLength(),s=0===a?0:1-r/a;return o.getPointAt(s)}i++}return null;// loop where sum != 0, sum > d , sum+1 <d
},// We cannot use the default THREE.Curve getPoint() with getLength() because in
// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath
// getPoint() depends on getLength
getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},// cacheLengths must be recalculated.
updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},// Compute lengths and cache them
// We cannot overwrite getLengths() because UtoT mapping uses it.
getCurveLengths:function(){// We use cache values if curves and cache array are same length
if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;// Get length of sub-curve
// Push sums into cached array
for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var o=r[i],a=o&&o.isEllipseCurve?2*e:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),l=0;l<s.length;l++){var c=s[l];t&&t.equals(c)||(// ensures no consecutive points are duplicates
n.push(c),t=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Fo.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Fo.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){Fo.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push((new ia[i.type]).fromJSON(i))}return this}}),oa.prototype=Object.assign(Object.create(ra.prototype),{constructor:oa,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t);// TODO consider referencing vectors instead of copying?
},lineTo:function(e,t){var n=new Ko(this.currentPoint.clone(),new _t(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,i){var r=new ea(this.currentPoint.clone(),new _t(e,t),new _t(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(e,t,n,i,r,o){var a=new Zo(this.currentPoint.clone(),new _t(e,t),new _t(n,i),new _t(r,o));this.curves.push(a),this.currentPoint.set(r,o)},splineThru:function(e/*Array of Vector*/){var t=new na([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,i,r,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,i,r,o)},absarc:function(e,t,n,i,r,o){this.absellipse(e,t,n,n,i,r,o)},ellipse:function(e,t,n,i,r,o,a,s){var l=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(e+l,t+c,n,i,r,o,a,s)},absellipse:function(e,t,n,i,r,o,a,s){var l=new ko(e,t,n,i,r,o,a,s);if(this.curves.length>0){// if a previous curve is present, attempt to join
var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var u=l.getPoint(1);this.currentPoint.copy(u)},copy:function(e){return ra.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=ra.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return ra.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),aa.prototype=Object.assign(Object.create(oa.prototype),{constructor:aa,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},// get points of shape and holes (keypoints based on segments parameter)
extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){oa.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){var e=oa.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){oa.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push((new oa).fromJSON(i))}return this}}),sa.prototype=Object.assign(Object.create(Xt.prototype),{constructor:sa,isLight:!0,copy:function(e){return Xt.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Xt.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),la.prototype=Object.assign(Object.create(sa.prototype),{constructor:la,isHemisphereLight:!0,copy:function(e){return sa.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(ca.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),ua.prototype=Object.assign(Object.create(ca.prototype),{constructor:ua,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*bt.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix())}}),ha.prototype=Object.assign(Object.create(sa.prototype),{constructor:ha,isSpotLight:!0,copy:function(e){return sa.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),da.prototype=Object.assign(Object.create(sa.prototype),{constructor:da,isPointLight:!0,copy:function(e){return sa.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),pa.prototype=Object.assign(Object.create(ca.prototype),{constructor:pa}),fa.prototype=Object.assign(Object.create(sa.prototype),{constructor:fa,isDirectionalLight:!0,copy:function(e){return sa.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ma.prototype=Object.assign(Object.create(sa.prototype),{constructor:ma,isAmbientLight:!0}),ga.prototype=Object.assign(Object.create(sa.prototype),{constructor:ga,isRectAreaLight:!0,copy:function(e){return sa.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=sa.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),va.prototype=Object.assign(Object.create(Ca.prototype),{constructor:va,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ya.prototype=Object.assign(Object.create(Ca.prototype),{constructor:ya,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(xa.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var o;n:{//- See http://jsperf.com/comparison-to-undefined/3
//- slower code:
//-
//- 				if ( t >= t1 || t1 === undefined ) {
i:if(!(e<i)){for(var a=n+2;;){if(void 0===i){if(e<r)break i;// after end
return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===a)break;// this loop
if(r=i,e<(i=t[++n]))// we have arrived at the sought interval
break t}// prepare binary search on the right side of the index
o=t.length;break n}//- slower code:
//-					if ( t < t0 || t0 === undefined ) {
if(e>=r)// the interval is valid
break e;// looping?
var s=t[1];e<s&&(n=2,// + 1, using the scan for the details
r=s);// linear reverse scan
for(a=n-2;;){if(void 0===r)// before start
return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===a)break;// this loop
if(i=r,e>=(r=t[--n-1]))// we have arrived at the sought interval
break t}// prepare binary search on the left side of the index
o=n,n=0}// linear scan
// binary search
for(;n<o;){var l=n+o>>>1;e<t[l]?o=l:n=l+1}// check boundary cases, again
if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}// seek
this._cachedIndex=n,this.intervalChanged_(n,r,i)}// validate_interval
return this.interpolate_(n,r,e,i)},settings:null,// optional, subclass-specific settings structure
// Note: The indirection allows central control of many interpolants.
// --- Protected interface
DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(// copies a sample value to the result buffer
var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,o=0;o!==i;++o)t[o]=n[r+o];return t},// Template methods for derived classes:
interpolate_:function(){throw new Error("call to abstract method");// implementations shall return this.resultBuffer
},intervalChanged_:function(){// empty
}}),//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(xa.prototype,{//( 0, t, t0 ), returns this.resultBuffer
beforeStart_:xa.prototype.copySampleValue_,//( N-1, tN-1, t ), returns this.resultBuffer
afterEnd_:xa.prototype.copySampleValue_}),ba.prototype=Object.assign(Object.create(xa.prototype),{constructor:ba,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=(n-t)/(i-t),c=s+a;s!==c;s+=4)Mt.slerpFlat(r,0,o,s-a,o,s,l);return r}}),_a.prototype=Object.assign(Object.create(Ca.prototype),{constructor:_a,ValueTypeName:"quaternion",// ValueBufferType is inherited
DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new ba(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),wa.prototype=Object.assign(Object.create(Ca.prototype),{constructor:wa,ValueTypeName:"color"}),Ma.prototype=Object.assign(Object.create(Ca.prototype),{constructor:Ma,ValueTypeName:"number"}),Ea.prototype=Object.assign(Object.create(xa.prototype),{constructor:Ea,DefaultSettings_:{endingStart:st,endingEnd:st},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,o=e+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:// f'(t0) = 0
r=e,a=2*t-n;break;case 2402:a=t+i[// use the other end of the curve
r=i.length-2]-i[r+1];break;default:// ZeroCurvatureEnding
// f''(t0) = 0 a.k.a. Natural Spline
r=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:// f'(tN) = 0
o=e,s=2*n-t;break;case 2402:// use the other end of the curve
o=1,s=n+i[1]-i[0];break;default:// ZeroCurvatureEnding
// f''(tN) = 0, a.k.a. Natural Spline
o=e-1,s=t}var l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=o*c},interpolate_:function(e,t,n,i){// combine data linearly
for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f,b=0// evaluate polynomials
;b!==a;++b)r[b]=g*o[c+b]+v*o[l+b]+y*o[s+b]+x*o[u+b];return r}}),Ta.prototype=Object.assign(Object.create(xa.prototype),{constructor:Ta,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(i-t),u=1-c,h=0;h!==a;++h)r[h]=o[l+h]*u+o[s+h]*c;return r}}),Aa.prototype=Object.assign(Object.create(xa.prototype),{constructor:Aa,interpolate_:function(e/*, t0, t, t1 */){return this.copySampleValue_(e-1)}});
/**
 * @author tschw
 * @author Ben Houston / http://clara.io/
 * @author David Sarno / http://lighthaus.us/
 */
var Sa={// same as Array.prototype.slice, but also works on typed arrays
arraySlice:function(e,t,n){return Sa.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},// converts an array to a specific type
convertArray:function(e,t,n){return!e||// let 'undefined' and 'null' pass
!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},// returns an array by which times and values can be sorted
getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort(function(t,n){return e[t]-e[n]}),n},// uses the array previously returned by 'getKeyframeOrder' to sort data
sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),o=0,a=0;a!==i;++o)for(var s=n[o]*t,l=0;l!==t;++l)r[a++]=e[s+l];return r},// function for parsing AOS keyframe formats
flattenJSON:function(e,t,n,i){for(var r=1,o=e[0];void 0!==o&&void 0===o[i];)o=e[r++];if(void 0!==o){// no data
var a=o[i];if(void 0!==a)// no data
if(Array.isArray(a))do{void 0!==(a=o[i])&&(t.push(o.time),n.push.apply(n,a)),o=e[r++]}while(void 0!==o);else if(void 0!==a.toArray)// ...assume THREE.Math-ish
do{void 0!==(a=o[i])&&(t.push(o.time),a.toArray(n,n.length)),o=e[r++]}while(void 0!==o);else// otherwise push as-is
do{void 0!==(a=o[i])&&(t.push(o.time),n.push(a)),o=e[r++]}while(void 0!==o)}}};
/**
 *
 * A timed sequence of keyframes for a specific property.
 *
 *
 * @author Ben Houston / http://clara.io/
 * @author David Sarno / http://lighthaus.us/
 * @author tschw
 */function Ca(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Sa.convertArray(t,this.TimeBufferType),this.values=Sa.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}// Static methods:
/**
 *
 * A Track of vectored keyframe values.
 *
 *
 * @author Ben Houston / http://clara.io/
 * @author David Sarno / http://lighthaus.us/
 * @author tschw
 */
function Ra(e,t,n,i){Ca.call(this,e,t,n,i)}
/**
 *
 * Reusable set of Tracks that represent an animation.
 *
 * @author Ben Houston / http://clara.io/
 * @author David Sarno / http://lighthaus.us/
 */
function La(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=bt.generateUUID(),// this means it should figure out its duration by scanning the tracks
this.duration<0&&this.resetDuration(),this.optimize()}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Pa(e){this.manager=void 0!==e?e:Lo,this.textures={}}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Oa(e){this.manager=void 0!==e?e:Lo}Object.assign(Ca,{// Serialization (in static context, because of constructor invocation
// and automatic invocation of .toJSON):
parse:function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Ca._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],i=[];Sa.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}// derived classes can define a static parse method
return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;// derived classes can define a static toJSON method
if(void 0!==n.toJSON)t=n.toJSON(e);else{// by default, we assume the data can be serialized as-is
t={name:e.name,times:Sa.convertArray(e.times,Array),values:Sa.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}// mandatory
return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ma;case"vector":case"vector2":case"vector3":case"vector4":return Ra;case"color":return wa;case"quaternion":return _a;case"bool":case"boolean":return ya;case"string":return va}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(Ca.prototype,{constructor:Ca,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new Aa(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Ta(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Ea(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){// fall back to default, unless the default itself is messed up
if(e===this.DefaultInterpolation)throw new Error(n);// fatal, in this case
this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",n)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},// move all keyframes either forwards or backwards in time
shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},// scale all keyframe times by a factor (useful for frame <-> seconds conversions)
scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},// removes keyframes before and after animation without changing any values within the range [startTime, endTime].
// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values
trim:function(e,t){for(var n=this.times,i=n.length,r=0,o=i-1;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;// inclusive -> exclusive bound
if(++o,0!==r||o!==i){// empty tracks are forbidden, so keep at least one keyframe
r>=o&&(r=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=Sa.arraySlice(n,r,o),this.values=Sa.arraySlice(this.values,r*a,o*a)}return this},// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable
validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==r;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==i&&Sa.isTypedArray(i)){a=0;for(var l=i.length;a!==l;++a){var c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}}return e},// removes equivalent sequential keys as common in morph target sequences
// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)
optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,o=e.length-1,a=1;a<o;++a){var s=!1,l=e[a];// remove adjacent keyframes scheduled at the same time
if(l!==e[a+1]&&(1!==a||l!==l[0]))if(i)s=!0;else for(// remove unnecessary keyframes same as their neighbors
var c=a*n,u=c-n,h=c+n,d=0;d!==n;++d){var p=t[c+d];if(p!==t[u+d]||p!==t[h+d]){s=!0;break}}// in-place compaction
if(s){if(a!==r){e[r]=e[a];var f=a*n,m=r*n;for(d=0;d!==n;++d)t[m+d]=t[f+d]}++r}}// flush last keyframe (compaction looks ahead)
if(o>0){e[r]=e[o];for(f=o*n,m=r*n,d=0;d!==n;++d)t[m+d]=t[f+d];++r}return r!==e.length&&(this.times=Sa.arraySlice(e,0,r),this.values=Sa.arraySlice(t,0,r*n)),this}}),Ra.prototype=Object.assign(Object.create(Ca.prototype),{constructor:Ra,ValueTypeName:"vector"}),Object.assign(La,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,o=n.length;r!==o;++r)t.push(Ca.parse(n[r]).scale(i));return new La(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t},r=0,o=n.length;r!==o;++r)t.push(Ca.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,o=[],a=0;a<r;a++){var s=[],l=[];s.push((a+r-1)%r,a,(a+1)%r),l.push(0,1,0);var c=Sa.getKeyframeOrder(s);s=Sa.sortedArray(s,1,c),l=Sa.sortedArray(l,1,c),// if there is a key at the first frame, duplicate it as the
// last frame as well for perfect loop.
i||0!==s[0]||(s.push(r),l.push(l[0])),o.push(new Ma(".morphTargetInfluences["+t[a].name+"]",s,l).scale(1/n))}return new La(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){// sort morph target names into animation groups based
// patterns like Walk_001, Walk_002, Run_001, Run_002
for(var i={},r=/^([\w-]*?)([\d]+)$/,o=0,a=e.length// tested with https://regex101.com/ on trick sequences
// such flamingo_flyA_003, flamingo_run1_003, crdeath0059
;o<a;o++){var s=e[o],l=s.name.match(r);if(l&&l.length>1){var c=i[h=l[1]];c||(i[h]=c=[]),c.push(s)}}var u=[];for(var h in i)u.push(La.CreateFromMorphTargetSequence(h,i[h],t,n));return u},// parse the animation.hierarchy format
parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){// only return track if there are actually keys.
if(0!==n.length){var o=[],a=[];Sa.flattenJSON(n,o,a,i),// empty keys are filtered out, so check again
0!==o.length&&r.push(new e(t,o,a))}},i=[],r=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var c=s[l].keys;// skip empty tracks
if(c&&0!==c.length)// process morph targets
if(c[0].morphTargets){for(// figure out all morph targets used in this track
var u={},h=0;h<c.length;h++)if(c[h].morphTargets)for(var d=0;d<c[h].morphTargets.length;d++)u[c[h].morphTargets[d]]=-1;// create a track for each morph target with all zero
// morphTargetInfluences except for the keys in which
// the morphTarget is named.
for(var p in u){var f=[],m=[];for(d=0;d!==c[h].morphTargets.length;++d){var g=c[h];f.push(g.time),m.push(g.morphTarget===p?1:0)}i.push(new Ma(".morphTargetInfluence["+p+"]",f,m))}o=u.length*(a||1)}else{// ...assume skeletal animation
var v=".bones["+t[l].name+"]";n(Ra,v+".position",c,"pos",i),n(_a,v+".quaternion",c,"rot",i),n(Ra,v+".scale",c,"scl",i)}}return 0===i.length?null:new La(r,o,i)}}),Object.assign(La.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(Pa.prototype,{load:function(e,t,n,i){var r=this;new Oo(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=new So[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearCoat&&(i.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(i.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(i.uniforms=e.uniforms),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.userData&&(i.userData=e.userData),// Deprecated
void 0!==e.shading&&(i.flatShading=1===e.shading),// THREE.FlatShading
// for PointsMaterial
void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),// maps
void 0!==e.map&&(i.map=n(e.map)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalScale){var r=e.normalScale;!1===Array.isArray(r)&&(// Blender exporter used to export a scalar. See #7459
r=[r,r]),i.normalScale=(new _t).fromArray(r)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),i}}),Object.assign(Oa.prototype,{load:function(e,t,n,i){var r=this;new Oo(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){var t=new dn,n=e.data.index;if(void 0!==n){var i=new Ia[n.type](n.array);t.setIndex(new Kt(i,1))}var r=e.data.attributes;for(var o in r){var a=r[o];i=new Ia[a.type](a.array);t.addAttribute(o,new Kt(i,a.itemSize,a.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var l=0,c=s.length;l!==c;++l){var u=s[l];t.addGroup(u.start,u.count,u.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var d=new Et;void 0!==h.center&&d.fromArray(h.center),t.boundingSphere=new It(d,h.radius)}return t}});var Ia={Int8Array,Uint8Array,// Workaround for IE11 pre KB2929437. See #11440
Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};
/**
 * @author alteredq / http://alteredqualia.com/
 */function Ba(){}Ba.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,i=t.length;n<i;n+=2){var r=t[n],o=t[n+1];if(r.test(e))return o}return null}},Object.assign(Ba.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var i=[],r=0;r<e.length;++r)i[r]=this.createMaterial(e[r],t,n);return i},createMaterial:function(){var e={NoBlending:v,NormalBlending:y,AdditiveBlending:x,SubtractiveBlending:b,MultiplyBlending:_,CustomBlending:w},t=new kt,n=new No,i=new Pa;return function(r,o,a){// convert from old material format
var s={};function l(e,t,i,r,l){var c,u=o+e,h=Ba.Handlers.get(u);null!==h?c=h.load(u):(n.setCrossOrigin(a),c=n.load(u)),void 0!==t&&(c.repeat.fromArray(t),1!==t[0]&&(c.wrapS=le),1!==t[1]&&(c.wrapT=le)),void 0!==i&&c.offset.fromArray(i),void 0!==r&&("repeat"===r[0]&&(c.wrapS=le),"mirror"===r[0]&&(c.wrapS=ue),"repeat"===r[1]&&(c.wrapT=le),"mirror"===r[1]&&(c.wrapT=ue)),void 0!==l&&(c.anisotropy=l);var d=bt.generateUUID();return s[d]=c,d}//
var c={uuid:bt.generateUUID(),type:"MeshLambertMaterial"};for(var u in r){var h=r[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=h;break;case"blending":c.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":c.color=t.fromArray(h).getHex();break;case"colorSpecular":c.specular=t.fromArray(h).getHex();break;case"colorEmissive":c.emissive=t.fromArray(h).getHex();break;case"specularCoef":c.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=l(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=l(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=l(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=l(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=l(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=l(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=l(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=l(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=l(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=l(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=d;break;case"doubleSided":c.side=p;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[u]=h;break;case"vertexColors":!0===h&&(c.vertexColors=g),"face"===h&&(c.vertexColors=m);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,h)}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,c.opacity<1&&(c.transparent=!0),i.setTextures(s),i.parse(c)}}()});
/**
 * @author Don McCurdy / https://www.donmccurdy.com
 */
var Da={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);// Avoid the String.fromCharCode.apply(null, array) shortcut, which
// throws a "maximum call stack size exceeded" error for large arrays.
for(var t="",n=0,i=e.length;n<i;n++)// Implicitly assumes little-endian.
t+=String.fromCharCode(e[n]);// Merges multi-byte utf-8 characters.
return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};
/**
 * @author mrdoob / http://mrdoob.com/
 * @author alteredq / http://alteredqualia.com/
 */function Ua(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Lo,this.withCredentials=!1}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Na(e){this.manager=void 0!==e?e:Lo,this.texturePath=""}Object.assign(Ua.prototype,{load:function(e,t,n,i){var r=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Da.extractUrlBase(e),a=new Oo(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(n){var i=JSON.parse(n),a=i.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var l=r.parse(i,o);t(l.geometry,l.materials)},n,i)},setTexturePath:function(e){this.texturePath=e},parse:function(){return function(e,t){void 0!==e.data&&(// Geometry 4.0 spec
e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var n=new Jt;return function(e,t){function n(e,t){return e&1<<t}var i,r,o,a,s,l,c,u,h,d,p,f,m,g,v,y,x,b,_,w,M,E,T,A,S,C=e.faces,R=e.vertices,L=e.normals,P=e.colors,O=e.scale,I=0;if(void 0!==e.uvs){// disregard empty arrays
for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&I++;for(i=0;i<I;i++)t.faceVertexUvs[i]=[]}for(a=0,s=R.length;a<s;)(b=new Et).x=R[a++]*O,b.y=R[a++]*O,b.z=R[a++]*O,t.vertices.push(b);for(a=0,s=C.length;a<s;)// console.log("type", type, "bits", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);
if(p=n(d=C[a++],0),f=n(d,1),m=n(d,3),g=n(d,4),v=n(d,5),y=n(d,6),x=n(d,7),p){if((w=new Qt).a=C[a],w.b=C[a+1],w.c=C[a+3],(M=new Qt).a=C[a+1],M.b=C[a+2],M.c=C[a+3],a+=4,f&&(h=C[a++],w.materialIndex=h,M.materialIndex=h),// to get face <=> uv index correspondence
o=t.faces.length,m)for(i=0;i<I;i++)for(A=e.uvs[i],t.faceVertexUvs[i][o]=[],t.faceVertexUvs[i][o+1]=[],r=0;r<4;r++)S=new _t(A[2*(u=C[a++])],A[2*u+1]),2!==r&&t.faceVertexUvs[i][o].push(S),0!==r&&t.faceVertexUvs[i][o+1].push(S);if(g&&(c=3*C[a++],w.normal.set(L[c++],L[c++],L[c]),M.normal.copy(w.normal)),v)for(i=0;i<4;i++)c=3*C[a++],T=new Et(L[c++],L[c++],L[c]),2!==i&&w.vertexNormals.push(T),0!==i&&M.vertexNormals.push(T);if(y&&(E=P[l=C[a++]],w.color.setHex(E),M.color.setHex(E)),x)for(i=0;i<4;i++)E=P[l=C[a++]],2!==i&&w.vertexColors.push(new kt(E)),0!==i&&M.vertexColors.push(new kt(E));t.faces.push(w),t.faces.push(M)}else{if((_=new Qt).a=C[a++],_.b=C[a++],_.c=C[a++],f&&(h=C[a++],_.materialIndex=h),// to get face <=> uv index correspondence
o=t.faces.length,m)for(i=0;i<I;i++)for(A=e.uvs[i],t.faceVertexUvs[i][o]=[],r=0;r<3;r++)S=new _t(A[2*(u=C[a++])],A[2*u+1]),t.faceVertexUvs[i][o].push(S);if(g&&(c=3*C[a++],_.normal.set(L[c++],L[c++],L[c])),v)for(i=0;i<3;i++)c=3*C[a++],T=new Et(L[c++],L[c++],L[c]),_.vertexNormals.push(T);if(y&&(l=C[a++],_.color.setHex(P[l])),x)for(i=0;i<3;i++)l=C[a++],_.vertexColors.push(new kt(P[l]));t.faces.push(_)}}(e,n),function(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,r=e.skinWeights.length;i<r;i+=n){var o=e.skinWeights[i],a=n>1?e.skinWeights[i+1]:0,s=n>2?e.skinWeights[i+2]:0,l=n>3?e.skinWeights[i+3]:0;t.skinWeights.push(new Ct(o,a,s,l))}if(e.skinIndices)for(i=0,r=e.skinIndices.length;i<r;i+=n){var c=e.skinIndices[i],u=n>1?e.skinIndices[i+1]:0,h=n>2?e.skinIndices[i+2]:0,d=n>3?e.skinIndices[i+3]:0;t.skinIndices.push(new Ct(c,u,h,d))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,n),function(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var i=0,r=e.morphTargets.length;i<r;i++){t.morphTargets[i]={},t.morphTargets[i].name=e.morphTargets[i].name,t.morphTargets[i].vertices=[];for(var o=t.morphTargets[i].vertices,a=e.morphTargets[i].vertices,s=0,l=a.length;s<l;s+=3){var c=new Et;c.x=a[s]*n,c.y=a[s+1]*n,c.z=a[s+2]*n,o.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var u=t.faces,h=e.morphColors[0].colors;for(i=0,r=u.length;i<r;i++)u[i].color.fromArray(h,3*i)}}(e,n),function(e,t){var n=[],i=[];// parse old style Bone/Hierarchy animations
void 0!==e.animation&&i.push(e.animation),void 0!==e.animations&&(e.animations.length?i=i.concat(e.animations):i.push(e.animations));for(var r=0;r<i.length;r++){var o=La.parseAnimation(i[r],t.bones);o&&n.push(o)}// parse implicit morph animations
if(t.morphTargets){// TODO: Figure out what an appropraite FPS is for morph target animations -- defaulting to 10, but really it is completely arbitrary.
var a=La.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(a)}n.length>0&&(t.animations=n)}(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:{geometry:n,materials:Ba.prototype.initMaterials(e.materials,t,this.crossOrigin)}}}()}),Object.assign(Na.prototype,{load:function(e,t,n,i){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var r=this;new Oo(r.manager).load(e,function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==i&&i(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},n,i)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,function(){void 0!==t&&t(s)}),o=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,i,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new aa).fromJSON(e[n]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var i=new Ua,r=new Oa,o=0,a=e.length;o<a;o++){var s,l=e[o];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new vo[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":// backwards compatible
s=new vo[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new vo[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new vo[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new vo[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new vo[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new vo[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new vo[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new vo[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new vo[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new vo[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new vo[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],u=0,h=l.shapes.length;u<h;u++){var d=t[l.shapes[u]];c.push(d)}s=new vo[l.type](c,l.curveSegments);break;case"BufferGeometry":s=r.parse(l);break;case"Geometry":s=i.parse(l,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}s.uuid=l.uuid,void 0!==l.name&&(s.name=l.name),n[l.uuid]=s}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var i=new Pa;i.setTextures(t);for(var r=0,o=e.length;r<o;r++){var a=e[r];if("MultiMaterial"===a.type){for(// Deprecated
var s=[],l=0;l<a.materials.length;l++)s.push(i.parse(a.materials[l]));n[a.uuid]=s}else n[a.uuid]=i.parse(a)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=La.parse(e[n]);t.push(i)}return t},parseImages:function(e,t){var n=this,i={};function r(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemEnd(e),n.manager.itemError(e)})}if(void 0!==e&&e.length>0){var o=new Do(new Ro(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var l=e[a],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.texturePath+l.url;i[l.uuid]=r(c)}}return i},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,o=e.length;r<o;r++){var a=e[r];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var s=new St(t[a.image]);s.needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping,ka)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=n(a.wrap[0],za),s.wrapT=n(a.wrap[1],za)),void 0!==a.format&&(s.format=a.format),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter,Ha)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter,Ha)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),i[a.uuid]=s}return i},parseObject:function(e,t,n){var i;function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var o=e[i];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new Vi,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new kt(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new Hi(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new zi(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new Ui(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new Yt(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new ma(e.color,e.intensity);break;case"DirectionalLight":i=new fa(e.color,e.intensity);break;case"PointLight":i=new da(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new ga(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new ha(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new la(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=r(e.geometry),s=o(e.material);i=a.bones&&a.bones.length>0?new Yi(a,s):new En(a,s);break;case"LOD":i=new Wi;break;case"Line":i=new Zi(r(e.geometry),o(e.material),e.mode);break;case"LineLoop":i=new Ki(r(e.geometry),o(e.material));break;case"LineSegments":i=new Ji(r(e.geometry),o(e.material));break;case"PointCloud":case"Points":i=new er(r(e.geometry),o(e.material));break;case"Sprite":i=new ji(o(e.material));break;case"Group":i=new tr;break;default:i=new Xt}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.children)for(var l=e.children,c=0;c<l.length;c++)i.add(this.parseObject(l[c],t,n));if("LOD"===e.type)for(var u=e.levels,h=0;h<u.length;h++){var d=u[h],p=i.getObjectByProperty("uuid",d.object);void 0!==p&&i.addLevel(p,d.distance)}return i}});var Fa,ka={UVMapping:300,CubeReflectionMapping:te,CubeRefractionMapping:ne,EquirectangularReflectionMapping:ie,EquirectangularRefractionMapping:re,SphericalReflectionMapping:oe,CubeUVReflectionMapping:ae,CubeUVRefractionMapping:se},za={RepeatWrapping:le,ClampToEdgeWrapping:ce,MirroredRepeatWrapping:ue},Ha={NearestFilter:he,NearestMipMapNearestFilter:de,NearestMipMapLinearFilter:pe,LinearFilter:fe,LinearMipMapNearestFilter:me,LinearMipMapLinearFilter:ge};
/**
 * @author thespite / http://clicktorelease.com/
 */
function Va(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Lo,this.options=void 0}
/**
 * @author zz85 / http://www.lab4games.net/zz85/blog
 * minimal class for proxing functions to Path. Replaces old "extractSubpaths()"
 **/
function Ga(){this.type="ShapePath",this.color=new kt,this.subPaths=[],this.currentPath=null}
/**
 * @author zz85 / http://www.lab4games.net/zz85/blog
 * @author mrdoob / http://mrdoob.com/
 */
function ja(e){this.type="Font",this.data=e}function Wa(e,t,n,i,r,o){var a=o.glyphs[e]||o.glyphs["?"];if(a){var s,l,c,u,h,d,p,f,m=new Ga;if(a.o)for(var g=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,y=g.length;v<y;){switch(g[v++]){case"m":// moveTo
s=g[v++]*n+i,l=g[v++]*n+r,m.moveTo(s,l);break;case"l":// lineTo
s=g[v++]*n+i,l=g[v++]*n+r,m.lineTo(s,l);break;case"q":// quadraticCurveTo
c=g[v++]*n+i,u=g[v++]*n+r,h=g[v++]*n+i,d=g[v++]*n+r,m.quadraticCurveTo(h,d,c,u);break;case"b":// bezierCurveTo
c=g[v++]*n+i,u=g[v++]*n+r,h=g[v++]*n+i,d=g[v++]*n+r,p=g[v++]*n+i,f=g[v++]*n+r,m.bezierCurveTo(h,d,p,f,c,u)}}return{offsetX:a.ha*n,path:m}}}
/**
 * @author mrdoob / http://mrdoob.com/
 */function Xa(e){this.manager=void 0!==e?e:Lo}Va.prototype={constructor:Va,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var r=this,o=Co.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,r.options)}).then(function(n){Co.add(e,n),t&&t(n),r.manager.itemEnd(e)}).catch(function(t){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(Ga.prototype,{moveTo:function(e,t){this.currentPath=new oa,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,i){this.currentPath.quadraticCurveTo(e,t,n,i)},bezierCurveTo:function(e,t,n,i,r,o){this.currentPath.bezierCurveTo(e,t,n,i,r,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],o=new aa;o.curves=r.curves,t.push(o)}return t}function i(e,t){for(var n=t.length,i=!1,r=n-1,o=0// inPt on polygon contour => immediate success    or
// toggling of inside/outside at every single! intersection point of an edge
//  with the horizontal line through inPt, left of inPt
//  not counting lowerY endpoints of edges and whole edges on that line
;o<n;r=o++){var a=t[r],s=t[o],l=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(// not parallel
c<0&&(a=t[o],l=-l,s=t[r],c=-c),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0;// inPt is on contour ?
// continue;				// no intersection or edgeLowPt => doesn't count !!!
}else{var u=c*(e.x-a.x)-l*(e.y-a.y);if(0===u)return!0;// inPt is on contour ?
if(u<0)continue;i=!i}}else{// parallel or collinear
if(e.y!==a.y)continue;// parallel
// edge lies on the same horizontal line as inPt
if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0;// inPt: Point on contour !
// continue;
}}return i}var r=Xr.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,l,c=[];if(1===o.length)return s=o[0],(l=new aa).curves=s.curves,c.push(l),c;var u=!r(o[0].getPoints());u=e?!u:u;// console.log("Holes first", holesFirst);
var h,d,p=[],f=[],m=[],g=0;f[g]=void 0,m[g]=[];for(var v=0,y=o.length;v<y;v++)a=r(h=(s=o[v]).getPoints()),(a=e?!a:a)?(!u&&f[g]&&g++,f[g]={s:new aa,p:h},f[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:h[0]});// only Holes? -> probably all Shapes with wrong orientation
if(!f[0])return n(o);if(f.length>1){for(var x=!1,b=[],_=0,w=f.length;_<w;_++)p[_]=[];for(_=0,w=f.length;_<w;_++)for(var M=m[_],E=0;E<M.length;E++){for(var T=M[E],A=!0,S=0;S<f.length;S++)i(T.p,f[S].p)&&(_!==S&&b.push({froms:_,tos:S,hole:E}),A?(A=!1,p[S].push(T)):x=!0);A&&p[_].push(T)}// console.log("ambiguous: ", ambiguous);
b.length>0&&(// console.log("to change: ", toChange);
x||(m=p))}v=0;for(var C=f.length;v<C;v++){l=f[v].s,c.push(l);for(var R=0,L=(d=m[v]).length;R<L;R++)l.holes.push(d[R].h)}//console.log("shape", shapes);
return c}}),Object.assign(ja.prototype,{isFont:!0,generateShapes:function(e,t,n){void 0===t&&(t=100),void 0===n&&(n=4);for(var i=[],r=function(e,t,n,i){for(var r=String(e).split(""),o=t/i.resolution,a=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*o,s=[],l=0,c=0,u=0;u<r.length;u++){var h=r[u];if("\n"===h)l=0,c-=a;else{var d=Wa(h,n,o,l,c,i);l+=d.offsetX,s.push(d.path)}}return s}(e,t,n,this.data),o=0,a=r.length;o<a;o++)Array.prototype.push.apply(i,r[o].toShapes());return i}}),Object.assign(Xa.prototype,{load:function(e,t,n,i){var r=this,o=new Oo(this.manager);o.setPath(this.path),o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var i=r.parse(n);t&&t(i)},n,i)},parse:function(e){return new ja(e)},setPath:function(e){return this.path=e,this}});var qa={getContext:function(){return void 0===Fa&&(Fa=new(window.AudioContext||window.webkitAudioContext)),Fa},setContext:function(e){Fa=e}};
/**
 * @author Reece Aaron Lecrivain / http://reecenotes.com/
 */function Ya(e){this.manager=void 0!==e?e:Lo}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Qa(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ui,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ui,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}
/**
 * Camera for rendering cube maps
 *	- renders scene into axis-aligned cube
 *
 * @author alteredq / http://alteredqualia.com/
 */
function Za(e,t,n){Xt.call(this),this.type="CubeCamera";var i=new Ui(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new Et(1,0,0)),this.add(i);var r=new Ui(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new Et(-1,0,0)),this.add(r);var o=new Ui(90,1,e,t);o.up.set(0,0,1),o.lookAt(new Et(0,1,0)),this.add(o);var a=new Ui(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new Et(0,-1,0)),this.add(a);var s=new Ui(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new Et(0,0,1)),this.add(s);var l=new Ui(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new Et(0,0,-1)),this.add(l);var c={format:Le,magFilter:fe,minFilter:fe};this.renderTarget=new Lt(n,n,c),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,c=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,i,n),n.activeCubeFace=1,e.render(t,r,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,s,n),n.texture.generateMipmaps=c,n.activeCubeFace=5,e.render(t,l,n),e.setRenderTarget(null)},this.clear=function(e,t,n,i){for(var r=this.renderTarget,o=0;o<6;o++)r.activeCubeFace=o,e.setRenderTarget(r),e.clear(t,n,i);e.setRenderTarget(null)}}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Ja(){Xt.call(this),this.type="AudioListener",this.context=qa.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author Reece Aaron Lecrivain / http://reecenotes.com/
 */
function Ka(e){Xt.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function $a(e){Ka.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function es(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}
/**
 *
 * Buffered scene graph property that allows weighted accumulation.
 *
 *
 * @author Ben Houston / http://clara.io/
 * @author David Sarno / http://lighthaus.us/
 * @author tschw
 */
function ts(e,t,n){this.binding=e,this.valueSize=n;var i,r=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),// layout: [ incoming | accu0 | accu1 | orig ]
//
// interpolators can use .buffer as their .result
// the data then goes to 'incoming'
//
// 'accu0' and 'accu1' are used frame-interleaved for
// the cumulative result and are compared to detect
// changes
//
// 'orig' stores the original state of the property
this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(Ya.prototype,{load:function(e,t,n,i){var r=new Oo(this.manager);r.setResponseType("arraybuffer"),r.load(e,function(e){qa.getContext().decodeAudioData(e,function(e){t(e)})},n,i)}}),Object.assign(Qa.prototype,{update:function(){var e,t,n,i,r,o,a,s,l=new wt,c=new wt;return function(u){if(e!==this||t!==u.focus||n!==u.fov||i!==u.aspect*this.aspect||r!==u.near||o!==u.far||a!==u.zoom||s!==this.eyeSep){e=this,t=u.focus,n=u.fov,i=u.aspect*this.aspect,r=u.near,o=u.far,a=u.zoom;// Off-axis stereoscopic effect based on
// http://paulbourke.net/stereographics/stereorender/
var h,d,p=u.projectionMatrix.clone(),f=(s=this.eyeSep/2)*r/t,m=r*Math.tan(bt.DEG2RAD*n*.5)/a;// translate xOffset
c.elements[12]=-s,l.elements[12]=s,// for left eye
h=-m*i+f,d=m*i+f,p.elements[0]=2*r/(d-h),p.elements[8]=(d+h)/(d-h),this.cameraL.projectionMatrix.copy(p),// for right eye
h=-m*i-f,d=m*i-f,p.elements[0]=2*r/(d-h),p.elements[8]=(d+h)/(d-h),this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(u.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(u.matrixWorld).multiply(l)}}()}),Za.prototype=Object.create(Xt.prototype),Za.prototype.constructor=Za,Ja.prototype=Object.assign(Object.create(Xt.prototype),{constructor:Ja,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01)},updateMatrixWorld:function(){var e=new Et,t=new Mt,n=new Et,i=new Et;return function(r){Xt.prototype.updateMatrixWorld.call(this,r);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),i.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(i.x,this.context.currentTime),o.forwardY.setValueAtTime(i.y,this.context.currentTime),o.forwardZ.setValueAtTime(i.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(i.x,i.y,i.z,a.x,a.y,a.z))}}()}),Ka.prototype=Object.assign(Object.create(Xt.prototype),{constructor:Ka,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),$a.prototype=Object.assign(Object.create(Ka.prototype),{constructor:$a,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new Et;return function(t){Xt.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(es.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(ts.prototype,{// accumulate data in the 'incoming' region into 'accu<i>'
accumulate:function(e,t){// note: happily accumulating nothing when weight = 0, the caller knows
// the weight and shouldn't have made the call in the first place
var n=this.buffer,i=this.valueSize,r=e*i+i,o=this.cumulativeWeight;if(0===o){// accuN := incoming * weight
for(var a=0;a!==i;++a)n[r+a]=n[a];o=t}else{var s=t/(// accuN := accuN + incoming * weight
o+=t);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=o},// apply the state of 'accu<i>' to the binding when accus differ
apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,r<1){// accuN := accuN + original * ( 1 - cumulativeWeight )
var a=3*t;this._mixBufferRegion(n,i,a,1-r,t)}for(var s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){// value has changed -> update scene graph
o.setValue(n,i);break}},// remember the state of the bound property and copy it to both accus
saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=3*n;e.getValue(t,i);// accu[0..1] := orig -- initially detect changes against the original
for(var r=n,o=i;r!==o;++r)t[r]=t[i+r%n];this.cumulativeWeight=0},// apply the state previously taken via 'saveOriginalState' to the binding
restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},// mix functions
_select:function(e,t,n,i,r){if(i>=.5)for(var o=0;o!==r;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,i){Mt.slerpFlat(e,t,e,t,e,n,i)},_lerp:function(e,t,n,i,r){for(var o=1-i,a=0;a!==r;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*i}}});
/**
 *
 * A reference to a real property in the scene graph.
 *
 *
 * @author Ben Houston / http://clara.io/
 * @author David Sarno / http://lighthaus.us/
 * @author tschw
 */
// Characters [].:/ are reserved for track binding syntax.
var ns,is;function rs(e,t,n){var i=n||os.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function os(e,t,n){this.path=t,this.parsedPath=n||os.parseTrackName(t),this.node=os.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}
/**
 *
 * A group of objects that receives a shared animation state.
 *
 * Usage:
 *
 * 	-	Add objects you would otherwise pass as 'root' to the
 * 		constructor or the .clipAction method of AnimationMixer.
 *
 * 	-	Instead pass this object as 'root'.
 *
 * 	-	You can also add and remove objects later when the mixer
 * 		is running.
 *
 * Note:
 *
 *  	Objects of this class appear as one object to the mixer,
 *  	so cache control of the individual objects must be done
 *  	on the group.
 *
 * Limitation:
 *
 * 	- 	The animated properties must be compatible among the
 * 		all objects in the group.
 *
 *  -	A single property can either be controlled through a
 *  	target group or directly, but not both.
 *
 * @author tschw
 */
function as(){this.uuid=bt.generateUUID(),// cached objects followed by the active ones
this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;// threshold
// note: read by PropertyBinding.Composite
var e={};this._indicesByUUID=e;// for bookkeeping
for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],// inside: string
this._parsedPaths=[],// inside: { we don't care, here }
this._bindings=[],// inside: Array< PropertyBinding >
this._bindingsIndicesByPath={};// inside: indices in these arrays
var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}
/**
 *
 * Action provided by AnimationMixer for scheduling clip playback on specific
 * objects.
 *
 * @author Ben Houston / http://clara.io/
 * @author David Sarno / http://lighthaus.us/
 * @author tschw
 *
 */
function ss(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var i=t.tracks,r=i.length,o=new Array(r),a={endingStart:st,endingEnd:st},s=0;s!==r;++s){var l=i[s].createInterpolant(null);o[s]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=o,// bound by the mixer
// inside: PropertyMixer (managed by the mixer)
this._propertyBindings=new Array(r),this._cacheIndex=null,// for the memory manager
this._byClipCacheIndex=null,// for the memory manager
this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=at,this._loopCount=-1,// global mixer time when the action is to be started
// it's set back to 'null' upon start of the action
this._startTime=null,// scaled local time of the action
// gets clamped or wrapped to 0..clip.duration according to loop
this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,// no. of repetitions when looping
this.paused=!1,// true -> zero effective time scale
this.enabled=!0,// false -> zero effective weight
this.clampWhenFinished=!1,// keep feeding the last frame?
this.zeroSlopeAtStart=!0,// for smooth interpolation w/o separate
this.zeroSlopeAtEnd=!0}
/**
 *
 * Player for AnimationClips.
 *
 *
 * @author Ben Houston / http://clara.io/
 * @author David Sarno / http://lighthaus.us/
 * @author tschw
 */
function ls(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function cs(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}
/**
 * @author benaadams / https://twitter.com/ben_a_adams
 */
function us(){dn.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}
/**
 * @author benaadams / https://twitter.com/ben_a_adams
 */
function hs(e,t,n,i){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}
/**
 * @author benaadams / https://twitter.com/ben_a_adams
 */
function ds(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}
/**
 * @author benaadams / https://twitter.com/ben_a_adams
 */
function ps(e,t,n){ds.call(this,e,t),this.meshPerAttribute=n||1}
/**
 * @author benaadams / https://twitter.com/ben_a_adams
 */
function fs(e,t,n){Kt.call(this,e,t),this.meshPerAttribute=n||1}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author bhouston / http://clara.io/
 * @author stephomi / http://stephaneginier.com/
 */
function ms(e,t,n,i){this.ray=new _n(e,t),// direction is assumed to be normalized (for accurate distance calculations)
this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function gs(e,t){return e.distance-t.distance}function vs(e,t,n,i){if(!1!==e.visible&&(e.raycast(t,n),!0===i))for(var r=e.children,o=0,a=r.length;o<a;o++)vs(r[o],t,n,!0)}
/**
 * @author alteredq / http://alteredqualia.com/
 */
function ys(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}
/**
 * @author bhouston / http://clara.io
 * @author WestLangley / http://github.com/WestLangley
 *
 * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system
 *
 * The poles (phi) are at the positive and negative y axis.
 * The equator starts at positive z.
 */
function xs(e,t,n){// around the equator of the sphere
return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,// up / down towards top and bottom pole
this.theta=void 0!==n?n:0,this}
/**
 * @author Mugen87 / https://github.com/Mugen87
 *
 * Ref: https://en.wikipedia.org/wiki/Cylindrical_coordinate_system
 *
 */
function bs(e,t,n){// height above the x-z plane
return this.radius=void 0!==e?e:1,// distance from the origin to a point in the x-z plane
this.theta=void 0!==t?t:0,// counterclockwise angle in the x-z plane measured in radians from the positive z-axis
this.y=void 0!==n?n:0,this}
/**
 * @author bhouston / http://clara.io
 */
function _s(e,t){this.min=void 0!==e?e:new _t(1/0,1/0),this.max=void 0!==t?t:new _t(-1/0,-1/0)}
/**
 * @author alteredq / http://alteredqualia.com/
 */
function ws(e){Xt.call(this),this.material=e,this.render=function(){}}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author WestLangley / http://github.com/WestLangley
 */
function Ms(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16711680,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);//
var l=new dn,c=new sn(2*a*3,3);l.addAttribute("position",c),Ji.call(this,l,new Qi({color:r,linewidth:o})),//
this.matrixAutoUpdate=!1,this.update()}
/**
 * @author alteredq / http://alteredqualia.com/
 * @author mrdoob / http://mrdoob.com/
 * @author WestLangley / http://github.com/WestLangley
 */
function Es(e,t){Xt.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new dn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1;r<32;r++,o++){var a=r/32*Math.PI*2,s=o/32*Math.PI*2;i.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new sn(i,3));var l=new Qi({fog:!1});this.cone=new Ji(n,l),this.add(this.cone),this.update()}function Ts(e){for(var t=
/**
 * @author Sean Griffin / http://twitter.com/sgrif
 * @author Michael Guerrero / http://realitymeltdown.com
 * @author mrdoob / http://mrdoob.com/
 * @author ikerr / http://verold.com
 * @author Mugen87 / https://github.com/Mugen87
 */
function e(t){var n=[];t&&t.isBone&&n.push(t);for(var i=0;i<t.children.length;i++)n.push.apply(n,e(t.children[i]));return n}(e),n=new dn,i=[],r=[],o=new kt(0,0,1),a=new kt(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.addAttribute("position",new sn(i,3)),n.addAttribute("color",new sn(r,3));var c=new Qi({vertexColors:g,depthTest:!1,depthWrite:!1,transparent:!0});Ji.call(this,n,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}
/**
 * @author alteredq / http://alteredqualia.com/
 * @author mrdoob / http://mrdoob.com/
 */
function As(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var i=new to(t,4,2),r=new xn({wireframe:!0,fog:!1});En.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}
/**
 * @author abelnation / http://github.com/abelnation
 * @author Mugen87 / http://github.com/Mugen87
 * @author WestLangley / http://github.com/WestLangley
 */
function Ss(e,t){Xt.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new Qi({fog:!1}),i=new dn;i.addAttribute("position",new Kt(new Float32Array(15),3)),this.line=new Zi(i,n),this.add(this.line),this.update()}
/**
 * @author alteredq / http://alteredqualia.com/
 * @author mrdoob / http://mrdoob.com/
 * @author Mugen87 / https://github.com/Mugen87
 */
function Cs(e,t,n){Xt.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new pr(t);i.rotateY(.5*Math.PI),this.material=new xn({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=g);var r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.addAttribute("color",new Kt(o,3)),this.add(new En(i,this.material)),this.update()}
/**
 * @author mrdoob / http://mrdoob.com/
 */
function Rs(e,t,n,i){e=e||10,t=t||10,n=new kt(void 0!==n?n:4473924),i=new kt(void 0!==i?i:8947848);for(var r=t/2,o=e/t,a=e/2,s=[],l=[],c=0,u=0,h=-a;c<=t;c++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var d=c===r?n:i;d.toArray(l,u),u+=3,d.toArray(l,u),u+=3,d.toArray(l,u),u+=3,d.toArray(l,u),u+=3}var p=new dn;p.addAttribute("position",new sn(s,3)),p.addAttribute("color",new sn(l,3));var f=new Qi({vertexColors:g});Ji.call(this,p,f)}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author Mugen87 / http://github.com/Mugen87
 * @author Hectate / http://www.github.com/Hectate
 */
function Ls(e,t,n,i,r,o){e=e||10,t=t||16,n=n||8,i=i||64,r=new kt(void 0!==r?r:4473924),o=new kt(void 0!==o?o:8947848);var a,s,l,c,u,h,d,p=[],f=[];// create the radials
for(c=0;c<=t;c++)l=c/t*(2*Math.PI),a=Math.sin(l)*e,s=Math.cos(l)*e,p.push(0,0,0),p.push(a,0,s),d=1&c?r:o,f.push(d.r,d.g,d.b),f.push(d.r,d.g,d.b);// create the circles
for(c=0;c<=n;c++)for(d=1&c?r:o,h=e-e/n*c,u=0;u<i;u++)// first vertex
l=u/i*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,p.push(a,0,s),f.push(d.r,d.g,d.b),// second vertex
l=(u+1)/i*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,p.push(a,0,s),f.push(d.r,d.g,d.b);var m=new dn;m.addAttribute("position",new sn(p,3)),m.addAttribute("color",new sn(f,3));var v=new Qi({vertexColors:g});Ji.call(this,m,v)}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author WestLangley / http://github.com/WestLangley
 */
function Ps(e,t,n,i){// FaceNormalsHelper only supports THREE.Geometry
this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16776960,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");//
var l=new dn,c=new sn(2*a*3,3);l.addAttribute("position",c),Ji.call(this,l,new Qi({color:r,linewidth:o})),//
this.matrixAutoUpdate=!1,this.update()}
/**
 * @author alteredq / http://alteredqualia.com/
 * @author mrdoob / http://mrdoob.com/
 * @author WestLangley / http://github.com/WestLangley
 */
function Os(e,t,n){Xt.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var i=new dn;i.addAttribute("position",new sn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new Qi({fog:!1});this.lightPlane=new Zi(i,r),this.add(this.lightPlane),(i=new dn).addAttribute("position",new sn([0,0,0,0,0,1],3)),this.targetLine=new Zi(i,r),this.add(this.targetLine),this.update()}
/**
 * @author alteredq / http://alteredqualia.com/
 * @author Mugen87 / https://github.com/Mugen87
 *
 *	- shows frustum, line of sight and up of the camera
 *	- suitable for fast updates
 * 	- based on frustum visualization in lightgl.js shadowmap example
 *		http://evanw.github.com/lightgl.js/tests/shadowmap.html
 */
function Is(e){var t=new dn,n=new Qi({color:16777215,vertexColors:m}),i=[],r=[],o={},a=new kt(16755200),s=new kt(16711680),l=new kt(43775),c=new kt(16777215),u=new kt(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(i.length/3-1)}// near
h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),// far
h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),// sides
h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),// cone
h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),// up
h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),// target
h("c","t",c),h("p","c",u),// cross
h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.addAttribute("position",new sn(i,3)),t.addAttribute("color",new sn(r,3)),Ji.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}
/**
 * @author mrdoob / http://mrdoob.com/
 * @author Mugen87 / http://github.com/Mugen87
 */
function Bs(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new dn;r.setIndex(new Kt(n,1)),r.addAttribute("position",new Kt(i,3)),Ji.call(this,r,new Qi({color:t})),this.matrixAutoUpdate=!1,this.update()}
/**
 * @author WestLangley / http://github.com/WestLangley
 */
function Ds(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new dn;r.setIndex(new Kt(i,1)),r.addAttribute("position",new sn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ji.call(this,r,new Qi({color:n})),this.geometry.computeBoundingSphere()}
/**
 * @author WestLangley / http://github.com/WestLangley
 */
function Us(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var i=void 0!==n?n:16776960,r=new dn;r.addAttribute("position",new sn([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),Zi.call(this,r,new Qi({color:i}));//
var o=new dn;o.addAttribute("position",new sn([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new En(o,new xn({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function Ns(e,t,n,i,r,o){// dir is assumed to be normalized
Xt.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),void 0===ns&&((ns=new dn).addAttribute("position",new sn([0,0,0,0,1,0],3)),(is=new ho(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Zi(ns,new Qi({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new En(is,new xn({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}
/**
 * @author sroucheray / http://sroucheray.org/
 * @author mrdoob / http://mrdoob.com/
 */
function Fs(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new dn;n.addAttribute("position",new sn(t,3)),n.addAttribute("color",new sn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new Qi({vertexColors:g});Ji.call(this,n,i)}Object.assign(rs.prototype,{getValue:function(e,t){this.bind();// bind all binding
var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];// and only call .getValue on the first
void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(os,{Composite:rs,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new os.Composite(e,t,n):new os(e,t,n)},
/**
	 * Replaces spaces with underscores and removes unsupported characters from
	 * node names, to ensure compatibility with parseTrackName().
	 *
	 * @param  {string} name Node name to be sanitized.
	 * @return {string}
	 */
sanitizeNodeName:function(){var e=new RegExp("[\\[\\]\\.:\\/]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){// Attempts to allow node names from any language. ES5's `\w` regexp matches
// only latin characters, and the unicode \p{L} is not yet supported. So
// instead, we exclude reserved characters and match everything else.
var e="[^\\[\\]\\.:\\/]",t="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",e),i=/(WCOD+)?/.source.replace("WCOD",t),r=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),a=new RegExp("^"+n+i+r+o+"$"),s=["material","materials","bones"];return function(e){var t=a.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={// directoryName: matches[ 1 ], // (tschw) currently unused
nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],// required
propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);// Object names must be checked against a whitelist. Otherwise, there
// is no way to parse 'foo.bar.baz': 'baz' must be a property, but
// 'bar' could be the objectName, or part of a nodeName (which can
// include '.' characters).
-1!==s.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;// search into skeleton bones.
if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}// search into node subtree.
if(e.children){var i=function e(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===t||r.uuid===t)return r;var o=e(r.children);if(o)return o}return null}(e.children);if(i)return i}return null}}),Object.assign(os.prototype,{// prototype, continued
// these are used to "bind" a nonexistent property
_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[// Direct
function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[// EntireArray
function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[// ArrayElement
function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[// HasToFromArray
function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},// create getter / setter pair for a property in the scene graph
bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;// ensure there is a value node
if(e||(e=os.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),// set fail state so we can just 'return' on error
this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;// special cases were we need to reach deeper into the hierarchy to get the face materials....
switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);// potential future optimization: skip this if propertyIndex is already an integer
// and convert the integer string to a true integer.
e=e.skeleton.bones;// support resolving morphTarget names into indices.
for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}// resolve property
var s=e[i];if(void 0!==s){// determine versioning scheme
var l=this.Versioning.None;void 0!==e.needsUpdate?(// material
l=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(// node transform
l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);// determine how the property gets bound
var c=this.BindingType.Direct;if(void 0!==r){// access a sub element of the property array (only primitives are supported right now)
if("morphTargetInfluences"===i){// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.
// support resolving morphTarget names into indices.
if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===r){r=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===r){r=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(// must use copy for Object3D.Euler/Quaternion
c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;// select getter / setter
this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,// back to the prototype version of getValue / setValue
// note: avoiding to mutate the shape of 'this' via 'delete'
this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(os.prototype,{// initial state of these methods that calls 'bind'
_getValue_unbound:os.prototype.getValue,_setValue_unbound:os.prototype.setValue}),Object.assign(as.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,l=void 0,c=0,u=arguments.length;c!==u;++c){var h=arguments[c],d=h.uuid,p=i[d];if(void 0===p){// unknown object -> add it to the ACTIVE region
p=t++,i[d]=p,e.push(h);// accounting is done, now do the same for all bindings
for(var f=0,m=s;f!==m;++f)a[f].push(new os(h,r[f],o[f]))}else if(p<n){l=e[p];// move existing object to the ACTIVE region
var g=--n,v=e[g];i[v.uuid]=p,e[p]=v,i[d]=g,e[g]=h;// accounting is done, now do the same for all bindings
for(f=0,m=s;f!==m;++f){var y=a[f],x=y[g],b=y[p];y[p]=x,void 0===b&&(// since we do not bother to create new bindings
// for objects that are cached, the binding may
// or may not exist
b=new os(h,r[f],o[f])),y[g]=b}}else e[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.");// else the object is already where we want it to be
}// for arguments
this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,c=n[l];if(void 0!==c&&c>=t){// move existing object into the CACHED region
var u=t++,h=e[u];n[h.uuid]=c,e[c]=h,n[l]=u,e[u]=s;// accounting is done, now do the same for all bindings
for(var d=0,p=r;d!==p;++d){var f=i[d],m=f[u],g=f[c];f[c]=m,f[u]=g}}}// for arguments
this.nCachedObjects_=t},// remove & forget
uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,o=r.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a].uuid,c=i[l];if(void 0!==c)if(delete i[l],c<n){// object is cached, shrink the CACHED region
var u=--n,h=e[u],d=e[v=--t];// last cached object takes this object's place
i[h.uuid]=c,e[c]=h,// last object goes to the activated slot and pop
i[d.uuid]=u,e[u]=d,e.pop();// accounting is done, now do the same for all bindings
for(var p=0,f=o;p!==f;++p){var m=(y=r[p])[u],g=y[v];y[c]=m,y[u]=g,y.pop()}}else{// object is active, just swap with the last and pop
var v;i[(d=e[v=--t]).uuid]=c,e[c]=d,e.pop();// accounting is done, now do the same for all bindings
for(p=0,f=o;p!==f;++p){var y;(y=r[p])[c]=y[v],y.pop()}}// cached or active
// if object is known
}// for arguments
this.nCachedObjects_=n},// Internal interface used by befriended PropertyBinding.Composite:
subscribe_:function(e,t){// returns an array of bindings for the given path that is changed
// according to the contained objects in the group
var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[e]=i,o.push(e),a.push(t),r.push(u);for(var h=c,d=s.length;h!==d;++h){var p=s[h];u[h]=new os(p,e,t)}return u},unsubscribe_:function(e){// tells the group to forget about a property path and no longer
// update the array previously obtained with 'subscribe_'
var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}),Object.assign(ss.prototype,{// State & Scheduling
play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){// forget scheduling
return this.paused=!1,this.enabled=!0,this.time=0,// restart clip
this._loopCount=-1,// forget previous loops
this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},// return true when play has been called
isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},// Weight
// set the weight stopping any scheduled fading
// although .enabled = false yields an effective weight of zero, this
// method does *not* change .enabled, because it would be confusing
setEffectiveWeight:function(e){return this.weight=e,// note: same logic as when updated at runtime
this._effectiveWeight=this.enabled?e:0,this.stopFading()},// return the weight considering fading and .enabled
getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,o=r/i,a=i/r;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},// Time Scale Control
// set the time scale stopping any scheduled warping
// although .paused = true yields an effective time scale of zero, this
// method does *not* change .paused, because it would be confusing
setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},// return the time scale considering warping and .paused
getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=e/a,l[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},// Object Accessors
getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},// Interna
_update:function(e,t,n,i){// called by the mixer
if(this.enabled){var r=this._startTime;if(null!==r){// check for scheduled start of action
var o=(e-r)*n;if(o<0||0===n)return;// yet to come / don't decide when delta = 0
// start
this._startTime=null,// unschedule
t=n*o}// apply time scale and advance time
t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);// note: _updateTime may disable the action resulting in
// an effective weight of 0
if(s>0)for(var l=this._interpolants,c=this._propertyBindings,u=0,h=l.length;u!==h;++u)l[u].evaluate(a),c[u].accumulate(i,s)}else// call ._updateWeight() to update ._effectiveWeight
this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(// faded out, disable
this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?// motion has halted, pause
this.paused=!0:// warp done - apply final time scale
this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,i=this.loop,r=this._loopCount;if(2200===i){-1===r&&(// just started
this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{// repetitive Repeat or PingPong
var o=2202===i;if(-1===r&&(// just started
e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):// when looping in reverse direction, the initial
// transition through zero counts as a repetition,
// so leave loopCount at -1
this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){// wrap around
var a=Math.floor(t/n);// signed
t-=n*a,r+=Math.abs(a);var s=this.repetitions-r;if(s<=0)// have to stop (switch state, clamp time, fire event)
this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{// keep running
if(1===s){// entering the last round
var l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&r))// invert time for the "pong round"
return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(// assuming for LoopOnce atStart == atEnd == true
i.endingStart=e?this.zeroSlopeAtStart?2401:st:2402,i.endingEnd=t?this.zeroSlopeAtEnd?2401:st:2402)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=t,a[1]=r+e,s[1]=n,this}}),ls.prototype=Object.assign(Object.create(r.prototype),{constructor:ls,_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,c=l[s];void 0===c&&(c={},l[s]=c);for(var u=0;u!==r;++u){var h=i[u],d=h.name,p=c[d];if(void 0!==p)o[u]=p;else{if(void 0!==(p=o[u])){// existing binding, make sure the cache knows
null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}var f=t&&t._propertyBindings[u].binding.parsedPath;++(p=new ts(os.create(n,d,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,s,d),o[u]=p}a[u].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){// this action has been forgotten by the cache, but the user
// appears to be still using it -> rebind
var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}// increment reference counts / sort out state
for(var r=e._propertyBindings,o=0,a=r.length;o!==a;++o){var s=r[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){// decrement reference counts / sort out state
for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},// Memory manager
_initMemoryManager:function(){this._actions=[],// 'nActiveActions' followed by inactive ones
this._nActiveActions=0,this._actionsByClip={},// inside:
// {
// 		knownActions: Array< AnimationAction >	- used as prototypes
// 		actionByRoot: AnimationAction			- lookup
// }
this._bindings=[],// 'nActiveBindings' followed by inactive ones
this._nActiveBindings=0,this._bindingsByRootAndName={},// inside: Map< name, PropertyMixer >
this._controlInterpolants=[],// same game as above
this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},// Memory management for AnimationAction objects
_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){// [ active actions |  inactive actions  ]
// [  active actions >| inactive actions ]
//                 s        a
//                  <-swap->
//                 a        s
var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){// [  active actions  | inactive actions ]
// [ active actions |< inactive actions  ]
//        a        s
//         <-swap->
//        s        a
var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},// Memory management for PropertyMixer objects
_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],o=this._bindings;void 0===r&&(r={},i[t]=r),r[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[r];e:{for(var c in a)break e;// eslint-disable-line no-unused-vars
delete o[i]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},// Memory management of Interpolants for weight and time scale
_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Ta(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),// return an action for a clip optionally using a custom root target
// object (this method allocates a lot of dynamic memory in case a
// previously unknown clip/root combination is specified)
clipAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?La.findByName(n,e):e,o=null!==r?r.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var l=a.actionByRoot[i];if(void 0!==l)return l;// we know the clip, so we don't have to parse all
// the bindings again but can just copy
s=a.knownActions[0],// also, take the clip from the prototype action
null===r&&(r=s._clip)}// clip must be known when specified via string
if(null===r)return null;// allocate all resources required to run it
var c=new ss(this,r,t);return this._bindAction(c,s),// and make the action known to the memory manager
this._addInactiveAction(c,o,i),c},// get an existing action
existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?La.findByName(n,e):e,o=r?r.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null},// deactivates all previously scheduled actions
stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},// advance the time and update apply the animation
update:function(e){e*=this.timeScale;// run active actions
for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(i,e,r,o)}// update scene graph
var s=this._bindings,l=this._nActiveBindings;for(a=0;a!==l;++a)s[a].apply(o);return this},// return this mixer's root target object
getRoot:function(){return this._root},// free all resources specific to a particular clip
uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(// note: just calling _removeInactiveAction would mess up the
// iteration state and also require updating the state we can
// just throw away
var o=r.knownActions,a=0,s=o.length;a!==s;++a){var l=o[a];this._deactivateAction(l);var c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},// free all resources specific to a particular root target object
uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},// remove a targeted clip from the cache
uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),cs.prototype.clone=function(){return new cs(void 0===this.value.clone?this.value:this.value.clone())},us.prototype=Object.assign(Object.create(dn.prototype),{constructor:us,isInstancedBufferGeometry:!0,copy:function(e){return dn.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(hs.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(hs.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}}),Object.defineProperty(ds.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(ds.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),ps.prototype=Object.assign(Object.create(ds.prototype),{constructor:ps,isInstancedInterleavedBuffer:!0,copy:function(e){return ds.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),fs.prototype=Object.assign(Object.create(Kt.prototype),{constructor:fs,isInstancedBufferAttribute:!0,copy:function(e){return Kt.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(ms.prototype,{linePrecision:1,set:function(e,t){// direction is assumed to be normalized (for accurate distance calculations)
this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),// set origin in plane of camera
this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var i=n||[];return vs(e,this,i,t),i.sort(gs),i},intersectObjects:function(e,t,n){var i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,o=e.length;r<o;r++)vs(e[r],this,i,t);return i.sort(gs),i}}),Object.assign(ys.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),// see #10732
this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(xs.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},// restrict phi to be betwee EPS and PI-EPS
makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),// equator angle around y-up axis
this.phi=Math.acos(bt.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(bs.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(_s.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new _t;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes
return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new _t),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new _t),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){// This can potentially have a divide by zero if the box
// has a size dimension of 0.
return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new _t),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){// using 4 splitting planes to rule out intersections
return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new _t),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new _t;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),ws.prototype=Object.create(Xt.prototype),ws.prototype.constructor=ws,ws.prototype.isImmediateRenderObject=!0,Ms.prototype=Object.create(Ji.prototype),Ms.prototype.constructor=Ms,Ms.prototype.update=function(){var e=new Et,t=new Et,n=new Tt;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,l=a.faces,c=0,u=0,h=l.length;u<h;u++)for(var d=l[u],p=0,f=d.vertexNormals.length;p<f;p++){var m=s[d[i[p]]],g=d.vertexNormals[p];e.copy(m).applyMatrix4(r),t.copy(g).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}else if(a&&a.isBufferGeometry){var v=a.attributes.position,y=a.attributes.normal;// for simplicity, ignore index and drawcalls, and render every normal
for(c=0,p=0,f=v.count;p<f;p++)e.set(v.getX(p),v.getY(p),v.getZ(p)).applyMatrix4(r),t.set(y.getX(p),y.getY(p),y.getZ(p)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}o.needsUpdate=!0}}(),Es.prototype=Object.create(Xt.prototype),Es.prototype.constructor=Es,Es.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Es.prototype.update=function(){var e=new Et,t=new Et;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Ts.prototype=Object.create(Ji.prototype),Ts.prototype.constructor=Ts,Ts.prototype.updateMatrixWorld=function(){var e=new Et,t=new wt,n=new wt;return function(i){var r=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<r.length;s++){var c=r[s];c.parent&&c.parent.isBone&&(t.multiplyMatrices(n,c.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(n,c.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l+1,e.x,e.y,e.z),l+=2)}o.getAttribute("position").needsUpdate=!0,Xt.prototype.updateMatrixWorld.call(this,i)}}(),As.prototype=Object.create(En.prototype),As.prototype.constructor=As,As.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},As.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)
/*
	var d = this.light.distance;

	if ( d === 0.0 ) {

		this.lightDistance.visible = false;

	} else {

		this.lightDistance.visible = true;
		this.lightDistance.scale.set( d, d, d );

	}
	*/},Ss.prototype=Object.create(Xt.prototype),Ss.prototype.constructor=Ss,Ss.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ss.prototype.update=function(){// calculate new dimensions of the helper
var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,i=n.array;// update vertices
i[0]=e,i[1]=-t,i[2]=0,i[3]=e,i[4]=t,i[5]=0,i[6]=-e,i[7]=t,i[8]=0,i[9]=-e,i[10]=-t,i[11]=0,i[12]=e,i[13]=-t,i[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},Cs.prototype=Object.create(Xt.prototype),Cs.prototype.constructor=Cs,Cs.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Cs.prototype.update=function(){var e=new Et,t=new kt,n=new kt;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=r.count;o<a;o++){var s=o<a/2?t:n;r.setXYZ(o,s.r,s.g,s.b)}r.needsUpdate=!0}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Rs.prototype=Object.create(Ji.prototype),Rs.prototype.constructor=Rs,Ls.prototype=Object.create(Ji.prototype),Ls.prototype.constructor=Ls,Ps.prototype=Object.create(Ji.prototype),Ps.prototype.constructor=Ps,Ps.prototype.update=function(){var e=new Et,t=new Et,n=new Tt;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,l=0,c=0,u=s.length;c<u;c++){var h=s[c],d=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(i),t.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),r.setXYZ(l,e.x,e.y,e.z),l+=1,r.setXYZ(l,t.x,t.y,t.z),l+=1}r.needsUpdate=!0}}(),Os.prototype=Object.create(Xt.prototype),Os.prototype.constructor=Os,Os.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Os.prototype.update=function(){var e=new Et,t=new Et,n=new Et;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),Is.prototype=Object.create(Ji.prototype),Is.prototype.constructor=Is,Is.prototype.update=function(){var e,t,n=new Et,i=new qt;function r(r,o,a,s){n.set(o,a,s).unproject(i);var l=t[r];if(void 0!==l)for(var c=e.getAttribute("position"),u=0,h=l.length;u<h;u++)c.setXYZ(l[u],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;// we need just camera projection matrix
// world matrix must be identity
i.projectionMatrix.copy(this.camera.projectionMatrix),// center / target
r("c",0,0,-1),r("t",0,0,1),// near
r("n1",-1,-1,-1),r("n2",1,-1,-1),r("n3",-1,1,-1),r("n4",1,1,-1),// far
r("f1",-1,-1,1),r("f2",1,-1,1),r("f3",-1,1,1),r("f4",1,1,1),// up
r("u1",.7,1.1,-1),r("u2",-.7,1.1,-1),r("u3",0,2,-1),// cross
r("cf1",-1,0,1),r("cf2",1,0,1),r("cf3",0,-1,1),r("cf4",0,1,1),r("cn1",-1,0,-1),r("cn2",1,0,-1),r("cn3",0,-1,-1),r("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),Bs.prototype=Object.create(Ji.prototype),Bs.prototype.constructor=Bs,Bs.prototype.update=function(){var e=new Ot;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,i=e.max,r=this.geometry.attributes.position,o=r.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=n.x,o[4]=i.y,o[5]=i.z,o[6]=n.x,o[7]=n.y,o[8]=i.z,o[9]=i.x,o[10]=n.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=n.z,o[15]=n.x,o[16]=i.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=i.x,o[22]=n.y,o[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Bs.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Ds.prototype=Object.create(Ji.prototype),Ds.prototype.constructor=Ds,Ds.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Xt.prototype.updateMatrixWorld.call(this,e))},Us.prototype=Object.create(Zi.prototype),Us.prototype.constructor=Us,Us.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),// sign does not matter
this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),Xt.prototype.updateMatrixWorld.call(this,e)},Ns.prototype=Object.create(Xt.prototype),Ns.prototype.constructor=Ns,Ns.prototype.setDirection=function(){var e,t=new Et;return function(n){// dir is assumed to be normalized
n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),Ns.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Ns.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},Fs.prototype=Object.create(Ji.prototype),Fs.prototype.constructor=Fs;//
function ks(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Xo.call(this,e),this.type="catmullrom",this.closed=!0}//
function zs(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Xo.call(this,e),this.type="catmullrom"}//
function Hs(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Xo.call(this,e),this.type="catmullrom"}//
Fo.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Fo.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},//
Object.assign(ra.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");// generate geometry from path points (for Line or Points objects)
var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");// generate geometry from equidistant sampling along the path
var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Jt,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new Et(r.x,r.y,r.z||0))}return t}}),//
Object.assign(oa.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),ks.prototype=Object.create(Xo.prototype),zs.prototype=Object.create(Xo.prototype),Hs.prototype=Object.create(Xo.prototype),Object.assign(Hs.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Rs.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Ts.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},//
Object.assign(Ba.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Da.extractUrlBase(e)}}),//
Object.assign(_s.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Ot.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),wn.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(bt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),bt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),bt.ceilPowerOfTwo(e)}}),Object.assign(Tt.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e/*, offset, length */){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(wt.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new Et),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e/*, offset, length */){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,o)}}),Bt.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Mt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(_n.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Mn.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Mn,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Mn.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Mn.getNormal(e,t,n,i)}}),Object.assign(aa.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Qr(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ao(this,e)}}),Object.assign(_t.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Et.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ct.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),//
Object.assign(Jt.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(Xt.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(Xt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Wi.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Xi.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Fo.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),//
Ui.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},//
Object.defineProperties(sa.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),//
Object.defineProperties(Kt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(dn.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(dn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),//
Object.assign(Zr.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),//
Object.defineProperties(cs.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),//
Object.defineProperties(yn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new kt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(wo.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(bn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),//
Object.assign(ki.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(ki.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Pi.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),//
Object.defineProperties(Rt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),//
Object.defineProperties(Fi.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),//
Ka.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Ya).load(e,function(e){t.setBuffer(e)}),this},es.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},//
Za.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};//
var Vs={merge:function(e,t,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},Gs={crossOrigin:void 0,loadTexture:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new No;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},loadTextureCube:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Uo;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};//
var js={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};//
t.WebGLRenderTargetCube=Lt,t.WebGLRenderTarget=Rt,t.WebGLRenderer=ki,t.ShaderLib=Ht,t.UniformsLib=zt,t.UniformsUtils=Nt,t.ShaderChunk=Ut,t.FogExp2=zi,t.Fog=Hi,t.Scene=Vi,t.Sprite=ji,t.LOD=Wi,t.SkinnedMesh=Yi,t.Skeleton=Xi,t.Bone=qi,t.Mesh=En,t.LineSegments=Ji,t.LineLoop=Ki,t.Line=Zi,t.Points=er,t.Group=tr,t.VideoTexture=nr,t.DataTexture=Pt,t.CompressedTexture=ir,t.CubeTexture=An,t.CanvasTexture=Oi,t.DepthTexture=rr,t.Texture=St,t.CompressedTextureLoader=Io,t.DataTextureLoader=Bo,t.CubeTextureLoader=Uo,t.TextureLoader=No,t.ObjectLoader=Na,t.MaterialLoader=Pa,t.BufferGeometryLoader=Oa,t.DefaultLoadingManager=Lo,t.LoadingManager=Ro,t.JSONLoader=Ua,t.ImageLoader=Do,t.ImageBitmapLoader=Va,t.FontLoader=Xa,t.FileLoader=Oo,t.Loader=Ba,t.LoaderUtils=Da,t.Cache=Co,t.AudioLoader=Ya,t.SpotLightShadow=ua,t.SpotLight=ha,t.PointLight=da,t.RectAreaLight=ga,t.HemisphereLight=la,t.DirectionalLightShadow=pa,t.DirectionalLight=fa,t.AmbientLight=ma,t.LightShadow=ca,t.Light=sa,t.StereoCamera=Qa,t.PerspectiveCamera=Ui,t.OrthographicCamera=Yt,t.CubeCamera=Za,t.ArrayCamera=Ni,t.Camera=qt,t.AudioListener=Ja,t.PositionalAudio=$a,t.AudioContext=qa,t.AudioAnalyser=es,t.Audio=Ka,t.VectorKeyframeTrack=Ra,t.StringKeyframeTrack=va,t.QuaternionKeyframeTrack=_a,t.NumberKeyframeTrack=Ma,t.ColorKeyframeTrack=wa,t.BooleanKeyframeTrack=ya,t.PropertyMixer=ts,t.PropertyBinding=os,t.KeyframeTrack=Ca,t.AnimationUtils=Sa,t.AnimationObjectGroup=as,t.AnimationMixer=ls,t.AnimationClip=La,t.Uniform=cs,t.InstancedBufferGeometry=us,t.BufferGeometry=dn,t.Geometry=Jt,t.InterleavedBufferAttribute=hs,t.InstancedInterleavedBuffer=ps,t.InterleavedBuffer=ds,t.InstancedBufferAttribute=fs,t.Face3=Qt,t.Object3D=Xt,t.Raycaster=ms,t.Layers=jt,t.EventDispatcher=r,t.Clock=ys,t.QuaternionLinearInterpolant=ba,t.LinearInterpolant=Ta,t.DiscreteInterpolant=Aa,t.CubicInterpolant=Ea,t.Interpolant=xa,t.Triangle=Mn,t.Math=bt,t.Spherical=xs,t.Cylindrical=bs,t.Plane=Bt,t.Frustum=Dt,t.Sphere=It,t.Ray=_n,t.Matrix4=wt,t.Matrix3=Tt,t.Box3=Ot,t.Box2=_s,t.Line3=wn,t.Euler=Gt,t.Vector4=Ct,t.Vector3=Et,t.Vector2=_t,t.Quaternion=Mt,t.Color=kt,t.ImmediateRenderObject=ws,t.VertexNormalsHelper=Ms,t.SpotLightHelper=Es,t.SkeletonHelper=Ts,t.PointLightHelper=As,t.RectAreaLightHelper=Ss,t.HemisphereLightHelper=Cs,t.GridHelper=Rs,t.PolarGridHelper=Ls,t.FaceNormalsHelper=Ps,t.DirectionalLightHelper=Os,t.CameraHelper=Is,t.BoxHelper=Bs,t.Box3Helper=Ds,t.PlaneHelper=Us,t.ArrowHelper=Ns,t.AxesHelper=Fs,t.Shape=aa,t.Path=oa,t.ShapePath=Ga,t.Font=ja,t.CurvePath=ra,t.Curve=Fo,t.ShapeUtils=Xr,t.WebGLUtils=Di,t.WireframeGeometry=or,t.ParametricGeometry=ar,t.ParametricBufferGeometry=sr,t.TetrahedronGeometry=ur,t.TetrahedronBufferGeometry=hr,t.OctahedronGeometry=dr,t.OctahedronBufferGeometry=pr,t.IcosahedronGeometry=fr,t.IcosahedronBufferGeometry=mr,t.DodecahedronGeometry=gr,t.DodecahedronBufferGeometry=vr,t.PolyhedronGeometry=lr,t.PolyhedronBufferGeometry=cr,t.TubeGeometry=yr,t.TubeBufferGeometry=xr,t.TorusKnotGeometry=br,t.TorusKnotBufferGeometry=_r,t.TorusGeometry=wr,t.TorusBufferGeometry=Mr,t.TextGeometry=Kr,t.TextBufferGeometry=$r,t.SphereGeometry=eo,t.SphereBufferGeometry=to,t.RingGeometry=no,t.RingBufferGeometry=io,t.PlaneGeometry=mn,t.PlaneBufferGeometry=gn,t.LatheGeometry=ro,t.LatheBufferGeometry=oo,t.ShapeGeometry=ao,t.ShapeBufferGeometry=so,t.ExtrudeGeometry=Qr,t.ExtrudeBufferGeometry=Zr,t.EdgesGeometry=co,t.ConeGeometry=po,t.ConeBufferGeometry=fo,t.CylinderGeometry=uo,t.CylinderBufferGeometry=ho,t.CircleGeometry=mo,t.CircleBufferGeometry=go,t.BoxGeometry=pn,t.BoxBufferGeometry=fn,t.ShadowMaterial=yo,t.SpriteMaterial=Gi,t.RawShaderMaterial=xo,t.ShaderMaterial=bn,t.PointsMaterial=$i,t.MeshPhysicalMaterial=_o,t.MeshStandardMaterial=bo,t.MeshPhongMaterial=wo,t.MeshToonMaterial=Mo,t.MeshNormalMaterial=Eo,t.MeshLambertMaterial=To,t.MeshDepthMaterial=Ri,t.MeshDistanceMaterial=Li,t.MeshBasicMaterial=xn,t.LineDashedMaterial=Ao,t.LineBasicMaterial=Qi,t.Material=yn,t.Float64BufferAttribute=ln,t.Float32BufferAttribute=sn,t.Uint32BufferAttribute=an,t.Int32BufferAttribute=on,t.Uint16BufferAttribute=rn,t.Int16BufferAttribute=nn,t.Uint8ClampedBufferAttribute=tn,t.Uint8BufferAttribute=en,t.Int8BufferAttribute=$t,t.BufferAttribute=Kt,t.ArcCurve=zo,t.CatmullRomCurve3=Xo,t.CubicBezierCurve=Zo,t.CubicBezierCurve3=Jo,t.EllipseCurve=ko,t.LineCurve=Ko,t.LineCurve3=$o,t.QuadraticBezierCurve=ea,t.QuadraticBezierCurve3=ta,t.SplineCurve=na,t.REVISION=o,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},t.CullFaceNone=a,t.CullFaceBack=s,t.CullFaceFront=l,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=0,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=c,t.PCFSoftShadowMap=u,t.FrontSide=h,t.BackSide=d,t.DoubleSide=p,t.FlatShading=1,t.SmoothShading=2,t.NoColors=f,t.FaceColors=m,t.VertexColors=g,t.NoBlending=v,t.NormalBlending=y,t.AdditiveBlending=x,t.SubtractiveBlending=b,t.MultiplyBlending=_,t.CustomBlending=w,t.AddEquation=M,t.SubtractEquation=E,t.ReverseSubtractEquation=T,t.MinEquation=A,t.MaxEquation=S,t.ZeroFactor=C,t.OneFactor=R,t.SrcColorFactor=L,t.OneMinusSrcColorFactor=P,t.SrcAlphaFactor=O,t.OneMinusSrcAlphaFactor=I,t.DstAlphaFactor=B,t.OneMinusDstAlphaFactor=D,t.DstColorFactor=U,t.OneMinusDstColorFactor=N,t.SrcAlphaSaturateFactor=F,t.NeverDepth=k,t.AlwaysDepth=z,t.LessDepth=H,t.LessEqualDepth=V,t.EqualDepth=G,t.GreaterEqualDepth=j,t.GreaterDepth=W,t.NotEqualDepth=X,t.MultiplyOperation=q,t.MixOperation=Y,t.AddOperation=Q,t.NoToneMapping=Z,t.LinearToneMapping=J,t.ReinhardToneMapping=K,t.Uncharted2ToneMapping=$,t.CineonToneMapping=ee,t.UVMapping=300,t.CubeReflectionMapping=te,t.CubeRefractionMapping=ne,t.EquirectangularReflectionMapping=ie,t.EquirectangularRefractionMapping=re,t.SphericalReflectionMapping=oe,t.CubeUVReflectionMapping=ae,t.CubeUVRefractionMapping=se,t.RepeatWrapping=le,t.ClampToEdgeWrapping=ce,t.MirroredRepeatWrapping=ue,t.NearestFilter=he,t.NearestMipMapNearestFilter=de,t.NearestMipMapLinearFilter=pe,t.LinearFilter=fe,t.LinearMipMapNearestFilter=me,t.LinearMipMapLinearFilter=ge,t.UnsignedByteType=ve,t.ByteType=ye,t.ShortType=xe,t.UnsignedShortType=be,t.IntType=_e,t.UnsignedIntType=we,t.FloatType=Me,t.HalfFloatType=Ee,t.UnsignedShort4444Type=Te,t.UnsignedShort5551Type=Ae,t.UnsignedShort565Type=Se,t.UnsignedInt248Type=Ce,t.AlphaFormat=Re,t.RGBFormat=Le,t.RGBAFormat=Pe,t.LuminanceFormat=Oe,t.LuminanceAlphaFormat=Ie,t.RGBEFormat=Be,t.DepthFormat=De,t.DepthStencilFormat=Ue,t.RGB_S3TC_DXT1_Format=Ne,t.RGBA_S3TC_DXT1_Format=Fe,t.RGBA_S3TC_DXT3_Format=ke,t.RGBA_S3TC_DXT5_Format=ze,t.RGB_PVRTC_4BPPV1_Format=He,t.RGB_PVRTC_2BPPV1_Format=Ve,t.RGBA_PVRTC_4BPPV1_Format=Ge,t.RGBA_PVRTC_2BPPV1_Format=je,t.RGB_ETC1_Format=We,t.RGBA_ASTC_4x4_Format=Xe,t.RGBA_ASTC_5x4_Format=qe,t.RGBA_ASTC_5x5_Format=Ye,t.RGBA_ASTC_6x5_Format=Qe,t.RGBA_ASTC_6x6_Format=Ze,t.RGBA_ASTC_8x5_Format=Je,t.RGBA_ASTC_8x6_Format=Ke,t.RGBA_ASTC_8x8_Format=$e,t.RGBA_ASTC_10x5_Format=et,t.RGBA_ASTC_10x6_Format=tt,t.RGBA_ASTC_10x8_Format=nt,t.RGBA_ASTC_10x10_Format=it,t.RGBA_ASTC_12x10_Format=rt,t.RGBA_ASTC_12x12_Format=ot,t.LoopOnce=2200,t.LoopRepeat=at,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=st,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=lt,t.TriangleStripDrawMode=ct,t.TriangleFanDrawMode=ut,t.LinearEncoding=ht,t.sRGBEncoding=dt,t.GammaEncoding=pt,t.RGBEEncoding=ft,t.LogLuvEncoding=3003,t.RGBM7Encoding=mt,t.RGBM16Encoding=gt,t.RGBDEncoding=vt,t.BasicDepthPacking=yt,t.RGBADepthPacking=xt,t.CubeGeometry=pn,t.Face4=
/**
 * @author mrdoob / http://mrdoob.com/
 */
function(e,t,n,i,r,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Qt(e,t,n,r,o,a)},t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},t.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e},t.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new er(e,t)},t.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ji(e)},t.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new er(e,t)},t.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new $i(e)},t.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new $i(e)},t.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new $i(e)},t.Vertex=function(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Et(e,t,n)}//
,t.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Kt(e,t).setDynamic(!0)},t.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new $t(e,t)},t.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new en(e,t)},t.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new tn(e,t)},t.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new nn(e,t)},t.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new rn(e,t)},t.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new on(e,t)},t.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new an(e,t)},t.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new sn(e,t)},t.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new ln(e,t)},t.ClosedSplineCurve3=ks,t.SplineCurve3=zs,t.Spline=Hs,t.AxisHelper=//
function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Fs(e)},t.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Bs(e,t)},t.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ji(new co(e.geometry),new Qi({color:void 0!==t?t:16777215}))},t.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ji(new or(e.geometry),new Qi({color:void 0!==t?t:16777215}))},t.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Oo(e)},t.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Bo(e)},t.GeometryUtils=Vs,t.ImageUtils=Gs,t.Projector=//
function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}//
,t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},t.SceneUtils=js,t.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},
/***/"./node_modules/webpack/buildin/module.js":
/*!***********************************!*\
  !*** (webpack)/buildin/module.js ***!
  \***********************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],
// module.parent = undefined by default
e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},
/***/"./src/assets/img/play_icon.jpg":
/*!**************************************!*\
  !*** ./src/assets/img/play_icon.jpg ***!
  \**************************************/
/*! no static exports found */
/***/function(e,t,n){e.exports=n.p+"images/play_icon.3db02f4d.jpg";
/***/},
/***/"./src/components/utils/toast.js":
/*!***************************************!*\
  !*** ./src/components/utils/toast.js ***!
  \***************************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.show=s,t.response=
/**
 * [response description]
 * @param  {[type]}  data            [description]
 * @param  {Boolean} isShowOk        [description]
 * @param  {[type]}  successCallback [description]
 * @param  {Boolean} isShowError     [description]
 * @param  {[type]}  errorCallback   [description]
 * @return {[type]}                  [description]
 */
function(e,t,n,i,l){e||l&&l();var c=e.status,u=e.message;if(c===r)return t&&(u||(u=o),s(u)),void(n&&n());i&&(u||(u=a),s(u)),l&&l()}
/**
 * 获取layer对象
 * @return {[type]} [description]
 */,t.getLayer=function(){return i.default}
/**
 * 提示网络错误
 * @return {[type]} [description]
 */,t.netError=function(){s("网络错误")}
/**
 * 展示一个加载的信息
 * @param  {[type]} content 展示的提醒信息，如果没有传入就没有提醒信息
 * @return {[type]}         [description]
 */,t.load=function(e,t){return e?t?i.default.open({type:2,shadeClose:!1,content:e,shade:"background-color: rgba(0,0,0,.5)"}):i.default.open({type:2,shadeClose:!1,content:e,shade:"background-color: rgba(0,0,0,1)"}):i.default.open({type:2,shadeClose:!1})}
/**
 * 清除所有layer层
 * @return {[type]} [description]
 */,t.closeAll=function(){return i.default.closeAll()}
/**
 * 用于关闭特定层，index为该特定层的索引
 * @param  {[type]} index [description]
 * @return {[type]}       [description]
 */,t.close=function(e){return i.default.close(e)}
/**
 * 调用layer的open
 * @param  {[type]} options [description]
 * @return {[type]}         [description]
 */,t.open=function(e){return i.default.open(e)}
/***/;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(/*! ../../vendor/utils/layer.js */"./src/vendor/utils/layer.js"));var r=100,o="操作成功",a="操作失败";
// const LOGIN_ERROR = 300
// const NET_ERROR = -1
/**
 * 信息展示
 * @param  {[type]} message [description]
 * @return {[type]}         [description]
 */
function s(e){i.default.open({content:e,skin:"msg",time:2})}},
/***/"./src/mmd_index.js":
/*!**************************!*\
  !*** ./src/mmd_index.js ***!
  \**************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}
// import * as Toast from 'com_gl/utils/toast';
(n(/*! mmd/index */"./src/views/mmd/index.js"));n(/*! ./style/common/commom.css */"./src/style/common/commom.css"),n(/*! ./style/common/layer.css */"./src/style/common/layer.css"),new Promise(i.default).then(function(e){
// 把渲染内容输出至dom中
document.body.style.width=window.innerWidth+"px",document.body.style.height=window.innerHeight+"px",document.body.appendChild(e.domElement)})},
/***/"./src/style/common/commom.css":
/*!*************************************!*\
  !*** ./src/style/common/commom.css ***!
  \*************************************/
/*! no static exports found */
/***/function(e,t,n){var i=n(/*! !../../../node_modules/css-loader!./commom.css */"./node_modules/css-loader/index.js!./src/style/common/commom.css");"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(/*! ../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,r);i.locals&&(e.exports=i.locals)},
/***/"./src/style/common/layer.css":
/*!************************************!*\
  !*** ./src/style/common/layer.css ***!
  \************************************/
/*! no static exports found */
/***/function(e,t,n){var i=n(/*! !../../../node_modules/css-loader!./layer.css */"./node_modules/css-loader/index.js!./src/style/common/layer.css");"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(/*! ../../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(i,r);i.locals&&(e.exports=i.locals)},
/***/"./src/vendor/threejs/animation/CCDIKSolver.js":
/*!*****************************************************!*\
  !*** ./src/vendor/threejs/animation/CCDIKSolver.js ***!
  \*****************************************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";var i=n(/*! three */"./node_modules/three/build/three.module.js");
/**
 * @author takahiro / https://github.com/takahirox
 *
 * CCD Algorithm
 *  https://sites.google.com/site/auraliusproject/ccd-algorithm
 *
 * mesh.geometry needs to have iks array.
 *
 * // ik parameter example
 * //
 * // target, effector, index in links are bone index in skeleton.
 * // the bones relation should be
 * // <-- parent                                  child -->
 * // links[ n ], links[ n - 1 ], ..., links[ 0 ], effector
 * ik = {
 *	target: 1,
 *	effector: 2,
 *	links: [ { index: 5, limitation: new THREE.Vector3( 1, 0, 0 ) }, { index: 4, enabled: false }, { index : 3 } ],
 *	iteration: 10,
 *	minAngle: 0.0,
 *	maxAngle: 1.0,
 * };
 */i.CCDIKSolver=function(e){this.mesh=e,this._valid()},i.CCDIKSolver.prototype={constructor:i.CCDIKSolver,_valid:function(){for(var e=this.mesh.geometry.iks,t=this.mesh.skeleton.bones,n=0,i=e.length;n<i;n++){var r,o,a=e[n],s=t[a.effector],l=a.links;r=s;for(var c=0,u=l.length;c<u;c++)o=t[l[c].index],r.parent!==o&&console.warn("THREE.CCDIKSolver: bone "+r.name+" is not the child of bone "+o.name),r=o}},
/*
  * save the bone matrices before solving IK.
  * they're used for generating VMD and VPD.
  */
_saveOriginalBonesInfo:function(){for(var e=this.mesh.skeleton.bones,t=0,n=e.length;t<n;t++){var i=e[t];void 0===i.userData.ik&&(i.userData.ik={}),i.userData.ik.originalMatrix=i.matrix.toArray()}},update:function(e){var t=new i.Quaternion,n=new i.Vector3,r=new i.Vector3,o=new i.Vector3,a=new i.Vector3,s=new i.Vector3,l=new i.Quaternion,c=new i.Vector3,u=new i.Vector3,h=this.mesh.skeleton.bones,d=this.mesh.geometry.iks,p=(this.mesh.geometry.bones,Math);this.mesh.updateMatrixWorld(!0),!0===e&&this._saveOriginalBonesInfo();for(var f=0,m=d.length;f<m;f++){var g=d[f],v=h[g.effector],y=h[g.target];
// don't use getWorldPosition() here for the performance
// because it calls updateMatrixWorld( true ) inside.
n.setFromMatrixPosition(y.matrixWorld);for(var x=g.links,b=void 0!==g.iteration?g.iteration:1,_=0;_<b;_++){for(var w=!1,M=0,E=x.length;M<E;M++){var T=h[x[M].index];
// skip this link and following links.
// this skip is used for MMD performance optimization.
if(!1===x[M].enabled)break;var A=x[M].limitation;
// don't use getWorldPosition/Quaternion() here for the performance
// because they call updateMatrixWorld( true ) inside.
T.matrixWorld.decompose(s,l,c),l.inverse(),o.setFromMatrixPosition(v.matrixWorld),
// work in link world
a.subVectors(o,s),a.applyQuaternion(l),a.normalize(),r.subVectors(n,s),r.applyQuaternion(l),r.normalize();var S=r.dot(a);
// skip if changing angle is too small to prevent vibration of bone
// Refer to http://www20.atpages.jp/katwat/three.js_r58/examples/mytest37/mmd.three.js
if(S>1?S=1:S<-1&&(S=-1),!((S=p.acos(S))<1e-5)){
// TODO: re-consider the limitation specification
if(void 0!==g.minAngle&&S<g.minAngle&&(S=g.minAngle),void 0!==g.maxAngle&&S>g.maxAngle&&(S=g.maxAngle),u.crossVectors(a,r),u.normalize(),t.setFromAxisAngle(u,S),T.quaternion.multiply(t),void 0!==A){var C=T.quaternion.w;C>1&&(C=1);var R=p.sqrt(1-C*C);T.quaternion.set(A.x*R,A.y*R,A.z*R,C)}T.updateMatrixWorld(!0),w=!0}}if(!w)break}}
// just in case
this.mesh.updateMatrixWorld(!0)}},i.CCDIKHelper=function(e){if(void 0===e.geometry.iks||void 0===e.skeleton)throw"THREE.CCDIKHelper requires iks in mesh.geometry and skeleton in mesh.";i.Object3D.call(this),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.sphereGeometry=new i.SphereBufferGeometry(.25,16,8),this.targetSphereMaterial=new i.MeshBasicMaterial({color:new i.Color(16746632),depthTest:!1,depthWrite:!1,transparent:!0}),this.effectorSphereMaterial=new i.MeshBasicMaterial({color:new i.Color(8978312),depthTest:!1,depthWrite:!1,transparent:!0}),this.linkSphereMaterial=new i.MeshBasicMaterial({color:new i.Color(8947967),depthTest:!1,depthWrite:!1,transparent:!0}),this.lineMaterial=new i.LineBasicMaterial({color:new i.Color(16711680),depthTest:!1,depthWrite:!1,transparent:!0}),this._init(),this.update()},i.CCDIKHelper.prototype=Object.create(i.Object3D.prototype),i.CCDIKHelper.prototype.constructor=i.CCDIKHelper,i.CCDIKHelper.prototype._init=function(){var e=this,t=this.root.geometry.iks;function n(t){return new i.Line(function(e){var t=new i.BufferGeometry,n=new Float32Array(3*(2+e.links.length));return t.addAttribute("position",new i.BufferAttribute(n,3)),t}(t),e.lineMaterial)}for(var r=0,o=t.length;r<o;r++){var a=t[r];this.add(new i.Mesh(e.sphereGeometry,e.targetSphereMaterial)),this.add(new i.Mesh(e.sphereGeometry,e.effectorSphereMaterial));for(var s=0,l=a.links.length;s<l;s++)this.add(new i.Mesh(e.sphereGeometry,e.linkSphereMaterial));this.add(n(a))}},i.CCDIKHelper.prototype.update=function(){var e=0,t=this.root,n=t.geometry.iks,r=t.skeleton.bones,o=(new i.Matrix4).getInverse(t.matrixWorld),a=new i.Vector3;function s(e){return a.setFromMatrixPosition(e.matrixWorld),a.applyMatrix4(o),a}function l(e,t,n){var i=s(n);e[3*t+0]=i.x,e[3*t+1]=i.y,e[3*t+2]=i.z}for(var c=0,u=n.length;c<u;c++){var h=n[c],d=r[h.target],p=r[h.effector],f=this.children[e++],m=this.children[e++];f.position.copy(s(d)),m.position.copy(s(p));for(var g=0,v=h.links.length;g<v;g++){var y=r[h.links[g].index];this.children[e++].position.copy(s(y))}var x=this.children[e++],b=x.geometry.attributes.position.array;l(b,0,d),l(b,1,p);for(g=0,v=h.links.length;g<v;g++){l(b,g+2,y=r[h.links[g].index])}x.geometry.attributes.position.needsUpdate=!0}}},
/***/"./src/vendor/threejs/animation/MMDPhysics.js":
/*!****************************************************!*\
  !*** ./src/vendor/threejs/animation/MMDPhysics.js ***!
  \****************************************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";var i=n(/*! three */"./node_modules/three/build/three.module.js");
/**
 * @author takahiro / https://github.com/takahirox
 *
 * Dependencies
 *  - Ammo.js https://github.com/kripken/ammo.js
 *
 * MMD specific Physics class.
 *
 * See THREE.MMDLoader for the passed parameter list of RigidBody/Constraint.
 *
 * Requirement:
 *  - don't change object's scale from (1,1,1) after setting physics to object
 *
 * TODO
 *  - optimize for the performance
 *  - use Physijs http://chandlerprall.github.io/Physijs/
 *    and improve the performance by making use of Web worker.
 *  - if possible, make this class being non-MMD specific.
 *  - object scale change support
 */i.MMDPhysics=function(e,t){void 0===t&&(t={}),this.mesh=e,this.helper=new i.MMDPhysics.ResourceHelper,
/*
  * I don't know why but 1/60 unitStep easily breaks models
  * so I set it 1/65 so far.
  * Don't set too small unitStep because
  * the smaller unitStep can make the performance worse.
  */
this.unitStep=void 0!==t.unitStep?t.unitStep:1/65,this.maxStepNum=void 0!==t.maxStepNum?t.maxStepNum:3,this.world=void 0!==t.world?t.world:null,this.bodies=[],this.constraints=[],this.init(e)},i.MMDPhysics.prototype={constructor:i.MMDPhysics,init:function(e){var t=e.parent;null!==t&&t.remove(e);var n=this.helper,i=n.allocThreeVector3(),r=n.allocThreeEuler(),o=n.allocThreeVector3();i.copy(e.position),r.copy(e.rotation),o.copy(e.scale),e.position.set(0,0,0),e.rotation.set(0,0,0),e.scale.set(1,1,1),e.updateMatrixWorld(!0),null===this.world&&this.initWorld(),this.initRigidBodies(),this.initConstraints(),null!==t&&t.add(e),e.position.copy(i),e.rotation.copy(r),e.scale.copy(o),e.updateMatrixWorld(!0),this.reset(),n.freeThreeVector3(i),n.freeThreeEuler(r),n.freeThreeVector3(o)},initWorld:function(){var e=new Ammo.btDefaultCollisionConfiguration,t=new Ammo.btCollisionDispatcher(e),n=new Ammo.btDbvtBroadphase,i=new Ammo.btSequentialImpulseConstraintSolver,r=new Ammo.btDiscreteDynamicsWorld(t,n,i,e);r.setGravity(new Ammo.btVector3(0,-98,0)),this.world=r},initRigidBodies:function(){for(var e=this.mesh.geometry.rigidBodies,t=0;t<e.length;t++){var n=new i.MMDPhysics.RigidBody(this.mesh,this.world,e[t],this.helper);this.bodies.push(n)}},initConstraints:function(){for(var e=this.mesh.geometry.constraints,t=0;t<e.length;t++){var n=e[t],r=this.bodies[n.rigidBodyIndex1],o=this.bodies[n.rigidBodyIndex2],a=new i.MMDPhysics.Constraint(this.mesh,this.world,r,o,n,this.helper);this.constraints.push(a)}},update:function(e){this.updateRigidBodies(),this.stepSimulation(e),this.updateBones()},stepSimulation:function(e){var t=this.unitStep,n=e,i=1+(e/t|0);n<t&&(n=t,i=1),i>this.maxStepNum&&(i=this.maxStepNum),this.world.stepSimulation(n,i,t)},updateRigidBodies:function(){for(var e=0;e<this.bodies.length;e++)this.bodies[e].updateFromBone()},updateBones:function(){for(var e=0;e<this.bodies.length;e++)this.bodies[e].updateBone()},reset:function(){for(var e=0;e<this.bodies.length;e++)this.bodies[e].reset()},warmup:function(e){for(var t=0;t<e;t++)this.update(1/60)}},
/**
 * This helper class responsibilies are
 *
 * 1. manage Ammo.js and Three.js object resources and
 *    improve the performance and the memory consumption by
 *    reusing objects.
 *
 * 2. provide simple Ammo object operations.
 */
i.MMDPhysics.ResourceHelper=function(){
// for Three.js
this.threeVector3s=[],this.threeMatrix4s=[],this.threeQuaternions=[],this.threeEulers=[],
// for Ammo.js
this.transforms=[],this.quaternions=[],this.vector3s=[]},i.MMDPhysics.ResourceHelper.prototype={allocThreeVector3:function(){return this.threeVector3s.length>0?this.threeVector3s.pop():new i.Vector3},freeThreeVector3:function(e){this.threeVector3s.push(e)},allocThreeMatrix4:function(){return this.threeMatrix4s.length>0?this.threeMatrix4s.pop():new i.Matrix4},freeThreeMatrix4:function(e){this.threeMatrix4s.push(e)},allocThreeQuaternion:function(){return this.threeQuaternions.length>0?this.threeQuaternions.pop():new i.Quaternion},freeThreeQuaternion:function(e){this.threeQuaternions.push(e)},allocThreeEuler:function(){return this.threeEulers.length>0?this.threeEulers.pop():new i.Euler},freeThreeEuler:function(e){this.threeEulers.push(e)},allocTransform:function(){return this.transforms.length>0?this.transforms.pop():new Ammo.btTransform},freeTransform:function(e){this.transforms.push(e)},allocQuaternion:function(){return this.quaternions.length>0?this.quaternions.pop():new Ammo.btQuaternion},freeQuaternion:function(e){this.quaternions.push(e)},allocVector3:function(){return this.vector3s.length>0?this.vector3s.pop():new Ammo.btVector3},freeVector3:function(e){this.vector3s.push(e)},setIdentity:function(e){e.setIdentity()},getBasis:function(e){var t=this.allocQuaternion();return e.getBasis().getRotation(t),t},getBasisAsMatrix3:function(e){var t=this.getBasis(e),n=this.quaternionToMatrix3(t);return this.freeQuaternion(t),n},getOrigin:function(e){return e.getOrigin()},setOrigin:function(e,t){e.getOrigin().setValue(t.x(),t.y(),t.z())},copyOrigin:function(e,t){var n=t.getOrigin();this.setOrigin(e,n)},setBasis:function(e,t){e.setRotation(t)},setBasisFromMatrix3:function(e,t){var n=this.matrix3ToQuaternion(t);this.setBasis(e,n),this.freeQuaternion(n)},setOriginFromArray3:function(e,t){e.getOrigin().setValue(t[0],t[1],t[2])},setOriginFromThreeVector3:function(e,t){e.getOrigin().setValue(t.x,t.y,t.z)},setBasisFromArray3:function(e,t){var n=this.allocThreeQuaternion(),i=this.allocThreeEuler();i.set(t[0],t[1],t[2]),this.setBasisFromThreeQuaternion(e,n.setFromEuler(i)),this.freeThreeEuler(i),this.freeThreeQuaternion(n)},setBasisFromThreeQuaternion:function(e,t){var n=this.allocQuaternion();n.setX(t.x),n.setY(t.y),n.setZ(t.z),n.setW(t.w),this.setBasis(e,n),this.freeQuaternion(n)},multiplyTransforms:function(e,t){var n=this.allocTransform();this.setIdentity(n);var i=this.getBasisAsMatrix3(e),r=this.getBasisAsMatrix3(t),o=this.getOrigin(e),a=this.getOrigin(t),s=this.multiplyMatrix3ByVector3(i,a),l=this.addVector3(s,o);this.setOrigin(n,l);var c=this.multiplyMatrices3(i,r);return this.setBasisFromMatrix3(n,c),this.freeVector3(s),this.freeVector3(l),n},inverseTransform:function(e){var t=this.allocTransform(),n=this.getBasisAsMatrix3(e),i=this.getOrigin(e),r=this.transposeMatrix3(n),o=this.negativeVector3(i),a=this.multiplyMatrix3ByVector3(r,o);return this.setOrigin(t,a),this.setBasisFromMatrix3(t,r),this.freeVector3(o),this.freeVector3(a),t},multiplyMatrices3:function(e,t){var n=[],i=this.rowOfMatrix3(e,0),r=this.rowOfMatrix3(e,1),o=this.rowOfMatrix3(e,2),a=this.columnOfMatrix3(t,0),s=this.columnOfMatrix3(t,1),l=this.columnOfMatrix3(t,2);return n[0]=this.dotVectors3(i,a),n[1]=this.dotVectors3(i,s),n[2]=this.dotVectors3(i,l),n[3]=this.dotVectors3(r,a),n[4]=this.dotVectors3(r,s),n[5]=this.dotVectors3(r,l),n[6]=this.dotVectors3(o,a),n[7]=this.dotVectors3(o,s),n[8]=this.dotVectors3(o,l),this.freeVector3(i),this.freeVector3(r),this.freeVector3(o),this.freeVector3(a),this.freeVector3(s),this.freeVector3(l),n},addVector3:function(e,t){var n=this.allocVector3();return n.setValue(e.x()+t.x(),e.y()+t.y(),e.z()+t.z()),n},dotVectors3:function(e,t){return e.x()*t.x()+e.y()*t.y()+e.z()*t.z()},rowOfMatrix3:function(e,t){var n=this.allocVector3();return n.setValue(e[3*t+0],e[3*t+1],e[3*t+2]),n},columnOfMatrix3:function(e,t){var n=this.allocVector3();return n.setValue(e[t+0],e[t+3],e[t+6]),n},negativeVector3:function(e){var t=this.allocVector3();return t.setValue(-e.x(),-e.y(),-e.z()),t},multiplyMatrix3ByVector3:function(e,t){var n=this.allocVector3(),i=this.rowOfMatrix3(e,0),r=this.rowOfMatrix3(e,1),o=this.rowOfMatrix3(e,2),a=this.dotVectors3(i,t),s=this.dotVectors3(r,t),l=this.dotVectors3(o,t);return n.setValue(a,s,l),this.freeVector3(i),this.freeVector3(r),this.freeVector3(o),n},transposeMatrix3:function(e){var t=[];return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t},quaternionToMatrix3:function(e){var t=[],n=e.x(),i=e.y(),r=e.z(),o=e.w(),a=n*n,s=i*i,l=r*r,c=n*i,u=i*r,h=r*n,d=n*o,p=i*o,f=r*o;return t[0]=1-2*(s+l),t[1]=2*(c-f),t[2]=2*(h+p),t[3]=2*(c+f),t[4]=1-2*(l+a),t[5]=2*(u-d),t[6]=2*(h-p),t[7]=2*(u+d),t[8]=1-2*(a+s),t},matrix3ToQuaternion:function(e){var t,n,i,r,o,a=e[0]+e[4]+e[8];a>0?(o=.25*(t=2*Math.sqrt(a+1)),n=(e[7]-e[5])/t,i=(e[2]-e[6])/t,r=(e[3]-e[1])/t):e[0]>e[4]&&e[0]>e[8]?(t=2*Math.sqrt(1+e[0]-e[4]-e[8]),o=(e[7]-e[5])/t,n=.25*t,i=(e[1]+e[3])/t,r=(e[2]+e[6])/t):e[4]>e[8]?(t=2*Math.sqrt(1+e[4]-e[0]-e[8]),o=(e[2]-e[6])/t,n=(e[1]+e[3])/t,i=.25*t,r=(e[5]+e[7])/t):(t=2*Math.sqrt(1+e[8]-e[0]-e[4]),o=(e[3]-e[1])/t,n=(e[2]+e[6])/t,i=(e[5]+e[7])/t,r=.25*t);var s=this.allocQuaternion();return s.setX(n),s.setY(i),s.setZ(r),s.setW(o),s}},i.MMDPhysics.RigidBody=function(e,t,n,i){this.mesh=e,this.world=t,this.params=n,this.helper=i,this.body=null,this.bone=null,this.boneOffsetForm=null,this.boneOffsetFormInverse=null,this.init()},i.MMDPhysics.RigidBody.prototype={constructor:i.MMDPhysics.RigidBody,init:function(){var e=this.helper,t=this.params,n=this.mesh.skeleton.bones,r=-1===t.boneIndex?new i.Bone:n[t.boneIndex],o=function(e){switch(e.shapeType){case 0:return new Ammo.btSphereShape(e.width);case 1:return new Ammo.btBoxShape(new Ammo.btVector3(e.width,e.height,e.depth));case 2:return new Ammo.btCapsuleShape(e.width,e.height);default:throw"unknown shape type "+e.shapeType}}(t),a=0===t.type?0:t.weight,s=e.allocVector3();s.setValue(0,0,0),0!==a&&o.calculateLocalInertia(a,s);var l=e.allocTransform();e.setIdentity(l),e.setOriginFromArray3(l,t.position),e.setBasisFromArray3(l,t.rotation);var c=e.allocThreeVector3(),u=e.allocTransform();e.setIdentity(u),e.setOriginFromThreeVector3(u,r.getWorldPosition(c));var h=e.multiplyTransforms(u,l),d=new Ammo.btDefaultMotionState(h),p=new Ammo.btRigidBodyConstructionInfo(a,d,o,s);p.set_m_friction(t.friction),p.set_m_restitution(t.restitution);var f=new Ammo.btRigidBody(p);0===t.type&&(f.setCollisionFlags(2|f.getCollisionFlags()),
/*
    * It'd be better to comment out this line though in general I should call this method
    * because I'm not sure why but physics will be more like MMD's
    * if I comment out.
    */
f.setActivationState(4)),f.setDamping(t.positionDamping,t.rotationDamping),f.setSleepingThresholds(0,0),this.world.addRigidBody(f,1<<t.groupIndex,t.groupTarget),this.body=f,this.bone=r,this.boneOffsetForm=l,this.boneOffsetFormInverse=e.inverseTransform(l),e.freeVector3(s),e.freeTransform(h),e.freeTransform(u),e.freeThreeVector3(c)},reset:function(){this.setTransformFromBone()},updateFromBone:function(){-1!==this.params.boneIndex&&0===this.params.type&&this.setTransformFromBone()},updateBone:function(){0!==this.params.type&&-1!==this.params.boneIndex&&(this.updateBoneRotation(),1===this.params.type&&this.updateBonePosition(),this.bone.updateMatrixWorld(!0),2===this.params.type&&this.setPositionFromBone())},getBoneTransform:function(){var e=this.helper,t=e.allocThreeVector3(),n=e.allocThreeQuaternion();this.bone.getWorldPosition(t),this.bone.getWorldQuaternion(n);var i=e.allocTransform();e.setOriginFromThreeVector3(i,t),e.setBasisFromThreeQuaternion(i,n);var r=e.multiplyTransforms(i,this.boneOffsetForm);return e.freeTransform(i),e.freeThreeQuaternion(n),e.freeThreeVector3(t),r},getWorldTransformForBone:function(){var e=this.helper,t=e.allocTransform();this.body.getMotionState().getWorldTransform(t);var n=e.multiplyTransforms(t,this.boneOffsetFormInverse);return e.freeTransform(t),n},setTransformFromBone:function(){var e=this.helper,t=this.getBoneTransform();
// TODO: check the most appropriate way to set
//this.body.setWorldTransform( form );
this.body.setCenterOfMassTransform(t),this.body.getMotionState().setWorldTransform(t),e.freeTransform(t)},setPositionFromBone:function(){var e=this.helper,t=this.getBoneTransform(),n=e.allocTransform();this.body.getMotionState().getWorldTransform(n),e.copyOrigin(n,t),
// TODO: check the most appropriate way to set
//this.body.setWorldTransform( tr );
this.body.setCenterOfMassTransform(n),this.body.getMotionState().setWorldTransform(n),e.freeTransform(n),e.freeTransform(t)},updateBoneRotation:function(){this.bone.updateMatrixWorld(!0);var e=this.helper,t=this.getWorldTransformForBone(),n=e.getBasis(t),i=e.allocThreeQuaternion(),r=e.allocThreeQuaternion(),o=e.allocThreeQuaternion();i.set(n.x(),n.y(),n.z(),n.w()),r.setFromRotationMatrix(this.bone.matrixWorld),r.conjugate(),r.multiply(i),
//this.bone.quaternion.multiply( thQ2 );
o.setFromRotationMatrix(this.bone.matrix),this.bone.quaternion.copy(r.multiply(o)),e.freeThreeQuaternion(i),e.freeThreeQuaternion(r),e.freeThreeQuaternion(o),e.freeQuaternion(n),e.freeTransform(t)},updateBonePosition:function(){var e=this.helper,t=this.getWorldTransformForBone(),n=e.allocThreeVector3(),i=e.getOrigin(t);n.set(i.x(),i.y(),i.z());var r=this.bone.worldToLocal(n);this.bone.position.add(r),e.freeThreeVector3(n),e.freeTransform(t)}},i.MMDPhysics.Constraint=function(e,t,n,i,r,o){this.mesh=e,this.world=t,this.bodyA=n,this.bodyB=i,this.params=r,this.helper=o,this.constraint=null,this.init()},i.MMDPhysics.Constraint.prototype={constructor:i.MMDPhysics.Constraint,init:function(){var e=this.helper,t=this.params,n=this.bodyA,i=this.bodyB,r=e.allocTransform();e.setIdentity(r),e.setOriginFromArray3(r,t.position),e.setBasisFromArray3(r,t.rotation);var o=e.allocTransform(),a=e.allocTransform();n.body.getMotionState().getWorldTransform(o),i.body.getMotionState().getWorldTransform(a);var s=e.inverseTransform(o),l=e.inverseTransform(a),c=e.multiplyTransforms(s,r),u=e.multiplyTransforms(l,r),h=new Ammo.btGeneric6DofSpringConstraint(n.body,i.body,c,u,!0),d=e.allocVector3(),p=e.allocVector3(),f=e.allocVector3(),m=e.allocVector3();d.setValue(t.translationLimitation1[0],t.translationLimitation1[1],t.translationLimitation1[2]),p.setValue(t.translationLimitation2[0],t.translationLimitation2[1],t.translationLimitation2[2]),f.setValue(t.rotationLimitation1[0],t.rotationLimitation1[1],t.rotationLimitation1[2]),m.setValue(t.rotationLimitation2[0],t.rotationLimitation2[1],t.rotationLimitation2[2]),h.setLinearLowerLimit(d),h.setLinearUpperLimit(p),h.setAngularLowerLimit(f),h.setAngularUpperLimit(m);for(var g=0;g<3;g++)0!==t.springPosition[g]&&(h.enableSpring(g,!0),h.setStiffness(g,t.springPosition[g]));for(g=0;g<3;g++)0!==t.springRotation[g]&&(h.enableSpring(g+3,!0),h.setStiffness(g+3,t.springRotation[g]));
/*
   * Currently(10/31/2016) official ammo.js doesn't support
   * btGeneric6DofSpringConstraint.setParam method.
   * You need custom ammo.js (add the method into idl) if you wanna use.
   * By setting this parameter, physics will be more like MMD's
   */if(void 0!==h.setParam)for(g=0;g<6;g++)
// this parameter is from http://www20.atpages.jp/katwat/three.js_r58/examples/mytest37/mmd.three.js
h.setParam(2,.475,g);this.world.addConstraint(h,!0),this.constraint=h,e.freeTransform(r),e.freeTransform(o),e.freeTransform(a),e.freeTransform(s),e.freeTransform(l),e.freeTransform(c),e.freeTransform(u),e.freeVector3(d),e.freeVector3(p),e.freeVector3(f),e.freeVector3(m)}},i.MMDPhysicsHelper=function(e){if(void 0===e.physics||void 0===e.geometry.rigidBodies)throw"THREE.MMDPhysicsHelper requires physics in mesh and rigidBodies in mesh.geometry.";i.Object3D.call(this),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.materials=[],this.materials.push(new i.MeshBasicMaterial({color:new i.Color(16746632),wireframe:!0,depthTest:!1,depthWrite:!1,opacity:.25,transparent:!0})),this.materials.push(new i.MeshBasicMaterial({color:new i.Color(8978312),wireframe:!0,depthTest:!1,depthWrite:!1,opacity:.25,transparent:!0})),this.materials.push(new i.MeshBasicMaterial({color:new i.Color(8947967),wireframe:!0,depthTest:!1,depthWrite:!1,opacity:.25,transparent:!0})),this._init(),this.update()},i.MMDPhysicsHelper.prototype=Object.create(i.Object3D.prototype),i.MMDPhysicsHelper.prototype.constructor=i.MMDPhysicsHelper,i.MMDPhysicsHelper.prototype._init=function(){var e=this.root.geometry.rigidBodies;function t(e){switch(e.shapeType){case 0:return new i.SphereBufferGeometry(e.width,16,8);case 1:return new i.BoxBufferGeometry(2*e.width,2*e.height,2*e.depth,8,8,8);case 2:return new
// copy from http://www20.atpages.jp/katwat/three.js_r58/examples/mytest37/mytest37.js?ver=20160815
function(e,t,n,r){var o=new i.CylinderBufferGeometry(e,e,t,n,r,!0),a=new i.Mesh(new i.SphereBufferGeometry(e,n,r,0,2*Math.PI,0,Math.PI/2)),s=new i.Mesh(new i.SphereBufferGeometry(e,n,r,0,2*Math.PI,Math.PI/2,Math.PI/2));return a.position.set(0,t/2,0),s.position.set(0,-t/2,0),a.updateMatrix(),s.updateMatrix(),o.merge(a.geometry,a.matrix),o.merge(s.geometry,s.matrix),o}(e.width,e.height,16,8);default:return null}}for(var n=0,r=e.length;n<r;n++){var o=e[n];this.add(new i.Mesh(t(o),this.materials[o.type]))}},i.MMDPhysicsHelper.prototype.update=function(){var e=(d=this.root).geometry.rigidBodies,t=d.physics.bodies,n=(new i.Matrix4).getInverse(d.matrixWorld),r=new i.Vector3,o=new i.Quaternion,a=new i.Quaternion;function s(e){return r.set(e.x(),e.y(),e.z()),r.applyMatrix4(n),r}function l(e){return o.set(e.x(),e.y(),e.z(),e.w()),a.setFromRotationMatrix(n),a.multiply(o),a}for(var c=0,u=e.length;c<u;c++){var h=t[c].body,d=this.children[c],p=h.getCenterOfMassTransform();d.position.copy(s(p.getOrigin())),d.quaternion.copy(l(p.getRotation()))}}},
/***/"./src/vendor/threejs/controls/OrbitControls.js":
/*!******************************************************!*\
  !*** ./src/vendor/threejs/controls/OrbitControls.js ***!
  \******************************************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";var i=n(/*! three */"./node_modules/three/build/three.module.js");
/**
 * @author qiao / https://github.com/qiao
 * @author mrdoob / http://mrdoob.com
 * @author alteredq / http://alteredqualia.com/
 * @author WestLangley / http://github.com/WestLangley
 * @author erich666 / http://erichaines.com
 */
// This set of controls performs orbiting, dollying (zooming), and panning.
// Unlike TrackballControls, it maintains the "up" direction object.up (+Y by default).
//
//    Orbit - left mouse / touch: one-finger move
//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish
//    Pan - right mouse, or arrow keys / touch: two-finger move
i.OrbitControls=function(e,t){this.object=e,this.domElement=void 0!==t?t:document,
// Set to false to disable this control
this.enabled=!0,
// "target" sets the location of focus, where the object orbits around
this.target=new i.Vector3,
// How far you can dolly in and out ( PerspectiveCamera only )
this.minDistance=0,this.maxDistance=1/0,
// How far you can zoom in and out ( OrthographicCamera only )
this.minZoom=0,this.maxZoom=1/0,
// How far you can orbit vertically, upper and lower limits.
// Range is 0 to Math.PI radians.
this.minPolarAngle=0,// radians
this.maxPolarAngle=Math.PI,// radians
// How far you can orbit horizontally, upper and lower limits.
// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].
this.minAzimuthAngle=-1/0,// radians
this.maxAzimuthAngle=1/0,// radians
// Set to true to enable damping (inertia)
// If damping is enabled, you must call controls.update() in your animation loop
this.enableDamping=!1,this.dampingFactor=.25,
// This option actually enables dollying in and out; left as "zoom" for backwards compatibility.
// Set to false to disable zooming
this.enableZoom=!0,this.zoomSpeed=1,
// Set to false to disable rotating
this.enableRotate=!0,this.rotateSpeed=1,
// Set to false to disable panning
this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,// if true, pan in screen-space
this.keyPanSpeed=7,// pixels moved per arrow key push
// Set to true to automatically rotate around the target
// If auto-rotate is enabled, you must call controls.update() in your animation loop
this.autoRotate=!1,this.autoRotateSpeed=2,// 30 seconds per round when fps is 60
// Set to false to disable use of the keys
this.enableKeys=!0,
// The four arrow keys
this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},
// Mouse buttons
this.mouseButtons={ORBIT:i.MOUSE.LEFT,ZOOM:i.MOUSE.MIDDLE,PAN:i.MOUSE.RIGHT},
// for reset
this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,
//
// public methods
//
this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),l=s.NONE},
// this method is exposed, but perhaps it would be better if we can make it private...
this.update=function(){var t=new i.Vector3,o=(new i.Quaternion).setFromUnitVectors(e.up,new i.Vector3(0,1,0)),a=o.clone().inverse(),m=new i.Vector3,g=new i.Quaternion;
// so camera.up is the orbit axis
return function(){var e=n.object.position;
// update condition is:
// min(camera displacement, camera rotation in radians)^2 > EPS
// using small-angle approximation cos(x/2) = 1 - x^2 / 8
return t.copy(e).sub(n.target),
// rotate offset to "y-axis-is-up" space
t.applyQuaternion(o),
// angle from z-axis around y-axis
u.setFromVector3(t),n.autoRotate&&l===s.NONE&&T(2*Math.PI/60/60*n.autoRotateSpeed),u.theta+=h.theta,u.phi+=h.phi,
// restrict theta to be between desired limits
u.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,u.theta)),
// restrict phi to be between desired limits
u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=d,
// restrict radius to be between desired limits
u.radius=Math.max(n.minDistance,Math.min(n.maxDistance,u.radius)),
// move target to panned location
n.target.add(p),t.setFromSpherical(u),
// rotate offset back to "camera-up-vector-is-up" space
t.applyQuaternion(a),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(h.set(0,0,0),p.set(0,0,0)),d=1,!!(f||m.distanceToSquared(n.object.position)>c||8*(1-g.dot(n.object.quaternion))>c)&&(n.dispatchEvent(r),m.copy(n.object.position),g.copy(n.object.quaternion),f=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",z,!1),n.domElement.removeEventListener("mousedown",O,!1),n.domElement.removeEventListener("wheel",D,!1),n.domElement.removeEventListener("touchstart",N,!1),n.domElement.removeEventListener("touchend",k,!1),n.domElement.removeEventListener("touchmove",F,!1),document.removeEventListener("mousemove",I,!1),document.removeEventListener("mouseup",B,!1),window.removeEventListener("keydown",U,!1)};
//
// internals
//
var n=this,r={type:"change"},o={type:"start"},a={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},l=s.NONE,c=1e-6,u=new i.Spherical,h=new i.Spherical,d=1,p=new i.Vector3,f=!1,m=new i.Vector2,g=new i.Vector2,v=new i.Vector2,y=new i.Vector2,x=new i.Vector2,b=new i.Vector2,_=new i.Vector2,w=new i.Vector2,M=new i.Vector2;function E(){return Math.pow(.95,n.zoomSpeed)}function T(e){h.theta-=e}function A(e){h.phi-=e}var S=function(){var e=new i.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),// get X column of objectMatrix
e.multiplyScalar(-t),p.add(e)}}(),C=function(){var e=new i.Vector3;return function(t,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),p.add(e)}}(),R=function(){var e=new i.Vector3;return function(t,i){var r=n.domElement===document?n.domElement.body:n.domElement;if(n.object.isPerspectiveCamera){
// perspective
var o=n.object.position;e.copy(o).sub(n.target);var a=e.length();
// half of the fov is center to top of screen
a*=Math.tan(n.object.fov/2*Math.PI/180),
// we use only clientHeight here so aspect ratio does not distort speed
S(2*t*a/r.clientHeight,n.object.matrix),C(2*i*a/r.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(
// orthographic
S(t*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),C(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(
// camera neither orthographic nor perspective
console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function L(e){n.object.isPerspectiveCamera?d/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function P(e){n.object.isPerspectiveCamera?d*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}
//
// event callbacks - update the object state
//
//console.log( 'handleTouchEnd' );
//
// event handlers - FSM: listen for events and reset state
//
function O(e){if(!1!==n.enabled){switch(e.preventDefault(),e.button){case n.mouseButtons.ORBIT:if(!1===n.enableRotate)return;!function(e){
//console.log( 'handleMouseDownRotate' );
m.set(e.clientX,e.clientY)}(e),l=s.ROTATE;break;case n.mouseButtons.ZOOM:if(!1===n.enableZoom)return;!function(e){
//console.log( 'handleMouseDownDolly' );
_.set(e.clientX,e.clientY)}(e),l=s.DOLLY;break;case n.mouseButtons.PAN:if(!1===n.enablePan)return;!function(e){
//console.log( 'handleMouseDownPan' );
y.set(e.clientX,e.clientY)}(e),l=s.PAN}l!==s.NONE&&(document.addEventListener("mousemove",I,!1),document.addEventListener("mouseup",B,!1),n.dispatchEvent(o))}}function I(e){if(!1!==n.enabled)switch(e.preventDefault(),l){case s.ROTATE:if(!1===n.enableRotate)return;!function(e){
//console.log( 'handleMouseMoveRotate' );
g.set(e.clientX,e.clientY),v.subVectors(g,m).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;
// rotating across whole screen goes 360 degrees around
T(2*Math.PI*v.x/t.clientWidth),
// rotating up and down along whole screen attempts to go 360, but limited to 180
A(2*Math.PI*v.y/t.clientHeight),m.copy(g),n.update()}(e);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(e){
//console.log( 'handleMouseMoveDolly' );
w.set(e.clientX,e.clientY),M.subVectors(w,_),M.y>0?L(E()):M.y<0&&P(E()),_.copy(w),n.update()}(e);break;case s.PAN:if(!1===n.enablePan)return;!function(e){
//console.log( 'handleMouseMovePan' );
x.set(e.clientX,e.clientY),b.subVectors(x,y).multiplyScalar(n.panSpeed),R(b.x,b.y),y.copy(x),n.update()}(e)}}function B(e){!1!==n.enabled&&(document.removeEventListener("mousemove",I,!1),document.removeEventListener("mouseup",B,!1),n.dispatchEvent(a),l=s.NONE)}function D(e){!1===n.enabled||!1===n.enableZoom||l!==s.NONE&&l!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(o),function(e){
// console.log( 'handleMouseWheel' );
e.deltaY<0?P(E()):e.deltaY>0&&L(E()),n.update()}(e),n.dispatchEvent(a))}function U(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(e){
//console.log( 'handleKeyDown' );
switch(e.keyCode){case n.keys.UP:R(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:R(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:R(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:R(-n.keyPanSpeed,0),n.update()}}(e)}function N(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:
// one-fingered touch: rotate
if(!1===n.enableRotate)return;!function(e){
//console.log( 'handleTouchStartRotate' );
m.set(e.touches[0].pageX,e.touches[0].pageY)}(e),l=s.TOUCH_ROTATE;break;case 2:
// two-fingered touch: dolly-pan
if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){
//console.log( 'handleTouchStartDollyPan' );
if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+i*i);_.set(0,r)}if(n.enablePan){var o=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(o,a)}}(e),l=s.TOUCH_DOLLY_PAN;break;default:l=s.NONE}l!==s.NONE&&n.dispatchEvent(o)}}function F(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:
// one-fingered touch: rotate
if(!1===n.enableRotate)return;if(l!==s.TOUCH_ROTATE)return;// is this needed?
!function(e){
//console.log( 'handleTouchMoveRotate' );
g.set(e.touches[0].pageX,e.touches[0].pageY),v.subVectors(g,m).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;
// rotating across whole screen goes 360 degrees around
T(2*Math.PI*v.x/t.clientWidth),
// rotating up and down along whole screen attempts to go 360, but limited to 180
A(2*Math.PI*v.y/t.clientHeight),m.copy(g),n.update()}(e);break;case 2:
// two-fingered touch: dolly-pan
if(!1===n.enableZoom&&!1===n.enablePan)return;if(l!==s.TOUCH_DOLLY_PAN)return;// is this needed?
!function(e){
//console.log( 'handleTouchMoveDollyPan' );
if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+i*i);w.set(0,r),M.set(0,Math.pow(w.y/_.y,n.zoomSpeed)),L(M.y),_.copy(w)}if(n.enablePan){var o=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(o,a),b.subVectors(x,y).multiplyScalar(n.panSpeed),R(b.x,b.y),y.copy(x)}n.update()}(e);break;default:l=s.NONE}}function k(e){!1!==n.enabled&&(n.dispatchEvent(a),l=s.NONE)}function z(e){!1!==n.enabled&&e.preventDefault()}
//
n.domElement.addEventListener("contextmenu",z,!1),n.domElement.addEventListener("mousedown",O,!1),n.domElement.addEventListener("wheel",D,!1),n.domElement.addEventListener("touchstart",N,!1),n.domElement.addEventListener("touchend",k,!1),n.domElement.addEventListener("touchmove",F,!1),window.addEventListener("keydown",U,!1),
// force an update at start
this.update()},i.OrbitControls.prototype=Object.create(i.EventDispatcher.prototype),i.OrbitControls.prototype.constructor=i.OrbitControls,Object.defineProperties(i.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},
// backward compatibility
noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})},
/***/"./src/vendor/threejs/effects/OutlineEffect.js":
/*!*****************************************************!*\
  !*** ./src/vendor/threejs/effects/OutlineEffect.js ***!
  \*****************************************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";var i=n(/*! three */"./node_modules/three/build/three.module.js");
/**
 * @author takahirox / http://github.com/takahirox/
 *
 * Reference: https://en.wikipedia.org/wiki/Cel_shading
 *
 * // How to set default outline parameters
 * new THREE.OutlineEffect( renderer, {
 * 	defaultThickNess: 0.01,
 * 	defaultColor: new THREE.Color( 0x888888 ),
 * 	defaultAlpha: 0.8,
 * 	defaultKeepAlive: true // keeps outline material in cache even if material is removed from scene
 * } );
 *
 * // How to set outline parameters for each material
 * material.outlineParameters = {
 * 	thickNess: 0.01,
 * 	color: new THREE.Color( 0x888888 ),
 * 	alpha: 0.8,
 * 	visible: true,
 * 	keepAlive: true
 * };
 *
 * TODO
 *  - support shader material without objectNormal in its vertexShader
 */i.OutlineEffect=function(e,t){t=t||{},this.enabled=!0;var n=void 0!==t.defaultThickness?t.defaultThickness:.003,r=void 0!==t.defaultColor?t.defaultColor:new i.Color(0),o=void 0!==t.defaultAlpha?t.defaultAlpha:1,a=void 0!==t.defaultKeepAlive&&t.defaultKeepAlive,s={},l=60,c={},u={},h={MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical"},d={outlineThickness:{type:"f",value:n},outlineColor:{type:"c",value:r},outlineAlpha:{type:"f",value:o}},p=["#include <fog_pars_vertex>","uniform float outlineThickness;","vec4 calculateOutline( vec4 pos, vec3 objectNormal, vec4 skinned ) {","\tfloat thickness = outlineThickness;","\tconst float ratio = 1.0;",// TODO: support outline thickness ratio for each vertex
"\tvec4 pos2 = projectionMatrix * modelViewMatrix * vec4( skinned.xyz + objectNormal, 1.0 );",
// NOTE: subtract pos2 from pos because BackSide objectNormal is negative
"\tvec4 norm = normalize( pos - pos2 );","\treturn pos + norm * thickness * pos.w * ratio;","}"].join("\n"),f=["#if ! defined( LAMBERT ) && ! defined( PHONG ) && ! defined( TOON ) && ! defined( PHYSICAL )","\t#ifndef USE_ENVMAP","\t\tvec3 objectNormal = normalize( normal );","\t#endif","#endif","#ifdef FLIP_SIDED","\tobjectNormal = -objectNormal;","#endif","#ifdef DECLARE_TRANSFORMED","\tvec3 transformed = vec3( position );","#endif","gl_Position = calculateOutline( gl_Position, objectNormal, vec4( transformed, 1.0 ) );","#include <fog_vertex>"].join("\n"),m=["#include <common>","#include <fog_pars_fragment>","uniform vec3 outlineColor;","uniform float outlineAlpha;","void main() {","\tgl_FragColor = vec4( outlineColor, outlineAlpha );","\t#include <fog_fragment>","}"].join("\n");function g(){return new i.ShaderMaterial({name:"invisible",visible:!1})}function v(e){var t=s[e.uuid];return void 0===t&&(t={material:function(e){var t,n,r=h[e.type];if(e.outlineParameters,void 0!==r){var o=i.ShaderLib[r];t=o.uniforms,n=o.vertexShader}else if(!0===e.isRawShaderMaterial){if(t=e.uniforms,n=e.vertexShader,!/attribute\s+vec3\s+position\s*;/.test(n)||!/attribute\s+vec3\s+normal\s*;/.test(n))return console.warn("THREE.OutlineEffect requires both vec3 position and normal attributes in vertex shader, does not draw outline for "+e.name+"(uuid:"+e.uuid+") material."),g()}else{if(!0!==e.isShaderMaterial)return g();t=e.uniforms,n=e.vertexShader}var a=Object.assign({},t,d),s=n.replace(/void\s+main\s*\(\s*\)/,p+"\nvoid main()").replace(/\}\s*$/,f+"\n}").replace(/#include\s+<[\w_]*light[\w_]*>/g,""),l={};return/vec3\s+transformed\s*=/.test(n)||/#include\s+<begin_vertex>/.test(n)||(l.DECLARE_TRANSFORMED=!0),new i.ShaderMaterial({defines:l,uniforms:a,vertexShader:s,fragmentShader:m,side:i.BackSide,
//wireframe: true,
skinning:!1,morphTargets:!1,morphNormals:!1,fog:!1})}(e),used:!0,keepAlive:a,count:0},s[e.uuid]=t),t.used=!0,t.material}function y(e){var t=v(e);return c[t.uuid]=e,function(e,t){if("invisible"===e.name)return;var n=t.outlineParameters;e.skinning=t.skinning,e.morphTargets=t.morphTargets,e.morphNormals=t.morphNormals,e.fog=t.fog,void 0!==n?(!1===t.visible?e.visible=!1:e.visible=void 0===n.visible||n.visible,e.transparent=void 0!==n.alpha&&n.alpha<1||t.transparent,void 0!==n.keepAlive&&(s[t.uuid].keepAlive=n.keepAlive)):(e.transparent=t.transparent,e.visible=t.visible);!0!==t.wireframe&&!1!==t.depthTest||(e.visible=!1)}(t,e),t}function x(e){if(void 0!==e.material){if(Array.isArray(e.material))for(var t=0,n=e.material.length;t<n;t++)e.material[t]=y(e.material[t]);else e.material=y(e.material);u[e.uuid]=e.onBeforeRender,e.onBeforeRender=_}}function b(e){if(void 0!==e.material){if(Array.isArray(e.material))for(var t=0,n=e.material.length;t<n;t++)e.material[t]=c[e.material[t].uuid];else e.material=c[e.material.uuid];e.onBeforeRender=u[e.uuid]}}function _(e,t,n,i,r,o){var a=c[r.uuid];
// just in case
void 0!==a&&function(e,t){var n=t.outlineParameters;e.uniforms.outlineAlpha.value=t.opacity,void 0!==n&&(void 0!==n.thickness&&(e.uniforms.outlineThickness.value=n.thickness),void 0!==n.color&&e.uniforms.outlineColor.value.copy(n.color),void 0!==n.alpha&&(e.uniforms.outlineAlpha.value=n.alpha))}(r,a)}this.render=function(t,n,i,r){if(!1!==this.enabled){var o=e.autoClear;e.autoClear=this.autoClear,
// 1. render normally
e.render(t,n,i,r);
// 2. render outline
var a=t.autoUpdate,h=t.background,d=e.shadowMap.enabled;t.autoUpdate=!1,t.background=null,e.autoClear=!1,e.shadowMap.enabled=!1,t.traverse(x),e.render(t,n,i),t.traverse(b),function(){for(var e,t=0,n=(
// clear originialMaterials
e=Object.keys(c)).length;t<n;t++)c[e[t]]=void 0;
// clear originalOnBeforeRenders
for(t=0,n=(e=Object.keys(u)).length;t<n;t++)u[e[t]]=void 0;
// remove unused outlineMaterial from cache
for(t=0,n=(e=Object.keys(s)).length;t<n;t++){var i=e[t];!1===s[i].used?(s[i].count++,!1===s[i].keepAlive&&s[i].count>l&&delete s[i]):(s[i].used=!1,s[i].count=0)}}(),t.autoUpdate=a,t.background=h,e.autoClear=o,e.shadowMap.enabled=d}else e.render(t,n,i,r)},
/*
  * See #9918
  *
  * The following property copies and wrapper methods enable
  * THREE.OutlineEffect to be called from other *Effect, like
  *
  * effect = new THREE.VREffect( new THREE.OutlineEffect( renderer ) );
  *
  * function render () {
  *
 	 * 	effect.render( scene, camera );
  *
  * }
  */
this.autoClear=e.autoClear,this.domElement=e.domElement,this.shadowMap=e.shadowMap,this.clear=function(t,n,i){e.clear(t,n,i)},this.getPixelRatio=function(){return e.getPixelRatio()},this.setPixelRatio=function(t){e.setPixelRatio(t)},this.getSize=function(){return e.getSize()},this.setSize=function(t,n,i){e.setSize(t,n,i)},this.setViewport=function(t,n,i,r){e.setViewport(t,n,i,r)},this.setScissor=function(t,n,i,r){e.setScissor(t,n,i,r)},this.setScissorTest=function(t){e.setScissorTest(t)},this.setRenderTarget=function(t){e.setRenderTarget(t)}}},
/***/"./src/vendor/threejs/loaders/MMDLoader.js":
/*!*************************************************!*\
  !*** ./src/vendor/threejs/loaders/MMDLoader.js ***!
  \*************************************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";var i=n(/*! three */"./node_modules/three/build/three.module.js"),r=n(/*! vendor_threejs/utils/mmdparser.min */"./src/vendor/threejs/utils/mmdparser.min.js");
/**
 * @author takahiro / https://github.com/takahirox
 *
 * Dependencies
 *  - mmd-parser https://github.com/takahirox/mmd-parser
 *  - ammo.js https://github.com/kripken/ammo.js
 *  - THREE.TGALoader
 *  - THREE.MMDPhysics
 *  - THREE.CCDIKSolver
 *  - THREE.OutlineEffect
 *
 *
 * This loader loads and parses PMD/PMX and VMD binary files
 * then creates mesh for Three.js.
 *
 * PMD/PMX is a model data format and VMD is a motion data format
 * used in MMD(Miku Miku Dance).
 *
 * MMD is a 3D CG animation tool which is popular in Japan.
 *
 *
 * MMD official site
 *  http://www.geocities.jp/higuchuu4/index_e.htm
 *
 * PMD, VMD format
 *  http://blog.goo.ne.jp/torisu_tetosuki/e/209ad341d3ece2b1b4df24abf619d6e4
 *
 * PMX format
 *  http://gulshan-i-raz.geo.jp/labs/2012/10/17/pmx-format1/
 *
 *
 * TODO
 *  - light motion in vmd support.
 *  - SDEF support.
 *  - uv/material/bone morphing support.
 *  - more precise grant skinning support.
 *  - shadow support.
 */
i.MMDLoader=function(e){i.Loader.call(this),this.manager=void 0!==e?e:i.DefaultLoadingManager,this.parser=new r.Parser,this.textureCrossOrigin=null},i.MMDLoader.prototype=Object.create(i.Loader.prototype),i.MMDLoader.prototype.constructor=i.MMDLoader,
/*
 * base64 encoded defalut toon textures toon00.bmp - toon10.bmp
 * Users don't need to prepare default texture files.
 *
 * This idea is from http://www20.atpages.jp/katwat/three.js_r58/examples/mytest37/mmd.three.js
 */
i.MMDLoader.prototype.defaultToonTextures=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/bWiiMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh8aBHZBl14e8wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOUlEQVRYR+3WMREAMAwDsYY/yoDI7MLwIiP40+RJklfcCCBAgAABAgTqArfb/QMCCBAgQIAAgbbAB3z/e0F3js2cAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/B5ilMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh81dWyx0gFwKAAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOklEQVRYR+3WoREAMAwDsWb/UQtCy9wxTOQJ/oQ8SXKKGwEECBAgQIBAXeDt7f4BAQQIECBAgEBb4AOz8Hzx7WLY4wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABPUlEQVRYR+1XwW7CMAy1+f9fZOMysSEOEweEOPRNdm3HbdOyIhAcklPrOs/PLy9RygBALxzcCDQFmgJNgaZAU6Ap0BR4PwX8gsRMVLssMRH5HcpzJEaWL7EVg9F1IHRlyqQohgVr4FGUlUcMJSjcUlDw0zvjeun70cLWmneoyf7NgBTQSniBTQQSuJAZsOnnaczjIMb5hCiuHKxokCrJfVnrctyZL0PkJAJe1HMil4nxeyi3Ypfn1kX51jpPvo/JeCNC4PhVdHdJw2XjBR8brF8PEIhNVn12AgP7uHsTBguBn53MUZCqv7Lp07Pn5k1Ro+uWmUNn7D+M57rtk7aG0Vo73xyF/fbFf0bPJjDXngnGocDTdFhygZjwUQrMNrDcmZlQT50VJ/g/UwNyHpu778+yW+/ksOz/BFo54P4AsUXMfRq7XWsAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACMElEQVRYR+2Xv4pTQRTGf2dubhLdICiii2KnYKHVolhauKWPoGAnNr6BD6CvIVaihYuI2i1ia0BY0MZGRHQXjZj/mSPnnskfNWiWZUlzJ5k7M2cm833nO5Mziej2DWWJRUoCpQKlAntSQCqgw39/iUWAGmh37jrRnVsKlgpiqmkoGVABA7E57fvY+pJDdgKqF6HzFCSADkDq+F6AHABtQ+UMVE5D7zXod7fFNhTEckTbj5XQgHzNN+5tQvc5NG7C6BNkp6D3EmpXHDR+dQAjFLchW3VS9rlw3JBh+B7ys5Cf9z0GW1C/7P32AyBAOAz1q4jGliIH3YPuBnSfQX4OGreTIgEYQb/pBDtPnEQ4CivXYPAWBk13oHrB54yA9QuSn2H4AcKRpEILDt0BUzj+RLR1V5EqjD66NPRBVpLcQwjHoHYJOhsQv6U4mnzmrIXJCFr4LDwm/xBUoboG9XX4cc9VKdYoSA2yk5NQLJaKDUjTBoveG3Z2TElTxwjNK4M3LEZgUdDdruvcXzKBpStgp2NPiWi3ks9ZXxIoFVi+AvHLdc9TqtjL3/aYjpPlrzOcEnK62Szhimdd7xX232zFDTgtxezOu3WNMRLjiKgjtOhHVMd1loynVHvOgjuIIJMaELEqhJAV/RCSLbWTcfPFakFgFlALTRRvx+ok6Hlp/Q+v3fmx90bMyUzaEAhmM3KvHlXTL5DxnbGf/1M8RNNACLL5MNtPxP/mypJAqcDSFfgFhpYqWUzhTEAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII="],
/*
 * Set 'anonymous' for the the texture image file in other domain
 * even if server responds with "Access-Control-Allow-Origin: *"
 * because some image operation fails in MMDLoader.
 */
i.MMDLoader.prototype.setTextureCrossOrigin=function(e){this.textureCrossOrigin=e},i.MMDLoader.prototype.load=function(e,t,n,i,r){var o=this;this.loadModel(e,function(e){o.loadVmds(t,function(t){o.pourVmdIntoModel(e,t),n(e)},i,r)},i,r)},i.MMDLoader.prototype.loadModel=function(e,t,n,r){var o=this,a=i.LoaderUtils.extractUrlBase(e),s=this.extractExtension(e);this.loadFileAsBuffer(e,function(e){t(o.createModel(e,s,a,n,r))},n,r)},i.MMDLoader.prototype.createModel=function(e,t,n,i,r){return this.createMesh(this.parseModel(e,t),n,i,r)},i.MMDLoader.prototype.loadVmd=function(e,t,n,i){var r=this;this.loadFileAsBuffer(e,function(e){t(r.parseVmd(e))},n,i)},i.MMDLoader.prototype.loadVmds=function(e,t,n,i){var r=this,o=[];e=e.slice(),function a(){var s=e.shift();r.loadVmd(s,function(n){o.push(n),e.length>0?a():t(r.mergeVmds(o))},n,i)}()},i.MMDLoader.prototype.loadAudio=function(e,t,n,r){var o=new i.AudioListener,a=new i.Audio(o);new i.AudioLoader(this.manager).load(e,function(e){a.setBuffer(e),t(a,o)},n,r)},i.MMDLoader.prototype.loadVpd=function(e,t,n,i,r){var o=this;(r&&"unicode"===r.charcode?this.loadFileAsText:this.loadFileAsShiftJISText).bind(this)(e,function(e){t(o.parseVpd(e))},n,i)},i.MMDLoader.prototype.parseModel=function(e,t){
// Should I judge from model data header?
switch(t.toLowerCase()){case"pmd":return this.parsePmd(e);case"pmx":return this.parsePmx(e);default:throw"extension "+t+" is not supported."}},i.MMDLoader.prototype.parsePmd=function(e){return this.parser.parsePmd(e,!0)},i.MMDLoader.prototype.parsePmx=function(e){return this.parser.parsePmx(e,!0)},i.MMDLoader.prototype.parseVmd=function(e){return this.parser.parseVmd(e,!0)},i.MMDLoader.prototype.parseVpd=function(e){return this.parser.parseVpd(e,!0)},i.MMDLoader.prototype.mergeVmds=function(e){return this.parser.mergeVmds(e)},i.MMDLoader.prototype.pourVmdIntoModel=function(e,t,n){this.createAnimation(e,t,n)},i.MMDLoader.prototype.pourVmdIntoCamera=function(e,t,n){var r=new i.MMDLoader.DataCreationHelper;!function(){for(var o=r.createOrderedMotionArray(t.cameras),a=[],s=[],l=[],c=[],u=[],h=[],d=[],p=[],f=[],m=new i.Quaternion,g=new i.Euler,v=new i.Vector3,y=new i.Vector3,x=function(e,t){e.push(t.x),e.push(t.y),e.push(t.z)},b=function(e,t){e.push(t.x),e.push(t.y),e.push(t.z),e.push(t.w)},_=function(e,t,n){e.push(t[4*n+0]/127),// x1
e.push(t[4*n+1]/127),// x2
e.push(t[4*n+2]/127),// y1
e.push(t[4*n+3]/127)},w=function(e,t,n,r,o){
/*
    * optimizes here not to let KeyframeTrackPrototype optimize
    * because KeyframeTrackPrototype optimizes times and values but
    * doesn't optimize interpolations.
    */
if(n.length>2){n=n.slice(),r=r.slice(),o=o.slice();for(var a=r.length/n.length,s=3===a?12:4,l=1,c=2,u=n.length;c<u;c++){for(var h=0;h<a;h++)if(r[l*a+h]!==r[(l-1)*a+h]||r[l*a+h]!==r[c*a+h]){l++;break}if(c>l){for(n[l]=n[c],h=0;h<a;h++)r[l*a+h]=r[c*a+h];for(h=0;h<s;h++)o[l*s+h]=o[c*s+h]}}n.length=l+1,r.length=(l+1)*a,o.length=(l+1)*s}return new i.MMDLoader[t](e,n,r,o)},M=0;M<o.length;M++){var E=o[M],T=E.frameNum/30,A=E.position,S=E.rotation,C=E.distance,R=E.fov,L=E.interpolation;v.set(0,0,-C),y.set(A[0],A[1],A[2]),g.set(-S[0],-S[1],-S[2]),m.setFromEuler(g),v.add(y),v.applyQuaternion(m),
/*
    * Note: This is a workaround not to make Animation system calculate lerp
    *       if the diff from the last frame is 1 frame (in 30fps).
    */
a.length>0&&T<a[a.length-1]+.05&&(a[a.length-1]=T-1e-13),a.push(T),x(s,y),b(l,m),x(c,v),u.push(R);for(var P=0;P<3;P++)_(h,L,P);
// use same one parameter for x, y, z axis.
for(_(d,L,3),P=0;P<3;P++)_(p,L,4);_(f,L,5)}if(0!==a.length){var O=[];O.push(w(".center","VectorKeyframeTrackEx",a,s,h)),O.push(w(".quaternion","QuaternionKeyframeTrackEx",a,l,d)),O.push(w(".position","VectorKeyframeTrackEx",a,c,p)),O.push(w(".fov","NumberKeyframeTrackEx",a,u,f));var I=new i.AnimationClip(void 0===n?i.Math.generateUUID():n,-1,O);void 0===e.center&&(e.center=new i.Vector3(0,0,0)),void 0===e.animations&&(e.animations=[]),e.animations.push(I)}}()},i.MMDLoader.prototype.extractExtension=function(e){var t=e.lastIndexOf(".");return t<0?null:e.slice(t+1)},i.MMDLoader.prototype.loadFile=function(e,t,n,r,o,a){var s=new i.FileLoader(this.manager);return void 0!==a&&s.setMimeType(a),s.setResponseType(o),s.load(e,function(e){t(e)},n,r)},i.MMDLoader.prototype.loadFileAsBuffer=function(e,t,n,i){this.loadFile(e,t,n,i,"arraybuffer")},i.MMDLoader.prototype.loadFileAsText=function(e,t,n,i){this.loadFile(e,t,n,i,"text")},i.MMDLoader.prototype.loadFileAsShiftJISText=function(e,t,n,i){this.loadFile(e,t,n,i,"text","text/plain; charset=shift_jis")},i.MMDLoader.prototype.createMesh=function(e,t,n,r){var o=this,a=new i.BufferGeometry,s=[],l={vertices:[],uvs:[],normals:[],skinIndices:[],skinWeights:[],indices:[]};
// console.log( mesh ); // for console debug
return function(){for(var t=0;t<e.metadata.vertexCount;t++){for(var n=e.vertices[t],i=0,r=n.position.length;i<r;i++)l.vertices.push(n.position[i]);for(i=0,r=n.normal.length;i<r;i++)l.normals.push(n.normal[i]);for(i=0,r=n.uv.length;i<r;i++)l.uvs.push(n.uv[i]);for(i=0;i<4;i++)l.skinIndices.push(n.skinIndices.length-1>=i?n.skinIndices[i]:0);for(i=0;i<4;i++)l.skinWeights.push(n.skinWeights.length-1>=i?n.skinWeights[i]:0)}}(),function(){for(var t=0;t<e.metadata.faceCount;t++)for(var n=e.faces[t],i=0,r=n.indices.length;i<r;i++)l.indices.push(n.indices[i])}(),function(){for(var t=[],n=e.rigidBodies,i={},r=0,o=n.length;r<o;r++){var s=n[r],l=i[s.boneIndex];
// keeps greater number if already value is set without any special reasons
l=void 0===l?s.type:Math.max(s.type,l),i[s.boneIndex]=l}for(r=0;r<e.metadata.boneCount;r++){var c={},u=e.bones[r];c.parent=u.parentIndex,c.name=u.name,c.pos=[u.position[0],u.position[1],u.position[2]],c.rotq=[0,0,0,1],c.scl=[1,1,1],-1!==c.parent&&(c.pos[0]-=e.bones[c.parent].position[0],c.pos[1]-=e.bones[c.parent].position[1],c.pos[2]-=e.bones[c.parent].position[2]),c.rigidBodyType=void 0!==i[r]?i[r]:-1,t.push(c)}a.bones=t}(),function(){var t=[];
// TODO: remove duplicated codes between PMD and PMX
if("pmd"===e.metadata.format)for(var n=0;n<e.metadata.ikCount;n++){var r=e.iks[n];(s={}).target=r.target,s.effector=r.effector,s.iteration=r.iteration,s.maxAngle=4*r.maxAngle,s.links=[];for(var o=0;o<r.links.length;o++)(l={}).index=r.links[o].index,e.bones[l.index].name.indexOf("ひざ")>=0&&(l.limitation=new i.Vector3(1,0,0)),s.links.push(l);t.push(s)}else for(n=0;n<e.metadata.boneCount;n++)if(void 0!==(r=e.bones[n].ik)){var s;for((s={}).target=n,s.effector=r.effector,s.iteration=r.iteration,s.maxAngle=r.maxAngle,s.links=[],o=0;o<r.links.length;o++){var l;(l={}).index=r.links[o].index,l.enabled=!0,1===r.links[o].angleLimitation&&(l.limitation=new i.Vector3(1,0,0)),s.links.push(l)}t.push(s)}a.iks=t}(),function(){if("pmd"!==e.metadata.format){for(var t=[],n=0;n<e.metadata.boneCount;n++){var i=e.bones[n],r=i.grant;if(void 0!==r){var o={};o.index=n,o.parentIndex=r.parentIndex,o.ratio=r.ratio,o.isLocal=r.isLocal,o.affectRotation=r.affectRotation,o.affectPosition=r.affectPosition,o.transformationClass=i.transformationClass,t.push(o)}}t.sort(function(e,t){return e.transformationClass-t.transformationClass}),a.grants=t}}(),function(){function t(e,t,n,i){e.array[3*t+0]+=n.position[0]*i,e.array[3*t+1]+=n.position[1]*i,e.array[3*t+2]+=n.position[2]*i}function n(n,i,r){for(var o=0;o<i.elementCount;o++){var a=i.elements[o];t(n,"pmd"===e.metadata.format?e.morphs[0].elements[a.index].index:a.index,a,r)}}for(var r=[],o=[],s=0;s<e.metadata.morphCount;s++){var c=e.morphs[s],u={name:c.name},h=new i.Float32BufferAttribute(3*e.metadata.vertexCount,3);h.name=c.name;for(var d=0;d<3*e.metadata.vertexCount;d++)h.array[d]=l.vertices[d];if("pmd"===e.metadata.format)0!==s&&n(h,c,1);else if(0===c.type)
// group
for(d=0;d<c.elementCount;d++){var p=e.morphs[c.elements[d].index],f=c.elements[d].ratio;1===p.type&&n(h,p,f)}else 1===c.type?
// vertex
n(h,c,1):2===c.type||3===c.type||4===c.type||5===c.type||6===c.type||7===c.type||c.type;r.push(u),o.push(h)}a.morphTargets=r,a.morphAttributes.position=o}(),function(){var l={},c=new i.TextureLoader(o.manager),u=new i.TGALoader(o.manager),h=document.createElement("canvas"),d=h.getContext("2d"),p=0,f=[];function m(e,a){var s;if(void 0===a&&(a={}),!0===a.defaultTexturePath)try{s=o.defaultToonTextures[parseInt(e.match("toon([0-9]{2}).bmp$")[1])]}catch(t){console.warn("THREE.MMDLoader: "+e+" seems like not right default texture path. Using toon00.bmp instead."),s=o.defaultToonTextures[0]}else s=t+e;if(void 0!==l[s])return s;var p=i.Loader.Handlers.get(s);null===p&&(p=e.indexOf(".tga")>=0?u:c);var f=p.load(s,function(e){
// MMD toon texture is Axis-Y oriented
// but Three.js gradient map is Axis-X oriented.
// So here replaces the toon texture image with the rotated one.
if(!0===a.isToonTexture){var t=e.image,n=t.width,r=t.height;h.width=n,h.height=r,d.clearRect(0,0,n,r),d.translate(n/2,r/2),d.rotate(.5*Math.PI),// 90.0 * Math.PI / 180.0
d.translate(-n/2,-r/2),d.drawImage(t,0,0),e.image=d.getImageData(0,0,n,r)}e.flipY=!1,e.wrapS=i.RepeatWrapping,e.wrapT=i.RepeatWrapping;for(var o=0;o<f.readyCallbacks.length;o++)f.readyCallbacks[o](f);delete f.readyCallbacks},n,r);return!0===a.sphericalReflectionMapping&&(f.mapping=i.SphericalReflectionMapping),f.readyCallbacks=[],l[s]=f,s}function g(e,t){return void 0===t[e]&&console.warn("THREE.MMDLoader: Undefined texture",e),t[e]}null!==o.textureCrossOrigin&&c.setCrossOrigin(o.textureCrossOrigin);for(var v=0;v<e.metadata.materialCount;v++){var y=e.materials[v],x={};if(x.faceOffset=p,x.faceNum=y.faceCount,p+=y.faceCount,x.name=y.name,
/*
    * Color
    *
    * MMD         MeshToonMaterial
    * diffuse  -  color
    * specular -  specular
    * ambient  -  emissive * a
    *               (a = 1.0 without map texture or 0.2 with map texture)
    *
    * MeshToonMaterial doesn't have ambient. Set it to emissive instead.
    * It'll be too bright if material has map texture so using coef 0.2.
    */
x.color=new i.Color(y.diffuse[0],y.diffuse[1],y.diffuse[2]),x.opacity=y.diffuse[3],x.specular=new i.Color(y.specular[0],y.specular[1],y.specular[2]),x.shininess=y.shininess,1===x.opacity?(x.side=i.FrontSide,x.transparent=!1):(x.side=i.DoubleSide,x.transparent=!0),"pmd"===e.metadata.format){if(y.fileName){var b=y.fileName,_=[],w=b.lastIndexOf("*");w>=0?(_.push(b.slice(0,w)),_.push(b.slice(w+1))):_.push(b);for(var M=0;M<_.length;M++)(E=_[M]).indexOf(".sph")>=0||E.indexOf(".spa")>=0?(x.envMap=m(E,{sphericalReflectionMapping:!0}),E.indexOf(".sph")>=0?x.envMapType=i.MultiplyOperation:x.envMapType=i.AddOperation):x.map=m(E)}}else{if(-1!==y.textureIndex){var E=e.textures[y.textureIndex];x.map=m(E)}
// TODO: support m.envFlag === 3
-1===y.envTextureIndex||1!==y.envFlag&&2!=y.envFlag||(E=e.textures[y.envTextureIndex],x.envMap=m(E,{sphericalReflectionMapping:!0}),1===y.envFlag?x.envMapType=i.MultiplyOperation:x.envMapType=i.AddOperation)}var T=void 0===x.map?1:.2;x.emissive=new i.Color(y.ambient[0]*T,y.ambient[1]*T,y.ambient[2]*T),f.push(x)}for(v=0;v<f.length;v++){var A=f[v],S=e.materials[v];// to prevent pow( 0.0, 0.0 )
if(y=new i.MeshToonMaterial,a.addGroup(3*A.faceOffset,3*A.faceNum,v),void 0!==A.name&&(y.name=A.name),y.skinning=a.bones.length>0,y.morphTargets=a.morphTargets.length>0,y.lights=!0,y.side="pmx"===e.metadata.format&&1==(1&S.flag)?i.DoubleSide:A.side,y.transparent=A.transparent,y.fog=!0,y.blending=i.CustomBlending,y.blendSrc=i.SrcAlphaFactor,y.blendDst=i.OneMinusSrcAlphaFactor,y.blendSrcAlpha=i.SrcAlphaFactor,y.blendDstAlpha=i.DstAlphaFactor,void 0!==A.map&&(y.faceOffset=A.faceOffset,y.faceNum=A.faceNum,y.map=g(A.map,l),function(e){e.map.readyCallbacks.push(function(t){
/*
       * This method expects
       *   t.flipY = false
       *   t.wrapS = THREE.RepeatWrapping
       *   t.wrapT = THREE.RepeatWrapping
       * TODO: more precise
       */
function n(e,t){var n=e.width,i=e.height,r=Math.round(t.x*n)%n,o=Math.round(t.y*i)%i;r<0&&(r+=n),o<0&&(o+=i);var a=o*n+r;return e.data[4*a+3]}var i=void 0!==t.image.data?t.image:
// Is there any efficient ways?
function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n.drawImage(e,0,0),n.getImageData(0,0,t.width,t.height)}(t.image),r=a.index.array.slice(3*e.faceOffset,3*e.faceOffset+3*e.faceNum);(function(e,t,i){var r=e.width,o=e.height;if(e.data.length/(r*o)!=4)return!1;for(var a=0;a<i.length;a+=3){for(var s={x:0,y:0},l=0;l<3;l++){var c=i[3*a+l],u={x:t[2*c+0],y:t[2*c+1]};if(n(e,u)<253)return!0;s.x+=u.x,s.y+=u.y}if(s.x/=3,s.y/=3,n(e,s)<253)return!0}return!1})(i,a.attributes.uv.array,r)&&(e.transparent=!0),delete e.faceOffset,delete e.faceNum})}(y)),void 0!==A.envMap&&(y.envMap=g(A.envMap,l),y.combine=A.envMapType),y.opacity=A.opacity,y.color=A.color,void 0!==A.emissive&&(y.emissive=A.emissive),y.specular=A.specular,y.shininess=Math.max(A.shininess,1e-4),"pmd"===e.metadata.format){
// parameters for OutlineEffect
y.outlineParameters={thickness:1===S.edgeFlag?.003:0,color:new i.Color(0,0,0),alpha:1},0===y.outlineParameters.thickness&&(y.outlineParameters.visible=!1);var C=m(R=-1===S.toonIndex?"toon00.bmp":e.toonTextures[S.toonIndex].fileName,{isToonTexture:!0,defaultTexturePath:function(e){return 10===e.length&&null!==e.match(/toon(10|0[0-9]).bmp/)}(R)});y.gradientMap=g(C,l)}else{var R,L;if(
// parameters for OutlineEffect
y.outlineParameters={thickness:S.edgeSize/300,color:new i.Color(S.edgeColor[0],S.edgeColor[1],S.edgeColor[2]),alpha:S.edgeColor[3]},0!=(16&S.flag)&&0!==y.outlineParameters.thickness||(y.outlineParameters.visible=!1),-1===S.toonIndex||0!==S.toonFlag){var P=S.toonIndex+1;R="toon"+(P<10?"0"+P:P)+".bmp",L=!0}else R=e.textures[S.toonIndex],L=!1;C=m(R,{isToonTexture:!0,defaultTexturePath:L}),y.gradientMap=g(C,l)}s.push(y)}if("pmx"===e.metadata.format){var O=function(e,t){if(8===e.type)for(var n=0;n<t.length;n++){var i=t[n];if(-1!==i.index){var r=s[i.index];r.opacity!==i.diffuse[3]&&(r.transparent=!0)}}};for(v=0;v<e.morphs.length;v++){var I=e.morphs[v],B=I.elements;if(0===I.type)for(M=0;M<B.length;M++){var D=e.morphs[B[M].index];O(D,D.elements)}else O(I,B)}}}(),function(){for(var t=[],n=[],i=0;i<e.metadata.rigidBodyCount;i++){for(var r=e.rigidBodies[i],o=Object.keys(r),s={},l=0;l<o.length;l++)s[h=o[l]]=r[h];
/*
    * RigidBody position parameter in PMX seems global position
    * while the one in PMD seems offset from corresponding bone.
    * So unify being offset.
    */if("pmx"===e.metadata.format&&-1!==s.boneIndex){var c=e.bones[s.boneIndex];s.position[0]-=c.position[0],s.position[1]-=c.position[1],s.position[2]-=c.position[2]}t.push(s)}for(i=0;i<e.metadata.constraintCount;i++){var u=e.constraints[i];for(o=Object.keys(u),s={},l=0;l<o.length;l++){var h;s[h=o[l]]=u[h]}var d=t[s.rigidBodyIndex1],p=t[s.rigidBodyIndex2];
/*
    * Refer to http://www20.atpages.jp/katwat/wp/?p=4135
    */
0!==d.type&&2===p.type&&-1!==d.boneIndex&&-1!==p.boneIndex&&e.bones[p.boneIndex].parentIndex===d.boneIndex&&(p.type=1),n.push(s)}a.rigidBodies=t,a.constraints=n}(),a.setIndex(l.indices),a.addAttribute("position",new i.Float32BufferAttribute(l.vertices,3)),a.addAttribute("normal",new i.Float32BufferAttribute(l.normals,3)),a.addAttribute("uv",new i.Float32BufferAttribute(l.uvs,2)),a.addAttribute("skinIndex",new i.Uint16BufferAttribute(l.skinIndices,4)),a.addAttribute("skinWeight",new i.Float32BufferAttribute(l.skinWeights,4)),a.computeBoundingSphere(),a.mmdFormat=e.metadata.format,new i.SkinnedMesh(a,s)},i.MMDLoader.prototype.createAnimation=function(e,t,n){var r=new i.MMDLoader.DataCreationHelper;!function(){if(0!==t.metadata.motionCount){for(var o=e.geometry.bones,a=r.createOrderedMotionArrays(o,t.motions,"boneName"),s=[],l=function(e,t,n){e.push(t[n+0]/127),// x1
e.push(t[n+8]/127),// x2
e.push(t[n+4]/127),// y1
e.push(t[n+12]/127)},c=0;c<a.length;c++){for(var u=[],h=[],d=[],p=[],f=[],m=o[c],g=a[c],v=0;v<g.length;v++){var y=g[v].frameNum/30,x=g[v].position,b=g[v].rotation,_=g[v].interpolation;u.push(y);for(var w=0;w<3;w++)h.push(m.pos[w]+x[w]);for(w=0;w<4;w++)d.push(b[w]);for(w=0;w<3;w++)l(p,_,w);l(f,_,3)}if(0!==u.length){var M=".bones["+m.name+"]";s.push(new i.MMDLoader.VectorKeyframeTrackEx(M+".position",u,h,p)),s.push(new i.MMDLoader.QuaternionKeyframeTrackEx(M+".quaternion",u,d,f))}}var E=new i.AnimationClip(void 0===n?i.Math.generateUUID():n,-1,s);void 0===e.geometry.animations&&(e.geometry.animations=[]),e.geometry.animations.push(E)}}(),function(){if(0!==t.metadata.morphCount){for(var o=r.createOrderedMotionArrays(e.geometry.morphTargets,t.morphs,"morphName"),a=[],s=0;s<o.length;s++){for(var l=[],c=[],u=o[s],h=0;h<u.length;h++)l.push(u[h].frameNum/30),c.push(u[h].weight);0!==l.length&&a.push(new i.NumberKeyframeTrack(".morphTargetInfluences["+s+"]",l,c))}var d=new i.AnimationClip(void 0===n?i.Math.generateUUID():n+"Morph",-1,a);void 0===e.geometry.animations&&(e.geometry.animations=[]),e.geometry.animations.push(d)}}()},i.MMDLoader.DataCreationHelper=function(){},i.MMDLoader.DataCreationHelper.prototype={constructor:i.MMDLoader.DataCreationHelper,
/*
  * Note: Sometimes to use Japanese Unicode characters runs into problems in Three.js.
  *       In such a case, use this method to convert it to Unicode hex charcode strings,
  *       like 'あいう' -> '0x30420x30440x3046'
  */
toCharcodeStrings:function(e){for(var t="",n=0;n<e.length;n++)t+="0x"+("0000"+e[n].charCodeAt().toString(16)).substr(-4);return t},createDictionary:function(e){for(var t={},n=0;n<e.length;n++)t[e[n].name]=n;return t},initializeMotionArrays:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=[];return t},sortMotionArray:function(e){e.sort(function(e,t){return e.frameNum-t.frameNum})},sortMotionArrays:function(e){for(var t=0;t<e.length;t++)this.sortMotionArray(e[t])},createMotionArray:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},createMotionArrays:function(e,t,n,i){for(var r=0;r<e.length;r++){var o=e[r],a=n[o[i]];void 0!==a&&t[a].push(o)}},createOrderedMotionArray:function(e){var t=this.createMotionArray(e);return this.sortMotionArray(t),t},createOrderedMotionArrays:function(e,t,n){var i=this.createDictionary(e),r=this.initializeMotionArrays(e);return this.createMotionArrays(t,r,i,n),this.sortMotionArrays(r),r}},
/*
 * extends existing KeyframeTrack for bone and camera animation.
 *   - use Float64Array for times
 *   - use Cubic Bezier curves interpolation
 */
i.MMDLoader.VectorKeyframeTrackEx=function(e,t,n,r){this.interpolationParameters=new Float32Array(r),i.VectorKeyframeTrack.call(this,e,t,n)},i.MMDLoader.VectorKeyframeTrackEx.prototype=Object.create(i.VectorKeyframeTrack.prototype),i.MMDLoader.VectorKeyframeTrackEx.prototype.constructor=i.MMDLoader.VectorKeyframeTrackEx,i.MMDLoader.VectorKeyframeTrackEx.prototype.TimeBufferType=Float64Array,i.MMDLoader.VectorKeyframeTrackEx.prototype.InterpolantFactoryMethodCubicBezier=function(e){return new i.MMDLoader.CubicBezierInterpolation(this.times,this.values,this.getValueSize(),e,this.interpolationParameters)},i.MMDLoader.VectorKeyframeTrackEx.prototype.setInterpolation=function(e){this.createInterpolant=this.InterpolantFactoryMethodCubicBezier},i.MMDLoader.QuaternionKeyframeTrackEx=function(e,t,n,r){this.interpolationParameters=new Float32Array(r),i.QuaternionKeyframeTrack.call(this,e,t,n)},i.MMDLoader.QuaternionKeyframeTrackEx.prototype=Object.create(i.QuaternionKeyframeTrack.prototype),i.MMDLoader.QuaternionKeyframeTrackEx.prototype.constructor=i.MMDLoader.QuaternionKeyframeTrackEx,i.MMDLoader.QuaternionKeyframeTrackEx.prototype.TimeBufferType=Float64Array,i.MMDLoader.QuaternionKeyframeTrackEx.prototype.InterpolantFactoryMethodCubicBezier=function(e){return new i.MMDLoader.CubicBezierInterpolation(this.times,this.values,this.getValueSize(),e,this.interpolationParameters)},i.MMDLoader.QuaternionKeyframeTrackEx.prototype.setInterpolation=function(e){this.createInterpolant=this.InterpolantFactoryMethodCubicBezier},i.MMDLoader.NumberKeyframeTrackEx=function(e,t,n,r){this.interpolationParameters=new Float32Array(r),i.NumberKeyframeTrack.call(this,e,t,n)},i.MMDLoader.NumberKeyframeTrackEx.prototype=Object.create(i.NumberKeyframeTrack.prototype),i.MMDLoader.NumberKeyframeTrackEx.prototype.constructor=i.MMDLoader.NumberKeyframeTrackEx,i.MMDLoader.NumberKeyframeTrackEx.prototype.TimeBufferType=Float64Array,i.MMDLoader.NumberKeyframeTrackEx.prototype.InterpolantFactoryMethodCubicBezier=function(e){return new i.MMDLoader.CubicBezierInterpolation(this.times,this.values,this.getValueSize(),e,this.interpolationParameters)},i.MMDLoader.NumberKeyframeTrackEx.prototype.setInterpolation=function(e){this.createInterpolant=this.InterpolantFactoryMethodCubicBezier},i.MMDLoader.CubicBezierInterpolation=function(e,t,n,r,o){i.Interpolant.call(this,e,t,n,r),this.params=o},i.MMDLoader.CubicBezierInterpolation.prototype=Object.create(i.LinearInterpolant.prototype),i.MMDLoader.CubicBezierInterpolation.prototype.constructor=i.MMDLoader.CubicBezierInterpolation,i.MMDLoader.CubicBezierInterpolation.prototype.interpolate_=function(e,t,n,r){var o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=e*s,c=l-s,u=(n-t)/(r-t);if(4===s){
// Quaternion
var h=this.params[4*e+0],d=this.params[4*e+1],p=this.params[4*e+2],f=this.params[4*e+3],m=this._calculate(h,d,p,f,u);i.Quaternion.slerpFlat(o,0,a,c,a,l,m)}else if(3===s)
// Vector3
for(var g=0;g!==s;++g){h=this.params[12*e+4*g+0],d=this.params[12*e+4*g+1],p=this.params[12*e+4*g+2],f=this.params[12*e+4*g+3],m=this._calculate(h,d,p,f,u);o[g]=a[c+g]*(1-m)+a[l+g]*m}else{
// Number
h=this.params[4*e+0],d=this.params[4*e+1],p=this.params[4*e+2],f=this.params[4*e+3],m=this._calculate(h,d,p,f,u);o[0]=a[c]*(1-m)+a[l]*m}return o},i.MMDLoader.CubicBezierInterpolation.prototype._calculate=function(e,t,n,i,r){for(
/*
  * Cubic Bezier curves
  *   https://en.wikipedia.org/wiki/B%C3%A9zier_curve#Cubic_B.C3.A9zier_curves
  *
  * B(t) = ( 1 - t ) ^ 3 * P0
  *      + 3 * ( 1 - t ) ^ 2 * t * P1
  *      + 3 * ( 1 - t ) * t^2 * P2
  *      + t ^ 3 * P3
  *      ( 0 <= t <= 1 )
  *
  * MMD uses Cubic Bezier curves for bone and camera animation interpolation.
  *   http://d.hatena.ne.jp/edvakf/20111016/1318716097
  *
  *    x = ( 1 - t ) ^ 3 * x0
  *      + 3 * ( 1 - t ) ^ 2 * t * x1
  *      + 3 * ( 1 - t ) * t^2 * x2
  *      + t ^ 3 * x3
  *    y = ( 1 - t ) ^ 3 * y0
  *      + 3 * ( 1 - t ) ^ 2 * t * y1
  *      + 3 * ( 1 - t ) * t^2 * y2
  *      + t ^ 3 * y3
  *      ( x0 = 0, y0 = 0 )
  *      ( x3 = 1, y3 = 1 )
  *      ( 0 <= t, x1, x2, y1, y2 <= 1 )
  *
  * Here solves this equation with Bisection method,
  *   https://en.wikipedia.org/wiki/Bisection_method
  * gets t, and then calculate y.
  *
  * f(t) = 3 * ( 1 - t ) ^ 2 * t * x1
  *      + 3 * ( 1 - t ) * t^2 * x2
  *      + t ^ 3 - x = 0
  *
  * (Another option: Newton's method
  *    https://en.wikipedia.org/wiki/Newton%27s_method)
  */
var o,a,s,l=.5,c=l,u=1-c,h=Math,d=0;d<15;d++){var p=(o=3*u*u*c)*e+(a=3*u*c*c)*t+(s=c*c*c)-r;if(h.abs(p)<1e-5)break;l/=2,u=1-(c+=p<0?l:-l)}return o*n+a*i+s},i.MMDAudioManager=function(e,t,n){var i=null===n||void 0===n?{}:n;this.audio=e,this.listener=t,this.elapsedTime=0,this.currentTime=0,this.delayTime=void 0!==i.delayTime?i.delayTime:0,this.audioDuration=this.audio.buffer.duration,this.duration=this.audioDuration+this.delayTime},i.MMDAudioManager.prototype={constructor:i.MMDAudioManager,control:function(e){this.elapsed+=e,this.currentTime+=e,this.checkIfStopAudio()&&this.audio.stop(),this.checkIfStartAudio()&&this.audio.play()},checkIfStartAudio:function(){if(this.audio.isPlaying)return!1;for(;this.currentTime>=this.duration;)this.currentTime-=this.duration;return!(this.currentTime<this.delayTime)&&(this.audio.startTime=this.currentTime-this.delayTime,!0)},checkIfStopAudio:function(){return!!this.audio.isPlaying&&this.currentTime>=this.duration}},i.MMDGrantSolver=function(e){this.mesh=e},i.MMDGrantSolver.prototype={constructor:i.MMDGrantSolver,update:function(){var e=new i.Quaternion;return function(){for(var t=0;t<this.mesh.geometry.grants.length;t++){var n=this.mesh.geometry.grants[t],i=this.mesh.skeleton.bones[n.index],r=this.mesh.skeleton.bones[n.parentIndex];n.isLocal?(n.affectPosition,n.affectRotation):(n.affectPosition,n.affectRotation&&(e.set(0,0,0,1),e.slerp(r.quaternion,n.ratio),i.quaternion.multiply(e)))}}}()},i.MMDHelper=function(){this.meshes=[],this.doAnimation=!0,this.doIk=!0,this.doGrant=!0,this.doPhysics=!0,this.doCameraAnimation=!0,this.sharedPhysics=!1,this.masterPhysics=null,this.audioManager=null,this.camera=null},i.MMDHelper.prototype={constructor:i.MMDHelper,add:function(e){if(!(e instanceof i.SkinnedMesh))throw new Error("THREE.MMDHelper.add() accepts only THREE.SkinnedMesh instance.");void 0===e.mixer&&(e.mixer=null),void 0===e.ikSolver&&(e.ikSolver=null),void 0===e.grantSolver&&(e.grantSolver=null),void 0===e.physics&&(e.physics=null),void 0===e.looped&&(e.looped=!1),this.meshes.push(e),
// workaround until I make IK and Physics Animation plugin
this.initBackupBones(e)},setAudio:function(e,t,n){this.audioManager=new i.MMDAudioManager(e,t,n)},setCamera:function(e){e.mixer=null,this.camera=e},setPhysicses:function(e){for(var t=0;t<this.meshes.length;t++)this.setPhysics(this.meshes[t],e)},setPhysics:function(e,t){if(void 0===(t=void 0===t?{}:Object.assign({},t)).world&&this.sharedPhysics){var n=this.getMasterPhysics();null!==n&&(t.world=n.world)}var r=void 0!==t.warmup?t.warmup:60,o=new i.MMDPhysics(e,t);null!==e.mixer&&void 0!==e.mixer&&!0!==t.preventAnimationWarmup&&(this.animateOneMesh(0,e),o.reset()),o.warmup(r),this.updateIKParametersDependingOnPhysicsEnabled(e,!0),e.physics=o},getMasterPhysics:function(){if(null!==this.masterPhysics)return this.masterPhysics;for(var e=0,t=this.meshes.length;e<t;e++){var n=this.meshes[e].physics;if(void 0!==n&&null!==n)return this.masterPhysics=n,this.masterPhysics}return null},enablePhysics:function(e){this.doPhysics=!0===e;for(var t=0,n=this.meshes.length;t<n;t++)this.updateIKParametersDependingOnPhysicsEnabled(this.meshes[t],e)},updateIKParametersDependingOnPhysicsEnabled:function(e,t){for(var n=e.geometry.iks,i=e.geometry.bones,r=0,o=n.length;r<o;r++)for(var a=n[r].links,s=0,l=a.length;s<l;s++){var c=a[s];
// disable IK of the bone the corresponding rigidBody type of which is 1 or 2
// because its rotation will be overriden by physics
c.enabled=!0!==t||!(i[c.index].rigidBodyType>0)}},setAnimations:function(){for(var e=0;e<this.meshes.length;e++)this.setAnimation(this.meshes[e])},setAnimation:function(e){if(void 0!==e.geometry.animations){e.mixer=new i.AnimationMixer(e),
// TODO: find a workaround not to access (seems like) private properties
//       the name of them begins with "_".
e.mixer.addEventListener("loop",function(e){e.action._clip.tracks.length>0&&0!==e.action._clip.tracks[0].name.indexOf(".bones")||(e.target._root.looped=!0)});for(var t=!1,n=!1,r=0;r<e.geometry.animations.length;r++){var o=e.geometry.animations[r],a=e.mixer.clipAction(o);o.tracks.length>0&&0===o.tracks[0].name.indexOf(".morphTargetInfluences")?n||(a.play(),n=!0):t||(a.play(),t=!0)}t&&(e.ikSolver=new i.CCDIKSolver(e),void 0!==e.geometry.grants&&(e.grantSolver=new i.MMDGrantSolver(e)))}},setCameraAnimation:function(e){void 0!==e.animations&&(e.mixer=new i.AnimationMixer(e),e.mixer.clipAction(e.animations[0]).play())},
/*
  * detect the longest duration among model, camera, and audio animations and then
  * set it to them to sync.
  * TODO: touching private properties ( ._actions and ._clip ) so consider better way
  *       to access them for safe and modularity.
  */
unifyAnimationDuration:function(e){e=void 0===e?{}:e;
// check the longest duration
for(var t=0,n=this.camera,i=this.audioManager,r=0;r<this.meshes.length;r++){if(null!==(s=this.meshes[r].mixer))for(var o=0;o<s._actions.length;o++){var a=s._actions[o];t=Math.max(t,a._clip.duration)}}if(null!==n&&null!==n.mixer){var s=n.mixer;for(r=0;r<s._actions.length;r++){a=s._actions[r];t=Math.max(t,a._clip.duration)}}null!==i&&(t=Math.max(t,i.duration)),void 0!==e.afterglow&&(t+=e.afterglow);
// set the duration
for(r=0;r<this.meshes.length;r++){if(null!==(s=this.meshes[r].mixer))for(o=0;o<s._actions.length;o++){(a=s._actions[o])._clip.duration=t}}if(null!==n&&null!==n.mixer)for(s=n.mixer,r=0;r<s._actions.length;r++){(a=s._actions[r])._clip.duration=t}null!==i&&(i.duration=t)},controlAudio:function(e){null!==this.audioManager&&this.audioManager.control(e)},animate:function(e){this.controlAudio(e);for(var t=0;t<this.meshes.length;t++)this.animateOneMesh(e,this.meshes[t]);this.sharedPhysics&&this.updateSharedPhysics(e),this.animateCamera(e)},animateOneMesh:function(e,t){var n=t.mixer,i=t.ikSolver,r=t.grantSolver,o=t.physics;null!==n&&!0===this.doAnimation&&(
// restore/backupBones are workaround
// until I make IK, Grant, and Physics Animation plugin
this.restoreBones(t),n.update(e),this.backupBones(t)),null!==i&&!0===this.doIk&&i.update(),null!==r&&!0===this.doGrant&&r.update(),!0===t.looped&&(null!==o&&o.reset(),t.looped=!1),null!==o&&this.doPhysics&&!this.sharedPhysics&&o.update(e)},updateSharedPhysics:function(e){if(0!==this.meshes.length&&this.doPhysics&&this.sharedPhysics){var t=this.getMasterPhysics();if(null!==t){for(var n=0,i=this.meshes.length;n<i;n++){null!==(r=this.meshes[n].physics)&&void 0!==r&&r.updateRigidBodies()}t.stepSimulation(e);for(n=0,i=this.meshes.length;n<i;n++){var r;null!==(r=this.meshes[n].physics)&&void 0!==r&&r.updateBones()}}}},animateCamera:function(e){if(null!==this.camera){var t=this.camera.mixer;null!==t&&void 0!==this.camera.center&&!0===this.doCameraAnimation&&(t.update(e),
// TODO: Let PerspectiveCamera automatically update?
this.camera.updateProjectionMatrix(),this.camera.up.set(0,1,0),this.camera.up.applyQuaternion(this.camera.quaternion),this.camera.lookAt(this.camera.center))}},poseAsVpd:function(e,t,n){void 0===n&&(n={}),!0!==n.preventResetPose&&e.pose();for(var r=e.skeleton.bones,o=t.bones,a={},s=0;s<r.length;s++)a[r[s].name]=s;var l=new i.Vector3,c=new i.Quaternion;for(s=0;s<o.length;s++){var u=o[s],h=a[u.name];if(void 0!==h){var d=r[h],p=u.translation,f=u.quaternion;l.set(p[0],p[1],p[2]),c.set(f[0],f[1],f[2],f[3]),d.position.add(l),d.quaternion.multiply(c)}}(e.updateMatrixWorld(!0),!0!==n.preventIk)&&new i.CCDIKSolver(e).update(n.saveOriginalBonesBeforeIK);!0!==n.preventGrant&&void 0!==e.geometry.grants&&new i.MMDGrantSolver(e).update()},
/*
  * Note: These following three functions are workaround for r74dev.
  *       THREE.PropertyMixer.apply() seems to save values into buffer cache
  *       when mixer.update() is called.
  *       ikSolver.update() and physics.update() change bone position/quaternion
  *       without mixer.update() then buffer cache will be inconsistent.
  *       So trying to avoid buffer cache inconsistency by doing
  *       backup bones position/quaternion right after mixer.update() call
  *       and then restore them after rendering.
  */
initBackupBones:function(e){e.skeleton.backupBones=[];for(var t=0;t<e.skeleton.bones.length;t++)e.skeleton.backupBones.push(e.skeleton.bones[t].clone())},backupBones:function(e){e.skeleton.backupBoneIsSaved=!0;for(var t=0;t<e.skeleton.bones.length;t++){var n=e.skeleton.backupBones[t],i=e.skeleton.bones[t];n.position.copy(i.position),n.quaternion.copy(i.quaternion)}},restoreBones:function(e){if(!0===e.skeleton.backupBoneIsSaved){e.skeleton.backupBoneIsSaved=!1;for(var t=0;t<e.skeleton.bones.length;t++){var n=e.skeleton.bones[t],i=e.skeleton.backupBones[t];n.position.copy(i.position),n.quaternion.copy(i.quaternion)}}}}},
/***/"./src/vendor/threejs/loaders/TGALoader.js":
/*!*************************************************!*\
  !*** ./src/vendor/threejs/loaders/TGALoader.js ***!
  \*************************************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";var i=n(/*! three */"./node_modules/three/build/three.module.js");
/*
 * @author Daosheng Mu / https://github.com/DaoshengMu/
 * @author mrdoob / http://mrdoob.com/
 * @author takahirox / https://github.com/takahirox/
 */i.TGALoader=function(e){this.manager=void 0!==e?e:i.DefaultLoadingManager},i.TGALoader.prototype={constructor:i.TGALoader,load:function(e,t,n,r){var o=this,a=new i.Texture,s=new i.FileLoader(this.manager);return s.setResponseType("arraybuffer"),s.load(e,function(e){a.image=o.parse(e),a.needsUpdate=!0,void 0!==t&&t(a)},n,r),a},parse:function(e){
// TGA constants
var t=0,n=1,i=2,r=3,o=9,a=10,s=11,l=48,c=4,u=0,h=1,d=2,p=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");var f=new Uint8Array(e),m=0,g={id_length:f[m++],colormap_type:f[m++],image_type:f[m++],colormap_index:f[m++]|f[m++]<<8,colormap_length:f[m++]|f[m++]<<8,colormap_size:f[m++],origin:[f[m++]|f[m++]<<8,f[m++]|f[m++]<<8],width:f[m++]|f[m++]<<8,height:f[m++]|f[m++]<<8,pixel_size:f[m++],flags:f[m++]};
// check tga if it is valid format
!
// reference from vthibault, https://github.com/vthibault/roBrowser/blob/master/src/Loaders/Targa.js
function(e){switch(e.image_type){
// check indexed type
case n:case o:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;
// check colormap type
case i:case r:case a:case s:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;
// What the need of a file without data ?
case t:console.error("THREE.TGALoader: No data.");
// Invalid type ?
default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}
// check image width and height
(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),
// check image pixel size
8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}
// parse tga image buffer
(g),g.id_length+m>e.length&&console.error("THREE.TGALoader: No data."),
// skip the needn't data
m+=g.id_length;
// get targa information about RLE compression and palette
var v=!1,y=!1,x=!1;switch(g.image_type){case o:v=!0,y=!0;break;case n:y=!0;break;case a:v=!0;break;case i:break;case s:v=!0,x=!0;break;case r:x=!0}
//
var b=document.createElement("canvas");b.width=g.width,b.height=g.height;var _=b.getContext("2d"),w=_.createImageData(g.width,g.height),M=function(e,t,n,i,r){var o,a,s,l;
// read RLE
if(a=n.pixel_size>>3,s=n.width*n.height*a,
// read palettes
t&&(l=r.subarray(i,i+=n.colormap_length*(n.colormap_size>>3))),e){var c,u,h;o=new Uint8Array(s);for(var d=0,p=new Uint8Array(a);d<s;)
// RLE pixels
if(u=1+(127&(c=r[i++])),128&c){
// bind pixel tmp array
for(h=0;h<a;++h)p[h]=r[i++];
// copy pixel array
for(h=0;h<u;++h)o.set(p,d+h*a);d+=a*u}else{for(
// raw pixels
u*=a,h=0;h<u;++h)o[d+h]=r[i++];d+=u}}else
// raw pixels
o=r.subarray(i,i+=t?n.width*n.height:s);return{pixel_data:o,palettes:l}}(v,y,g,m,f);!function(e,t,n,i,r){var o,a,s,f,m,v;switch((g.flags&l)>>c){default:case d:o=0,s=1,m=t,a=0,f=1,v=n;break;case u:o=0,s=1,m=t,a=n-1,f=-1,v=-1;break;case p:o=t-1,s=-1,m=-1,a=0,f=1,v=n;break;case h:o=t-1,s=-1,m=-1,a=n-1,f=-1,v=-1}if(x)switch(g.pixel_size){case 8:!function(e,t,n,i,r,o,a,s){var l,c,u,h=0,d=g.width;for(u=t;u!==i;u+=n)for(c=r;c!==a;c+=o,h++)l=s[h],e[4*(c+d*u)+0]=l,e[4*(c+d*u)+1]=l,e[4*(c+d*u)+2]=l,e[4*(c+d*u)+3]=255}(e,a,f,v,o,s,m,i);break;case 16:!function(e,t,n,i,r,o,a,s){var l,c,u=0,h=g.width;for(c=t;c!==i;c+=n)for(l=r;l!==a;l+=o,u+=2)e[4*(l+h*c)+0]=s[u+0],e[4*(l+h*c)+1]=s[u+0],e[4*(l+h*c)+2]=s[u+0],e[4*(l+h*c)+3]=s[u+1]}(e,a,f,v,o,s,m,i);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(g.pixel_size){case 8:!function(e,t,n,i,r,o,a,s,l){var c,u,h,d=l,p=0,f=g.width;for(h=t;h!==i;h+=n)for(u=r;u!==a;u+=o,p++)c=s[p],e[4*(u+f*h)+3]=255,e[4*(u+f*h)+2]=d[3*c+0],e[4*(u+f*h)+1]=d[3*c+1],e[4*(u+f*h)+0]=d[3*c+2]}(e,a,f,v,o,s,m,i,r);break;case 16:!function(e,t,n,i,r,o,a,s){var l,c,u,h=0,d=g.width;for(u=t;u!==i;u+=n)for(c=r;c!==a;c+=o,h+=2)l=s[h+0]+(s[h+1]<<8),// Inversed ?
e[4*(c+d*u)+0]=(31744&l)>>7,e[4*(c+d*u)+1]=(992&l)>>2,e[4*(c+d*u)+2]=(31&l)>>3,e[4*(c+d*u)+3]=32768&l?0:255}(e,a,f,v,o,s,m,i);break;case 24:!function(e,t,n,i,r,o,a,s){var l,c,u=0,h=g.width;for(c=t;c!==i;c+=n)for(l=r;l!==a;l+=o,u+=3)e[4*(l+h*c)+3]=255,e[4*(l+h*c)+2]=s[u+0],e[4*(l+h*c)+1]=s[u+1],e[4*(l+h*c)+0]=s[u+2]}(e,a,f,v,o,s,m,i);break;case 32:!function(e,t,n,i,r,o,a,s){var l,c,u=0,h=g.width;for(c=t;c!==i;c+=n)for(l=r;l!==a;l+=o,u+=4)e[4*(l+h*c)+2]=s[u+0],e[4*(l+h*c)+1]=s[u+1],e[4*(l+h*c)+0]=s[u+2],e[4*(l+h*c)+3]=s[u+3]}(e,a,f,v,o,s,m,i);break;default:console.error("THREE.TGALoader: Format not supported.")}
// Load image data according to specific method
// var func = 'tgaGetImageData' + (use_grey ? 'Grey' : '') + (header.pixel_size) + 'bits';
// func(data, y_start, y_step, y_end, x_start, x_step, x_end, width, image, palette );
}(w.data,g.width,g.height,M.pixel_data,M.palettes);return _.putImageData(w,0,0),b}}},
/***/"./src/vendor/threejs/utils/dat.gui.min.js":
/*!*************************************************!*\
  !*** ./src/vendor/threejs/utils/dat.gui.min.js ***!
  \*************************************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";
/* WEBPACK VAR INJECTION */
/* WEBPACK VAR INJECTION */(function(e){var n,i,r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a,s){"object"==o(t)&&"object"==o(e)?e.exports=s():(i=[],void 0===(r="function"==typeof(n=s)?n.apply(t,i):n)||(e.exports=r))}(0,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var i=function(e){return e&&e.__esModule?e:{default:e}}(n(1));e.exports=i.default},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(2)),o=i(n(6)),a=i(n(3)),s=i(n(7)),l=i(n(8)),c=i(n(10)),u=i(n(11)),h=i(n(12)),d=i(n(13)),p=i(n(14)),f=i(n(15)),m=i(n(16)),g=i(n(9)),v=i(n(17));t.default={color:{Color:r.default,math:o.default,interpret:a.default},controllers:{Controller:s.default,BooleanController:l.default,OptionController:c.default,StringController:u.default,NumberController:h.default,NumberControllerBox:d.default,NumberControllerSlider:p.default,FunctionController:f.default,ColorController:m.default},dom:{dom:g.default},gui:{GUI:v.default},GUI:v.default}},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(u.recalculateRGB(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(u.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(u.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(u.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}t.__esModule=!0;var a=i(n(3)),s=i(n(6)),l=i(n(4)),c=i(n(5)),u=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__state=a.default.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return e.prototype.toString=function(){return(0,l.default)(this)},e.prototype.toHexString=function(){return(0,l.default)(this,!0)},e.prototype.toOriginal=function(){return this.__state.conversion.write(this)},e}();u.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=s.default.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");c.default.extend(e.__state,s.default.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},u.recalculateHSV=function(e){var t=s.default.rgb_to_hsv(e.r,e.g,e.b);c.default.extend(e.__state,{s:t.s,v:t.v}),c.default.isNaN(t.h)?c.default.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},u.COMPONENTS=["r","g","b","h","s","v","hex","a"],r(u.prototype,"r",2),r(u.prototype,"g",1),r(u.prototype,"b",0),o(u.prototype,"h"),o(u.prototype,"s"),o(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=s.default.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),t.default=u},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(4)),o=i(n(5)),a=[{litmus:o.default.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:r.default},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:r.default},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:r.default},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:r.default}}},{litmus:o.default.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:o.default.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:o.default.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(o.default.isNumber(e.r)&&o.default.isNumber(e.g)&&o.default.isNumber(e.b)&&o.default.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(o.default.isNumber(e.r)&&o.default.isNumber(e.g)&&o.default.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(o.default.isNumber(e.h)&&o.default.isNumber(e.s)&&o.default.isNumber(e.v)&&o.default.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(o.default.isNumber(e.h)&&o.default.isNumber(e.s)&&o.default.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],s=void 0,l=void 0;t.default=function(){l=!1;var e=arguments.length>1?o.default.toArray(arguments):arguments[0];return o.default.each(a,function(t){if(t.litmus(e))return o.default.each(t.conversions,function(t,n){if(s=t.read(e),!1===l&&!1!==s)return l=s,s.conversionName=n,s.conversion=t,o.default.BREAK}),o.default.BREAK}),l}},function(e,t){t.__esModule=!0,t.default=function(e,t){var n=e.__state.conversionName.toString(),i=Math.round(e.r),r=Math.round(e.g),o=Math.round(e.b),a=e.a,s=Math.round(e.h),l=e.s.toFixed(1),c=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var u=e.hex.toString(16);u.length<6;)u="0"+u;return"#"+u}return"CSS_RGB"===n?"rgb("+i+","+r+","+o+")":"CSS_RGBA"===n?"rgba("+i+","+r+","+o+","+a+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+i+","+r+","+o+"]":"RGBA_ARRAY"===n?"["+i+","+r+","+o+","+a+"]":"RGB_OBJ"===n?"{r:"+i+",g:"+r+",b:"+o+"}":"RGBA_OBJ"===n?"{r:"+i+",g:"+r+",b:"+o+",a:"+a+"}":"HSV_OBJ"===n?"{h:"+s+",s:"+l+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+s+",s:"+l+",v:"+c+",a:"+a+"}":"unknown format"}},function(e,t){t.__esModule=!0;var n=Array.prototype.forEach,i=Array.prototype.slice,r={BREAK:{},extend:function(e){return this.each(i.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))},this),e},defaults:function(e){return this.each(i.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function(){var e=i.call(arguments);return function(){for(var t=i.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,i){if(e)if(n&&e.forEach&&e.forEach===n)e.forEach(t,i);else if(e.length===e.length+0){var r,o=void 0;for(o=0,r=e.length;o<r;o++)if(o in e&&t.call(i,e[o],o)===this.BREAK)return}else for(var a in e)if(t.call(i,e[a],a)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t){var n=void 0;return function(){var i=arguments,r=!n;clearTimeout(n),n=setTimeout(function(){n=null},t),r&&e.apply(this,i)}},toArray:function(e){return e.toArray?e.toArray():i.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}};t.default=r},function(e,t){t.__esModule=!0;var n=void 0,i={hsv_to_rgb:function(e,t,n){var i=Math.floor(e/60)%6,r=e/60-Math.floor(e/60),o=n*(1-t),a=n*(1-r*t),s=n*(1-(1-r)*t),l=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][i];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var i=Math.min(e,t,n),r=Math.max(e,t,n),o=r-i,a=void 0;return 0===r?{h:NaN,s:0,v:0}:(a=e===r?(t-n)/o:t===r?2+(n-e)/o:4+(e-t)/o,(a/=6)<0&&(a+=1),{h:360*a,s:o/r,v:r/255})},rgb_to_hex:function(e,t,n){var i=this.hex_with_component(0,2,e);return i=this.hex_with_component(i,1,t),this.hex_with_component(i,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,i){return i<<(n=8*t)|e&~(255<<n)}};t.default=i},function(e,t){t.__esModule=!0;var n=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return e.prototype.onChange=function(e){return this.__onChange=e,this},e.prototype.onFinishChange=function(e){return this.__onFinishChange=e,this},e.prototype.setValue=function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},e.prototype.getValue=function(){return this.object[this.property]},e.prototype.updateDisplay=function(){return this},e.prototype.isModified=function(){return this.initialValue!==this.getValue()},e}();t.default=n},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(7)),a=i(n(9)),s=function(e){function t(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,e.call(this,n,i)),s=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),a.default.bind(r.__checkbox,"change",function(){s.setValue(!s.__prev)},!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.setValue=function(t){var n=e.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n},t.prototype.updateDisplay=function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,e.prototype.updateDisplay.call(this)},t}(r.default);t.default=s},function(e,t,n){function i(e){if("0"===e||r.default.isUndefined(e))return 0;var t=e.match(a);return r.default.isNull(t)?0:parseFloat(t[1])}t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(5)),o={};r.default.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,t){r.default.each(e,function(e){o[e]=t})});var a=/(\d+(\.\d+)?)px/,s={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var i=n,o=t;r.default.isUndefined(o)&&(o=!0),r.default.isUndefined(i)&&(i=!0),e.style.position="absolute",o&&(e.style.left=0,e.style.right=0),i&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,i){var a=n||{},s=o[t];if(!s)throw new Error("Event type "+t+" not supported.");var l=document.createEvent(s);switch(s){case"MouseEvents":var c=a.x||a.clientX||0,u=a.y||a.clientY||0;l.initMouseEvent(t,a.bubbles||!1,a.cancelable||!0,window,a.clickCount||1,0,0,c,u,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var h=l.initKeyboardEvent||l.initKeyEvent;r.default.defaults(a,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),h(t,a.bubbles||!1,a.cancelable,window,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.keyCode,a.charCode);break;default:l.initEvent(t,a.bubbles||!1,a.cancelable||!0)}r.default.defaults(l,i),e.dispatchEvent(l)},bind:function(e,t,n,i){var r=i||!1;return e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n),s},unbind:function(e,t,n,i){var r=i||!1;return e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n),s},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return s},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),i=n.indexOf(t);-1!==i&&(n.splice(i,1),e.className=n.join(" "))}else e.className=void 0;return s},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return i(t["border-left-width"])+i(t["border-right-width"])+i(t["padding-left"])+i(t["padding-right"])+i(t.width)},getHeight:function(e){var t=getComputedStyle(e);return i(t["border-top-width"])+i(t["border-bottom-width"])+i(t["padding-top"])+i(t["padding-bottom"])+i(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};t.default=s},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(7)),a=i(n(9)),s=i(n(5)),l=function(e){function t(n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,e.call(this,n,i)),c=r,u=l;return l.__select=document.createElement("select"),s.default.isArray(c)&&function(){var e={};s.default.each(c,function(t){e[t]=t}),c=e}(),s.default.each(c,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),u.__select.appendChild(n)}),l.updateDisplay(),a.default.bind(l.__select,"change",function(){var e=this.options[this.selectedIndex].value;u.setValue(e)}),l.domElement.appendChild(l.__select),l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.setValue=function(t){var n=e.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n},t.prototype.updateDisplay=function(){return a.default.isActive(this.__select)?this:(this.__select.value=this.getValue(),e.prototype.updateDisplay.call(this))},t}(r.default);t.default=l},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(7)),a=i(n(9)),s=function(e){function t(n,i){function r(){l.setValue(l.__input.value)}!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,e.call(this,n,i)),l=s;return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),a.default.bind(s.__input,"keyup",r),a.default.bind(s.__input,"change",r),a.default.bind(s.__input,"blur",function(){l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}),a.default.bind(s.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateDisplay=function(){return a.default.isActive(this.__input)||(this.__input.value=this.getValue()),e.prototype.updateDisplay.call(this)},t}(r.default);t.default=s},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}t.__esModule=!0;var a=i(n(7)),s=i(n(5)),l=function(e){function t(n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,e.call(this,n,i)),c=a||{};return l.__min=c.min,l.__max=c.max,l.__step=c.step,s.default.isUndefined(l.__step)?0===l.initialValue?l.__impliedStep=1:l.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(l.initialValue))/Math.LN10))/10:l.__impliedStep=l.__step,l.__precision=r(l.__impliedStep),l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.setValue=function(t){var n=t;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),e.prototype.setValue.call(this,n)},t.prototype.min=function(e){return this.__min=e,this},t.prototype.max=function(e){return this.__max=e,this},t.prototype.step=function(e){return this.__step=e,this.__impliedStep=e,this.__precision=r(e),this},t}(a.default);t.default=l},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(12)),a=i(n(9)),s=i(n(5)),l=function(e){function t(n,i,r){function l(){d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}function c(e){var t=p-e.clientY;d.setValue(d.getValue()+t*d.__impliedStep),p=e.clientY}function u(){a.default.unbind(window,"mousemove",c),a.default.unbind(window,"mouseup",u),l()}!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,e.call(this,n,i,r));h.__truncationSuspended=!1;var d=h,p=void 0;return h.__input=document.createElement("input"),h.__input.setAttribute("type","text"),a.default.bind(h.__input,"change",function(){var e=parseFloat(d.__input.value);s.default.isNaN(e)||d.setValue(e)}),a.default.bind(h.__input,"blur",function(){l()}),a.default.bind(h.__input,"mousedown",function(e){a.default.bind(window,"mousemove",c),a.default.bind(window,"mouseup",u),p=e.clientY}),a.default.bind(h.__input,"keydown",function(e){13===e.keyCode&&(d.__truncationSuspended=!0,this.blur(),d.__truncationSuspended=!1,l())}),h.updateDisplay(),h.domElement.appendChild(h.__input),h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateDisplay=function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(this.getValue(),this.__precision),e.prototype.updateDisplay.call(this)},t}(r.default);t.default=l},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(12)),a=i(n(9)),s=function(e){function t(n,i,r,s,l){function c(e){e.preventDefault();var t=d.__background.getBoundingClientRect();return d.setValue(function(e,t,n,i,r){return i+(e-t)/(n-t)*(r-i)}(e.clientX,t.left,t.right,d.__min,d.__max)),!1}function u(){a.default.unbind(window,"mousemove",c),a.default.unbind(window,"mouseup",u),d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,e.call(this,n,i,{min:r,max:s,step:l})),d=h;return h.__background=document.createElement("div"),h.__foreground=document.createElement("div"),a.default.bind(h.__background,"mousedown",function(e){document.activeElement.blur(),a.default.bind(window,"mousemove",c),a.default.bind(window,"mouseup",u),c(e)}),a.default.addClass(h.__background,"slider"),a.default.addClass(h.__foreground,"slider-fg"),h.updateDisplay(),h.__background.appendChild(h.__foreground),h.domElement.appendChild(h.__background),h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateDisplay=function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",e.prototype.updateDisplay.call(this)},t}(r.default);t.default=s},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(7)),a=i(n(9)),s=function(e){function t(n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,e.call(this,n,i)),l=s;return s.__button=document.createElement("div"),s.__button.innerHTML=void 0===r?"Fire":r,a.default.bind(s.__button,"click",function(e){return e.preventDefault(),l.fire(),!1}),a.default.addClass(s.__button,"button"),s.domElement.appendChild(s.__button),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.fire=function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())},t}(r.default);t.default=s},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i){e.style.background="",u.default.each(d,function(r){e.style.cssText+="background: "+r+"linear-gradient("+t+", "+n+" 0%, "+i+" 100%); "})}t.__esModule=!0;var a=i(n(7)),s=i(n(9)),l=i(n(2)),c=i(n(3)),u=i(n(5)),h=function(e){function t(n,i){function a(e){m(e),s.default.bind(window,"mousemove",m),s.default.bind(window,"mouseup",h)}function h(){s.default.unbind(window,"mousemove",m),s.default.unbind(window,"mouseup",h),f()}function d(){var e=(0,c.default)(this.value);!1!==e?(y.__color.__state=e,y.setValue(y.__color.toOriginal())):this.value=y.__color.toString()}function p(){s.default.unbind(window,"mousemove",g),s.default.unbind(window,"mouseup",p),f()}function f(){y.__onFinishChange&&y.__onFinishChange.call(y,y.__color.toOriginal())}function m(e){e.preventDefault();var t=y.__saturation_field.getBoundingClientRect(),n=(e.clientX-t.left)/(t.right-t.left),i=1-(e.clientY-t.top)/(t.bottom-t.top);return i>1?i=1:i<0&&(i=0),n>1?n=1:n<0&&(n=0),y.__color.v=i,y.__color.s=n,y.setValue(y.__color.toOriginal()),!1}function g(e){e.preventDefault();var t=y.__hue_field.getBoundingClientRect(),n=1-(e.clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),y.__color.h=360*n,y.setValue(y.__color.toOriginal()),!1}!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var v=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,e.call(this,n,i));v.__color=new l.default(v.getValue()),v.__temp=new l.default(0);var y=v;v.domElement=document.createElement("div"),s.default.makeSelectable(v.domElement,!1),v.__selector=document.createElement("div"),v.__selector.className="selector",v.__saturation_field=document.createElement("div"),v.__saturation_field.className="saturation-field",v.__field_knob=document.createElement("div"),v.__field_knob.className="field-knob",v.__field_knob_border="2px solid ",v.__hue_knob=document.createElement("div"),v.__hue_knob.className="hue-knob",v.__hue_field=document.createElement("div"),v.__hue_field.className="hue-field",v.__input=document.createElement("input"),v.__input.type="text",v.__input_textShadow="0 1px 1px ",s.default.bind(v.__input,"keydown",function(e){13===e.keyCode&&d.call(this)}),s.default.bind(v.__input,"blur",d),s.default.bind(v.__selector,"mousedown",function(){s.default.addClass(this,"drag").bind(window,"mouseup",function(){s.default.removeClass(y.__selector,"drag")})});var x=document.createElement("div");return u.default.extend(v.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),u.default.extend(v.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:v.__field_knob_border+(v.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),u.default.extend(v.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),u.default.extend(v.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),u.default.extend(x.style,{width:"100%",height:"100%",background:"none"}),r(x,"top","rgba(0,0,0,0)","#000"),u.default.extend(v.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),function(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}(v.__hue_field),u.default.extend(v.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:v.__input_textShadow+"rgba(0,0,0,0.7)"}),s.default.bind(v.__saturation_field,"mousedown",a),s.default.bind(v.__field_knob,"mousedown",a),s.default.bind(v.__hue_field,"mousedown",function(e){g(e),s.default.bind(window,"mousemove",g),s.default.bind(window,"mouseup",p)}),v.__saturation_field.appendChild(x),v.__selector.appendChild(v.__field_knob),v.__selector.appendChild(v.__saturation_field),v.__selector.appendChild(v.__hue_field),v.__hue_field.appendChild(v.__hue_knob),v.domElement.appendChild(v.__input),v.domElement.appendChild(v.__selector),v.updateDisplay(),v}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateDisplay=function(){var e=(0,c.default)(this.getValue());if(!1!==e){var t=!1;u.default.each(l.default.COMPONENTS,function(n){if(!u.default.isUndefined(e[n])&&!u.default.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&u.default.extend(this.__color.__state,e)}u.default.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,i=255-n;u.default.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,r(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),u.default.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+i+","+i+","+i+",.7)"})},t}(a.default),d=["-moz-","-o-","-webkit-","-ms-",""];t.default=h},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var i=document.createElement("li");return t&&i.appendChild(t),n?e.__ul.insertBefore(i,n):e.__ul.appendChild(i),e.onResize(),i}function a(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function s(e,t,n){if(n.__li=t,n.__gui=e,C.default.extend(n,{options:function(t){if(arguments.length>1){var i=n.__li.nextElementSibling;return n.remove(),c(e,n.object,n.property,{before:i,factoryArgs:[C.default.toArray(arguments)]})}if(C.default.isArray(t)||C.default.isObject(t)){var r=n.__li.nextElementSibling;return n.remove(),c(e,n.object,n.property,{before:r,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof M.default)!function(){var e=new w.default(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});C.default.each(["updateDisplay","onChange","onFinishChange","step"],function(t){var i=n[t],r=e[t];n[t]=e[t]=function(){var t=Array.prototype.slice.call(arguments);return r.apply(e,t),i.apply(n,t)}}),S.default.addClass(t,"has-slider"),n.domElement.insertBefore(e.domElement,n.domElement.firstElementChild)}();else if(n instanceof w.default){var i=function(t){if(C.default.isNumber(n.__min)&&C.default.isNumber(n.__max)){var i=n.__li.firstElementChild.firstElementChild.innerHTML,r=n.__gui.__listening.indexOf(n)>-1;n.remove();var o=c(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return o.name(i),r&&o.listen(),o}return t};n.min=C.default.compose(i,n.min),n.max=C.default.compose(i,n.max)}else n instanceof b.default?(S.default.bind(t,"click",function(){S.default.fakeEvent(n.__checkbox,"click")}),S.default.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof _.default?(S.default.bind(t,"click",function(){S.default.fakeEvent(n.__button,"click")}),S.default.bind(t,"mouseover",function(){S.default.addClass(n.__button,"hover")}),S.default.bind(t,"mouseout",function(){S.default.removeClass(n.__button,"hover")})):n instanceof E.default&&(S.default.addClass(t,"color"),n.updateDisplay=C.default.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=C.default.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&a(e.getRoot(),!0),t},n.setValue)}function l(e,t){var n=e.getRoot(),i=n.__rememberedObjects.indexOf(t.object);if(-1!==i){var r=n.__rememberedObjectIndecesToControllers[i];if(void 0===r&&(r={},n.__rememberedObjectIndecesToControllers[i]=r),r[t.property]=t,n.load&&n.load.remembered){var o=n.load.remembered,a=void 0;if(o[e.preset])a=o[e.preset];else{if(!o[L])return;a=o[L]}if(a[i]&&void 0!==a[i][t.property]){var s=a[i][t.property];t.initialValue=s,t.setValue(s)}}}}function c(e,t,n,i){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var o=void 0;if(i.color)o=new E.default(t,n);else{var a=[t,n].concat(i.factoryArgs);o=y.default.apply(e,a)}i.before instanceof x.default&&(i.before=i.before.__li),l(e,o),S.default.addClass(o.domElement,"c");var c=document.createElement("span");S.default.addClass(c,"property-name"),c.innerHTML=o.property;var u=document.createElement("div");u.appendChild(c),u.appendChild(o.domElement);var h=r(e,u,i.before);return S.default.addClass(h,N.CLASS_CONTROLLER_ROW),o instanceof E.default?S.default.addClass(h,"color"):S.default.addClass(h,m(o.getValue())),s(e,h,o),e.__controllers.push(o),o}function u(e,t){return document.location.href+"."+t}function h(e,t,n){var i=document.createElement("option");i.innerHTML=t,i.value=t,e.__preset_select.appendChild(i),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function d(e,t){t.style.display=e.useLocalStorage?"block":"none"}function p(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function f(e,t){var n={};return C.default.each(e.__rememberedObjects,function(i,r){var o={},a=e.__rememberedObjectIndecesToControllers[r];C.default.each(a,function(e,n){o[n]=t?e.initialValue:e.getValue()}),n[r]=o}),n}var m="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":void 0===e?"undefined":o(e)},g=i(n(18)),v=i(n(19)),y=i(n(20)),x=i(n(7)),b=i(n(8)),_=i(n(15)),w=i(n(13)),M=i(n(14)),E=i(n(16)),T=i(n(21)),A=i(n(22)),S=i(n(9)),C=i(n(5)),R=i(n(23));g.default.inject(R.default);var L="Default",P=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),O=void 0,I=!0,B=void 0,D=!1,U=[],N=function e(t){var n=this,i=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),S.default.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],i=C.default.defaults(i,{autoPlace:!0,width:e.DEFAULT_WIDTH}),i=C.default.defaults(i,{resizable:i.autoPlace,hideable:i.autoPlace}),C.default.isUndefined(i.load)?i.load={preset:L}:i.preset&&(i.load.preset=i.preset),C.default.isUndefined(i.parent)&&i.hideable&&U.push(this),i.resizable=C.default.isUndefined(i.parent)&&i.resizable,i.autoPlace&&C.default.isUndefined(i.scrollable)&&(i.scrollable=!0);var o=P&&"true"===localStorage.getItem(u(0,"isLocal")),a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return i.parent}},scrollable:{get:function(){return i.scrollable}},autoPlace:{get:function(){return i.autoPlace}},preset:{get:function(){return n.parent?n.getRoot().preset:i.load.preset},set:function(e){n.parent?n.getRoot().preset=e:i.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return i.width},set:function(e){i.width=e,p(n,e)}},name:{get:function(){return i.name},set:function(e){i.name=e,titleRowName&&(titleRowName.innerHTML=i.name)}},closed:{get:function(){return i.closed},set:function(t){i.closed=t,i.closed?S.default.addClass(n.__ul,e.CLASS_CLOSED):S.default.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return i.load}},useLocalStorage:{get:function(){return o},set:function(e){P&&(o=e,e?S.default.bind(window,"unload",a):S.default.unbind(window,"unload",a),localStorage.setItem(u(0,"isLocal"),e))}}}),C.default.isUndefined(i.parent)){if(i.closed=!1,S.default.addClass(this.domElement,e.CLASS_MAIN),S.default.makeSelectable(this.domElement,!1),P&&o){n.useLocalStorage=!0;var s=localStorage.getItem(u(0,"gui"));s&&(i.load=JSON.parse(s))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,S.default.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),S.default.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===i.closed&&(i.closed=!0);var l=document.createTextNode(i.name);S.default.addClass(l,"controller-name");var c=r(n,l);S.default.addClass(this.__ul,e.CLASS_CLOSED),S.default.addClass(c,"title"),S.default.bind(c,"click",function(e){return e.preventDefault(),n.closed=!n.closed,!1}),i.closed||(this.closed=!1)}i.autoPlace&&(C.default.isUndefined(i.parent)&&(I&&(B=document.createElement("div"),S.default.addClass(B,"dg"),S.default.addClass(B,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(B),I=!1),B.appendChild(this.domElement),S.default.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||p(n,i.width)),this.__resizeHandler=function(){n.onResizeDebounced()},S.default.bind(window,"resize",this.__resizeHandler),S.default.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),S.default.bind(this.__ul,"transitionend",this.__resizeHandler),S.default.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),i.resizable&&function(e){function t(t){return t.preventDefault(),e.width+=r-t.clientX,e.onResize(),r=t.clientX,!1}function n(){S.default.removeClass(e.__closeButton,N.CLASS_DRAG),S.default.unbind(window,"mousemove",t),S.default.unbind(window,"mouseup",n)}function i(i){return i.preventDefault(),r=i.clientX,S.default.addClass(e.__closeButton,N.CLASS_DRAG),S.default.bind(window,"mousemove",t),S.default.bind(window,"mouseup",n),!1}var r=void 0;e.__resize_handle=document.createElement("div"),C.default.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),S.default.bind(e.__resize_handle,"mousedown",i),S.default.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}(this),a=function(){P&&"true"===localStorage.getItem(u(0,"isLocal"))&&localStorage.setItem(u(0,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,i.parent||function(){var e=n.getRoot();e.width+=1,C.default.defer(function(){e.width-=1})}()};N.toggleHide=function(){D=!D,C.default.each(U,function(e){e.domElement.style.display=D?"none":""})},N.CLASS_AUTO_PLACE="a",N.CLASS_AUTO_PLACE_CONTAINER="ac",N.CLASS_MAIN="main",N.CLASS_CONTROLLER_ROW="cr",N.CLASS_TOO_TALL="taller-than-window",N.CLASS_CLOSED="closed",N.CLASS_CLOSE_BUTTON="close-button",N.CLASS_DRAG="drag",N.DEFAULT_WIDTH=245,N.TEXT_CLOSED="Close Controls",N.TEXT_OPEN="Open Controls",N._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||N.toggleHide()},S.default.bind(window,"keydown",N._keydownHandler,!1),C.default.extend(N.prototype,{add:function(e,t){return c(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return c(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;C.default.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&B.removeChild(this.domElement),S.default.unbind(window,"keydown",N._keydownHandler,!1),S.default.unbind(window,"resize",this.__resizeHandler),this.saveToLocalStorageIfPossible&&S.default.unbind(window,"unload",this.saveToLocalStorageIfPossible)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new N(t);this.__folders[e]=n;var i=r(this,n.domElement);return S.default.addClass(i,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=S.default.getOffset(e.__ul).top,n=0;C.default.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=S.default.getHeight(t))}),window.innerHeight-t-20<n?(S.default.addClass(e.domElement,N.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(S.default.removeClass(e.domElement,N.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&C.default.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:C.default.debounce(function(){this.onResize()},200),remember:function(){if(C.default.isUndefined(O)&&((O=new A.default).domElement.innerHTML=v.default),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;C.default.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&function(e){var t=e.__save_row=document.createElement("li");S.default.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),S.default.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",S.default.addClass(n,"button gears");var i=document.createElement("span");i.innerHTML="Save",S.default.addClass(i,"button"),S.default.addClass(i,"save");var r=document.createElement("span");r.innerHTML="New",S.default.addClass(r,"button"),S.default.addClass(r,"save-as");var o=document.createElement("span");o.innerHTML="Revert",S.default.addClass(o,"button"),S.default.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");e.load&&e.load.remembered?C.default.each(e.load.remembered,function(t,n){h(e,n,n===e.preset)}):h(e,L,!1),S.default.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(a),t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(o),P&&function(){var t=document.getElementById("dg-local-explain"),n=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(u(0,"isLocal"))&&n.setAttribute("checked","checked"),d(e,t),S.default.bind(n,"change",function(){e.useLocalStorage=!e.useLocalStorage,d(e,t)})}();var s=document.getElementById("dg-new-constructor");S.default.bind(s,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||O.hide()}),S.default.bind(n,"click",function(){s.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),O.show(),s.focus(),s.select()}),S.default.bind(i,"click",function(){e.save()}),S.default.bind(r,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),S.default.bind(o,"click",function(){e.revert()})}(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&p(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=f(this)),e.folders={},C.default.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=f(this),a(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[L]=f(this,!0)),this.load.remembered[e]=f(this),this.preset=e,h(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){C.default.each(this.__controllers,function(t){this.getRoot().load.remembered?l(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),C.default.each(this.__folders,function(e){e.revert(e)}),e||a(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&T.default.call(window,function(){e(t)}),C.default.each(t,function(e){e.updateDisplay()})}(this.__listening)},updateDisplay:function(){C.default.each(this.__controllers,function(e){e.updateDisplay()}),C.default.each(this.__folders,function(e){e.updateDisplay()})}}),e.exports=N},function(e,t){e.exports={load:function(e,t){var n=t||document,i=n.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e,n.getElementsByTagName("head")[0].appendChild(i)},inject:function(e,t){var n=t||document,i=document.createElement("style");i.type="text/css",i.innerHTML=e;var r=n.getElementsByTagName("head")[0];try{r.appendChild(i)}catch(e){}}}},function(e,t){e.exports="<div id=dg-save class=\"dg dialogue\"> Here's the new load parameter for your <code>GUI</code>'s constructor: <textarea id=dg-new-constructor></textarea> <div id=dg-save-locally> <input id=dg-local-storage type=checkbox /> Automatically save values to <code>localStorage</code> on exit. <div id=dg-local-explain>The values saved to <code>localStorage</code> will override those passed to <code>dat.GUI</code>'s constructor. This makes it easier to work incrementally, but <code>localStorage</code> is fragile, and your friends may not see the same values you do. </div> </div> </div>"},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(10)),o=i(n(13)),a=i(n(14)),s=i(n(11)),l=i(n(15)),c=i(n(8)),u=i(n(5));t.default=function(e,t){var n=e[t];return u.default.isArray(arguments[2])||u.default.isObject(arguments[2])?new r.default(e,t,arguments[2]):u.default.isNumber(n)?u.default.isNumber(arguments[2])&&u.default.isNumber(arguments[3])?u.default.isNumber(arguments[4])?new a.default(e,t,arguments[2],arguments[3],arguments[4]):new a.default(e,t,arguments[2],arguments[3]):u.default.isNumber(arguments[4])?new o.default(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new o.default(e,t,{min:arguments[2],max:arguments[3]}):u.default.isString(n)?new s.default(e,t):u.default.isFunction(n)?new l.default(e,t,""):u.default.isBoolean(n)?new c.default(e,t):null}},function(e,t){t.__esModule=!0,t.default=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}},function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=i(n(9)),o=i(n(5)),a=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.backgroundElement=document.createElement("div"),o.default.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),r.default.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),o.default.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;r.default.bind(this.backgroundElement,"click",function(){t.hide()})}return e.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),o.default.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},e.prototype.hide=function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",r.default.unbind(e.domElement,"webkitTransitionEnd",t),r.default.unbind(e.domElement,"transitionend",t),r.default.unbind(e.domElement,"oTransitionEnd",t)};r.default.bind(this.domElement,"webkitTransitionEnd",t),r.default.bind(this.domElement,"transitionend",t),r.default.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},e.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-r.default.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-r.default.getHeight(this.domElement)/2+"px"},e}();t.default=a},function(e,t,n){(e.exports=n(24)()).push([e.id,".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1!important}.dg.main .close-button.drag,.dg.main:hover .close-button{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;transition:opacity .1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save>ul{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height .1s ease-out;transition:height .1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid transparent}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.boolean,.dg .cr.boolean *,.dg .cr.function,.dg .cr.function *,.dg .cr.function .property-name{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco,monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px Lucida Grande,sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid hsla(0,0%,100%,.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.boolean:hover,.dg .cr.function:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}}])})}).call(this,n(/*! ./../../../../node_modules/webpack/buildin/module.js */"./node_modules/webpack/buildin/module.js")(e))
/***/},
/***/"./src/vendor/threejs/utils/mmdparser.min.js":
/*!***************************************************!*\
  !*** ./src/vendor/threejs/utils/mmdparser.min.js ***!
  \***************************************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";var i,r,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n,s){"object"==a(t)&&void 0!==e?s(t):(r=[t],void 0===(o="function"==typeof(i=s)?i.apply(t,r):i)||(e.exports=o))}(0,function(e){function t(){}function n(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===n||n,this.encoder=new t}function i(){}function r(){}t.prototype.s2u=function(e){for(var t=this.s2uTable,n="",i=0;i<e.length;){var r=e[i++];if(!(r>=0&&r<=126||r>=161&&r<=223)&&i<e.length&&(r=r<<8|e[i++]),void 0===t[r])throw"unknown char code "+r+".";n+=String.fromCharCode(t[r])}return n},t.prototype.s2uTable={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:126,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:65340,33120:65374,33121:8741,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:65293,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:65504,33170:65505,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:65506,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34624:9312,34625:9313,34626:9314,34627:9315,34628:9316,34629:9317,34630:9318,34631:9319,34632:9320,34633:9321,34634:9322,34635:9323,34636:9324,34637:9325,34638:9326,34639:9327,34640:9328,34641:9329,34642:9330,34643:9331,34644:8544,34645:8545,34646:8546,34647:8547,34648:8548,34649:8549,34650:8550,34651:8551,34652:8552,34653:8553,34655:13129,34656:13076,34657:13090,34658:13133,34659:13080,34660:13095,34661:13059,34662:13110,34663:13137,34664:13143,34665:13069,34666:13094,34667:13091,34668:13099,34669:13130,34670:13115,34671:13212,34672:13213,34673:13214,34674:13198,34675:13199,34676:13252,34677:13217,34686:13179,34688:12317,34689:12319,34690:8470,34691:13261,34692:8481,34693:12964,34694:12965,34695:12966,34696:12967,34697:12968,34698:12849,34699:12850,34700:12857,34701:13182,34702:13181,34703:13180,34704:8786,34705:8801,34706:8747,34707:8750,34708:8721,34709:8730,34710:8869,34711:8736,34712:8735,34713:8895,34714:8757,34715:8745,34716:8746,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35000:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36000:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37000:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38000:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39000:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,40000:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58000:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59000:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,60000:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081,60736:32394,60737:35100,60738:37704,60739:37512,60740:34012,60741:20425,60742:28859,60743:26161,60744:26824,60745:37625,60746:26363,60747:24389,60748:20008,60749:20193,60750:20220,60751:20224,60752:20227,60753:20281,60754:20310,60755:20370,60756:20362,60757:20378,60758:20372,60759:20429,60760:20544,60761:20514,60762:20479,60763:20510,60764:20550,60765:20592,60766:20546,60767:20628,60768:20724,60769:20696,60770:20810,60771:20836,60772:20893,60773:20926,60774:20972,60775:21013,60776:21148,60777:21158,60778:21184,60779:21211,60780:21248,60781:21255,60782:21284,60783:21362,60784:21395,60785:21426,60786:21469,60787:64014,60788:21660,60789:21642,60790:21673,60791:21759,60792:21894,60793:22361,60794:22373,60795:22444,60796:22472,60797:22471,60798:64015,60800:64016,60801:22686,60802:22706,60803:22795,60804:22867,60805:22875,60806:22877,60807:22883,60808:22948,60809:22970,60810:23382,60811:23488,60812:29999,60813:23512,60814:23532,60815:23582,60816:23718,60817:23738,60818:23797,60819:23847,60820:23891,60821:64017,60822:23874,60823:23917,60824:23992,60825:23993,60826:24016,60827:24353,60828:24372,60829:24423,60830:24503,60831:24542,60832:24669,60833:24709,60834:24714,60835:24798,60836:24789,60837:24864,60838:24818,60839:24849,60840:24887,60841:24880,60842:24984,60843:25107,60844:25254,60845:25589,60846:25696,60847:25757,60848:25806,60849:25934,60850:26112,60851:26133,60852:26171,60853:26121,60854:26158,60855:26142,60856:26148,60857:26213,60858:26199,60859:26201,60860:64018,60861:26227,60862:26265,60863:26272,60864:26290,60865:26303,60866:26362,60867:26382,60868:63785,60869:26470,60870:26555,60871:26706,60872:26560,60873:26625,60874:26692,60875:26831,60876:64019,60877:26984,60878:64020,60879:27032,60880:27106,60881:27184,60882:27243,60883:27206,60884:27251,60885:27262,60886:27362,60887:27364,60888:27606,60889:27711,60890:27740,60891:27782,60892:27759,60893:27866,60894:27908,60895:28039,60896:28015,60897:28054,60898:28076,60899:28111,60900:28152,60901:28146,60902:28156,60903:28217,60904:28252,60905:28199,60906:28220,60907:28351,60908:28552,60909:28597,60910:28661,60911:28677,60912:28679,60913:28712,60914:28805,60915:28843,60916:28943,60917:28932,60918:29020,60919:28998,60920:28999,60921:64021,60922:29121,60923:29182,60924:29361,60992:29374,60993:29476,60994:64022,60995:29559,60996:29629,60997:29641,60998:29654,60999:29667,61000:29650,61001:29703,61002:29685,61003:29734,61004:29738,61005:29737,61006:29742,61007:29794,61008:29833,61009:29855,61010:29953,61011:30063,61012:30338,61013:30364,61014:30366,61015:30363,61016:30374,61017:64023,61018:30534,61019:21167,61020:30753,61021:30798,61022:30820,61023:30842,61024:31024,61025:64024,61026:64025,61027:64026,61028:31124,61029:64027,61030:31131,61031:31441,61032:31463,61033:64028,61034:31467,61035:31646,61036:64029,61037:32072,61038:32092,61039:32183,61040:32160,61041:32214,61042:32338,61043:32583,61044:32673,61045:64030,61046:33537,61047:33634,61048:33663,61049:33735,61050:33782,61051:33864,61052:33972,61053:34131,61054:34137,61056:34155,61057:64031,61058:34224,61059:64032,61060:64033,61061:34823,61062:35061,61063:35346,61064:35383,61065:35449,61066:35495,61067:35518,61068:35551,61069:64034,61070:35574,61071:35667,61072:35711,61073:36080,61074:36084,61075:36114,61076:36214,61077:64035,61078:36559,61079:64036,61080:64037,61081:36967,61082:37086,61083:64038,61084:37141,61085:37159,61086:37338,61087:37335,61088:37342,61089:37357,61090:37358,61091:37348,61092:37349,61093:37382,61094:37392,61095:37386,61096:37434,61097:37440,61098:37436,61099:37454,61100:37465,61101:37457,61102:37433,61103:37479,61104:37543,61105:37495,61106:37496,61107:37607,61108:37591,61109:37593,61110:37584,61111:64039,61112:37589,61113:37600,61114:37587,61115:37669,61116:37665,61117:37627,61118:64040,61119:37662,61120:37631,61121:37661,61122:37634,61123:37744,61124:37719,61125:37796,61126:37830,61127:37854,61128:37880,61129:37937,61130:37957,61131:37960,61132:38290,61133:63964,61134:64041,61135:38557,61136:38575,61137:38707,61138:38715,61139:38723,61140:38733,61141:38735,61142:38737,61143:38741,61144:38999,61145:39013,61146:64042,61147:64043,61148:39207,61149:64044,61150:39326,61151:39502,61152:39641,61153:39644,61154:39797,61155:39794,61156:39823,61157:39857,61158:39867,61159:39936,61160:40304,61161:40299,61162:64045,61163:40473,61164:40657,61167:8560,61168:8561,61169:8562,61170:8563,61171:8564,61172:8565,61173:8566,61174:8567,61175:8568,61176:8569,61177:65506,61178:65508,61179:65287,61180:65282,61504:57344,61505:57345,61506:57346,61507:57347,61508:57348,61509:57349,61510:57350,61511:57351,61512:57352,61513:57353,61514:57354,61515:57355,61516:57356,61517:57357,61518:57358,61519:57359,61520:57360,61521:57361,61522:57362,61523:57363,61524:57364,61525:57365,61526:57366,61527:57367,61528:57368,61529:57369,61530:57370,61531:57371,61532:57372,61533:57373,61534:57374,61535:57375,61536:57376,61537:57377,61538:57378,61539:57379,61540:57380,61541:57381,61542:57382,61543:57383,61544:57384,61545:57385,61546:57386,61547:57387,61548:57388,61549:57389,61550:57390,61551:57391,61552:57392,61553:57393,61554:57394,61555:57395,61556:57396,61557:57397,61558:57398,61559:57399,61560:57400,61561:57401,61562:57402,61563:57403,61564:57404,61565:57405,61566:57406,61568:57407,61569:57408,61570:57409,61571:57410,61572:57411,61573:57412,61574:57413,61575:57414,61576:57415,61577:57416,61578:57417,61579:57418,61580:57419,61581:57420,61582:57421,61583:57422,61584:57423,61585:57424,61586:57425,61587:57426,61588:57427,61589:57428,61590:57429,61591:57430,61592:57431,61593:57432,61594:57433,61595:57434,61596:57435,61597:57436,61598:57437,61599:57438,61600:57439,61601:57440,61602:57441,61603:57442,61604:57443,61605:57444,61606:57445,61607:57446,61608:57447,61609:57448,61610:57449,61611:57450,61612:57451,61613:57452,61614:57453,61615:57454,61616:57455,61617:57456,61618:57457,61619:57458,61620:57459,61621:57460,61622:57461,61623:57462,61624:57463,61625:57464,61626:57465,61627:57466,61628:57467,61629:57468,61630:57469,61631:57470,61632:57471,61633:57472,61634:57473,61635:57474,61636:57475,61637:57476,61638:57477,61639:57478,61640:57479,61641:57480,61642:57481,61643:57482,61644:57483,61645:57484,61646:57485,61647:57486,61648:57487,61649:57488,61650:57489,61651:57490,61652:57491,61653:57492,61654:57493,61655:57494,61656:57495,61657:57496,61658:57497,61659:57498,61660:57499,61661:57500,61662:57501,61663:57502,61664:57503,61665:57504,61666:57505,61667:57506,61668:57507,61669:57508,61670:57509,61671:57510,61672:57511,61673:57512,61674:57513,61675:57514,61676:57515,61677:57516,61678:57517,61679:57518,61680:57519,61681:57520,61682:57521,61683:57522,61684:57523,61685:57524,61686:57525,61687:57526,61688:57527,61689:57528,61690:57529,61691:57530,61692:57531,61760:57532,61761:57533,61762:57534,61763:57535,61764:57536,61765:57537,61766:57538,61767:57539,61768:57540,61769:57541,61770:57542,61771:57543,61772:57544,61773:57545,61774:57546,61775:57547,61776:57548,61777:57549,61778:57550,61779:57551,61780:57552,61781:57553,61782:57554,61783:57555,61784:57556,61785:57557,61786:57558,61787:57559,61788:57560,61789:57561,61790:57562,61791:57563,61792:57564,61793:57565,61794:57566,61795:57567,61796:57568,61797:57569,61798:57570,61799:57571,61800:57572,61801:57573,61802:57574,61803:57575,61804:57576,61805:57577,61806:57578,61807:57579,61808:57580,61809:57581,61810:57582,61811:57583,61812:57584,61813:57585,61814:57586,61815:57587,61816:57588,61817:57589,61818:57590,61819:57591,61820:57592,61821:57593,61822:57594,61824:57595,61825:57596,61826:57597,61827:57598,61828:57599,61829:57600,61830:57601,61831:57602,61832:57603,61833:57604,61834:57605,61835:57606,61836:57607,61837:57608,61838:57609,61839:57610,61840:57611,61841:57612,61842:57613,61843:57614,61844:57615,61845:57616,61846:57617,61847:57618,61848:57619,61849:57620,61850:57621,61851:57622,61852:57623,61853:57624,61854:57625,61855:57626,61856:57627,61857:57628,61858:57629,61859:57630,61860:57631,61861:57632,61862:57633,61863:57634,61864:57635,61865:57636,61866:57637,61867:57638,61868:57639,61869:57640,61870:57641,61871:57642,61872:57643,61873:57644,61874:57645,61875:57646,61876:57647,61877:57648,61878:57649,61879:57650,61880:57651,61881:57652,61882:57653,61883:57654,61884:57655,61885:57656,61886:57657,61887:57658,61888:57659,61889:57660,61890:57661,61891:57662,61892:57663,61893:57664,61894:57665,61895:57666,61896:57667,61897:57668,61898:57669,61899:57670,61900:57671,61901:57672,61902:57673,61903:57674,61904:57675,61905:57676,61906:57677,61907:57678,61908:57679,61909:57680,61910:57681,61911:57682,61912:57683,61913:57684,61914:57685,61915:57686,61916:57687,61917:57688,61918:57689,61919:57690,61920:57691,61921:57692,61922:57693,61923:57694,61924:57695,61925:57696,61926:57697,61927:57698,61928:57699,61929:57700,61930:57701,61931:57702,61932:57703,61933:57704,61934:57705,61935:57706,61936:57707,61937:57708,61938:57709,61939:57710,61940:57711,61941:57712,61942:57713,61943:57714,61944:57715,61945:57716,61946:57717,61947:57718,61948:57719,62016:57720,62017:57721,62018:57722,62019:57723,62020:57724,62021:57725,62022:57726,62023:57727,62024:57728,62025:57729,62026:57730,62027:57731,62028:57732,62029:57733,62030:57734,62031:57735,62032:57736,62033:57737,62034:57738,62035:57739,62036:57740,62037:57741,62038:57742,62039:57743,62040:57744,62041:57745,62042:57746,62043:57747,62044:57748,62045:57749,62046:57750,62047:57751,62048:57752,62049:57753,62050:57754,62051:57755,62052:57756,62053:57757,62054:57758,62055:57759,62056:57760,62057:57761,62058:57762,62059:57763,62060:57764,62061:57765,62062:57766,62063:57767,62064:57768,62065:57769,62066:57770,62067:57771,62068:57772,62069:57773,62070:57774,62071:57775,62072:57776,62073:57777,62074:57778,62075:57779,62076:57780,62077:57781,62078:57782,62080:57783,62081:57784,62082:57785,62083:57786,62084:57787,62085:57788,62086:57789,62087:57790,62088:57791,62089:57792,62090:57793,62091:57794,62092:57795,62093:57796,62094:57797,62095:57798,62096:57799,62097:57800,62098:57801,62099:57802,62100:57803,62101:57804,62102:57805,62103:57806,62104:57807,62105:57808,62106:57809,62107:57810,62108:57811,62109:57812,62110:57813,62111:57814,62112:57815,62113:57816,62114:57817,62115:57818,62116:57819,62117:57820,62118:57821,62119:57822,62120:57823,62121:57824,62122:57825,62123:57826,62124:57827,62125:57828,62126:57829,62127:57830,62128:57831,62129:57832,62130:57833,62131:57834,62132:57835,62133:57836,62134:57837,62135:57838,62136:57839,62137:57840,62138:57841,62139:57842,62140:57843,62141:57844,62142:57845,62143:57846,62144:57847,62145:57848,62146:57849,62147:57850,62148:57851,62149:57852,62150:57853,62151:57854,62152:57855,62153:57856,62154:57857,62155:57858,62156:57859,62157:57860,62158:57861,62159:57862,62160:57863,62161:57864,62162:57865,62163:57866,62164:57867,62165:57868,62166:57869,62167:57870,62168:57871,62169:57872,62170:57873,62171:57874,62172:57875,62173:57876,62174:57877,62175:57878,62176:57879,62177:57880,62178:57881,62179:57882,62180:57883,62181:57884,62182:57885,62183:57886,62184:57887,62185:57888,62186:57889,62187:57890,62188:57891,62189:57892,62190:57893,62191:57894,62192:57895,62193:57896,62194:57897,62195:57898,62196:57899,62197:57900,62198:57901,62199:57902,62200:57903,62201:57904,62202:57905,62203:57906,62204:57907,62272:57908,62273:57909,62274:57910,62275:57911,62276:57912,62277:57913,62278:57914,62279:57915,62280:57916,62281:57917,62282:57918,62283:57919,62284:57920,62285:57921,62286:57922,62287:57923,62288:57924,62289:57925,62290:57926,62291:57927,62292:57928,62293:57929,62294:57930,62295:57931,62296:57932,62297:57933,62298:57934,62299:57935,62300:57936,62301:57937,62302:57938,62303:57939,62304:57940,62305:57941,62306:57942,62307:57943,62308:57944,62309:57945,62310:57946,62311:57947,62312:57948,62313:57949,62314:57950,62315:57951,62316:57952,62317:57953,62318:57954,62319:57955,62320:57956,62321:57957,62322:57958,62323:57959,62324:57960,62325:57961,62326:57962,62327:57963,62328:57964,62329:57965,62330:57966,62331:57967,62332:57968,62333:57969,62334:57970,62336:57971,62337:57972,62338:57973,62339:57974,62340:57975,62341:57976,62342:57977,62343:57978,62344:57979,62345:57980,62346:57981,62347:57982,62348:57983,62349:57984,62350:57985,62351:57986,62352:57987,62353:57988,62354:57989,62355:57990,62356:57991,62357:57992,62358:57993,62359:57994,62360:57995,62361:57996,62362:57997,62363:57998,62364:57999,62365:58e3,62366:58001,62367:58002,62368:58003,62369:58004,62370:58005,62371:58006,62372:58007,62373:58008,62374:58009,62375:58010,62376:58011,62377:58012,62378:58013,62379:58014,62380:58015,62381:58016,62382:58017,62383:58018,62384:58019,62385:58020,62386:58021,62387:58022,62388:58023,62389:58024,62390:58025,62391:58026,62392:58027,62393:58028,62394:58029,62395:58030,62396:58031,62397:58032,62398:58033,62399:58034,62400:58035,62401:58036,62402:58037,62403:58038,62404:58039,62405:58040,62406:58041,62407:58042,62408:58043,62409:58044,62410:58045,62411:58046,62412:58047,62413:58048,62414:58049,62415:58050,62416:58051,62417:58052,62418:58053,62419:58054,62420:58055,62421:58056,62422:58057,62423:58058,62424:58059,62425:58060,62426:58061,62427:58062,62428:58063,62429:58064,62430:58065,62431:58066,62432:58067,62433:58068,62434:58069,62435:58070,62436:58071,62437:58072,62438:58073,62439:58074,62440:58075,62441:58076,62442:58077,62443:58078,62444:58079,62445:58080,62446:58081,62447:58082,62448:58083,62449:58084,62450:58085,62451:58086,62452:58087,62453:58088,62454:58089,62455:58090,62456:58091,62457:58092,62458:58093,62459:58094,62460:58095,62528:58096,62529:58097,62530:58098,62531:58099,62532:58100,62533:58101,62534:58102,62535:58103,62536:58104,62537:58105,62538:58106,62539:58107,62540:58108,62541:58109,62542:58110,62543:58111,62544:58112,62545:58113,62546:58114,62547:58115,62548:58116,62549:58117,62550:58118,62551:58119,62552:58120,62553:58121,62554:58122,62555:58123,62556:58124,62557:58125,62558:58126,62559:58127,62560:58128,62561:58129,62562:58130,62563:58131,62564:58132,62565:58133,62566:58134,62567:58135,62568:58136,62569:58137,62570:58138,62571:58139,62572:58140,62573:58141,62574:58142,62575:58143,62576:58144,62577:58145,62578:58146,62579:58147,62580:58148,62581:58149,62582:58150,62583:58151,62584:58152,62585:58153,62586:58154,62587:58155,62588:58156,62589:58157,62590:58158,62592:58159,62593:58160,62594:58161,62595:58162,62596:58163,62597:58164,62598:58165,62599:58166,62600:58167,62601:58168,62602:58169,62603:58170,62604:58171,62605:58172,62606:58173,62607:58174,62608:58175,62609:58176,62610:58177,62611:58178,62612:58179,62613:58180,62614:58181,62615:58182,62616:58183,62617:58184,62618:58185,62619:58186,62620:58187,62621:58188,62622:58189,62623:58190,62624:58191,62625:58192,62626:58193,62627:58194,62628:58195,62629:58196,62630:58197,62631:58198,62632:58199,62633:58200,62634:58201,62635:58202,62636:58203,62637:58204,62638:58205,62639:58206,62640:58207,62641:58208,62642:58209,62643:58210,62644:58211,62645:58212,62646:58213,62647:58214,62648:58215,62649:58216,62650:58217,62651:58218,62652:58219,62653:58220,62654:58221,62655:58222,62656:58223,62657:58224,62658:58225,62659:58226,62660:58227,62661:58228,62662:58229,62663:58230,62664:58231,62665:58232,62666:58233,62667:58234,62668:58235,62669:58236,62670:58237,62671:58238,62672:58239,62673:58240,62674:58241,62675:58242,62676:58243,62677:58244,62678:58245,62679:58246,62680:58247,62681:58248,62682:58249,62683:58250,62684:58251,62685:58252,62686:58253,62687:58254,62688:58255,62689:58256,62690:58257,62691:58258,62692:58259,62693:58260,62694:58261,62695:58262,62696:58263,62697:58264,62698:58265,62699:58266,62700:58267,62701:58268,62702:58269,62703:58270,62704:58271,62705:58272,62706:58273,62707:58274,62708:58275,62709:58276,62710:58277,62711:58278,62712:58279,62713:58280,62714:58281,62715:58282,62716:58283,62784:58284,62785:58285,62786:58286,62787:58287,62788:58288,62789:58289,62790:58290,62791:58291,62792:58292,62793:58293,62794:58294,62795:58295,62796:58296,62797:58297,62798:58298,62799:58299,62800:58300,62801:58301,62802:58302,62803:58303,62804:58304,62805:58305,62806:58306,62807:58307,62808:58308,62809:58309,62810:58310,62811:58311,62812:58312,62813:58313,62814:58314,62815:58315,62816:58316,62817:58317,62818:58318,62819:58319,62820:58320,62821:58321,62822:58322,62823:58323,62824:58324,62825:58325,62826:58326,62827:58327,62828:58328,62829:58329,62830:58330,62831:58331,62832:58332,62833:58333,62834:58334,62835:58335,62836:58336,62837:58337,62838:58338,62839:58339,62840:58340,62841:58341,62842:58342,62843:58343,62844:58344,62845:58345,62846:58346,62848:58347,62849:58348,62850:58349,62851:58350,62852:58351,62853:58352,62854:58353,62855:58354,62856:58355,62857:58356,62858:58357,62859:58358,62860:58359,62861:58360,62862:58361,62863:58362,62864:58363,62865:58364,62866:58365,62867:58366,62868:58367,62869:58368,62870:58369,62871:58370,62872:58371,62873:58372,62874:58373,62875:58374,62876:58375,62877:58376,62878:58377,62879:58378,62880:58379,62881:58380,62882:58381,62883:58382,62884:58383,62885:58384,62886:58385,62887:58386,62888:58387,62889:58388,62890:58389,62891:58390,62892:58391,62893:58392,62894:58393,62895:58394,62896:58395,62897:58396,62898:58397,62899:58398,62900:58399,62901:58400,62902:58401,62903:58402,62904:58403,62905:58404,62906:58405,62907:58406,62908:58407,62909:58408,62910:58409,62911:58410,62912:58411,62913:58412,62914:58413,62915:58414,62916:58415,62917:58416,62918:58417,62919:58418,62920:58419,62921:58420,62922:58421,62923:58422,62924:58423,62925:58424,62926:58425,62927:58426,62928:58427,62929:58428,62930:58429,62931:58430,62932:58431,62933:58432,62934:58433,62935:58434,62936:58435,62937:58436,62938:58437,62939:58438,62940:58439,62941:58440,62942:58441,62943:58442,62944:58443,62945:58444,62946:58445,62947:58446,62948:58447,62949:58448,62950:58449,62951:58450,62952:58451,62953:58452,62954:58453,62955:58454,62956:58455,62957:58456,62958:58457,62959:58458,62960:58459,62961:58460,62962:58461,62963:58462,62964:58463,62965:58464,62966:58465,62967:58466,62968:58467,62969:58468,62970:58469,62971:58470,62972:58471,63040:58472,63041:58473,63042:58474,63043:58475,63044:58476,63045:58477,63046:58478,63047:58479,63048:58480,63049:58481,63050:58482,63051:58483,63052:58484,63053:58485,63054:58486,63055:58487,63056:58488,63057:58489,63058:58490,63059:58491,63060:58492,63061:58493,63062:58494,63063:58495,63064:58496,63065:58497,63066:58498,63067:58499,63068:58500,63069:58501,63070:58502,63071:58503,63072:58504,63073:58505,63074:58506,63075:58507,63076:58508,63077:58509,63078:58510,63079:58511,63080:58512,63081:58513,63082:58514,63083:58515,63084:58516,63085:58517,63086:58518,63087:58519,63088:58520,63089:58521,63090:58522,63091:58523,63092:58524,63093:58525,63094:58526,63095:58527,63096:58528,63097:58529,63098:58530,63099:58531,63100:58532,63101:58533,63102:58534,63104:58535,63105:58536,63106:58537,63107:58538,63108:58539,63109:58540,63110:58541,63111:58542,63112:58543,63113:58544,63114:58545,63115:58546,63116:58547,63117:58548,63118:58549,63119:58550,63120:58551,63121:58552,63122:58553,63123:58554,63124:58555,63125:58556,63126:58557,63127:58558,63128:58559,63129:58560,63130:58561,63131:58562,63132:58563,63133:58564,63134:58565,63135:58566,63136:58567,63137:58568,63138:58569,63139:58570,63140:58571,63141:58572,63142:58573,63143:58574,63144:58575,63145:58576,63146:58577,63147:58578,63148:58579,63149:58580,63150:58581,63151:58582,63152:58583,63153:58584,63154:58585,63155:58586,63156:58587,63157:58588,63158:58589,63159:58590,63160:58591,63161:58592,63162:58593,63163:58594,63164:58595,63165:58596,63166:58597,63167:58598,63168:58599,63169:58600,63170:58601,63171:58602,63172:58603,63173:58604,63174:58605,63175:58606,63176:58607,63177:58608,63178:58609,63179:58610,63180:58611,63181:58612,63182:58613,63183:58614,63184:58615,63185:58616,63186:58617,63187:58618,63188:58619,63189:58620,63190:58621,63191:58622,63192:58623,63193:58624,63194:58625,63195:58626,63196:58627,63197:58628,63198:58629,63199:58630,63200:58631,63201:58632,63202:58633,63203:58634,63204:58635,63205:58636,63206:58637,63207:58638,63208:58639,63209:58640,63210:58641,63211:58642,63212:58643,63213:58644,63214:58645,63215:58646,63216:58647,63217:58648,63218:58649,63219:58650,63220:58651,63221:58652,63222:58653,63223:58654,63224:58655,63225:58656,63226:58657,63227:58658,63228:58659,63296:58660,63297:58661,63298:58662,63299:58663,63300:58664,63301:58665,63302:58666,63303:58667,63304:58668,63305:58669,63306:58670,63307:58671,63308:58672,63309:58673,63310:58674,63311:58675,63312:58676,63313:58677,63314:58678,63315:58679,63316:58680,63317:58681,63318:58682,63319:58683,63320:58684,63321:58685,63322:58686,63323:58687,63324:58688,63325:58689,63326:58690,63327:58691,63328:58692,63329:58693,63330:58694,63331:58695,63332:58696,63333:58697,63334:58698,63335:58699,63336:58700,63337:58701,63338:58702,63339:58703,63340:58704,63341:58705,63342:58706,63343:58707,63344:58708,63345:58709,63346:58710,63347:58711,63348:58712,63349:58713,63350:58714,63351:58715,63352:58716,63353:58717,63354:58718,63355:58719,63356:58720,63357:58721,63358:58722,63360:58723,63361:58724,63362:58725,63363:58726,63364:58727,63365:58728,63366:58729,63367:58730,63368:58731,63369:58732,63370:58733,63371:58734,63372:58735,63373:58736,63374:58737,63375:58738,63376:58739,63377:58740,63378:58741,63379:58742,63380:58743,63381:58744,63382:58745,63383:58746,63384:58747,63385:58748,63386:58749,63387:58750,63388:58751,63389:58752,63390:58753,63391:58754,63392:58755,63393:58756,63394:58757,63395:58758,63396:58759,63397:58760,63398:58761,63399:58762,63400:58763,63401:58764,63402:58765,63403:58766,63404:58767,63405:58768,63406:58769,63407:58770,63408:58771,63409:58772,63410:58773,63411:58774,63412:58775,63413:58776,63414:58777,63415:58778,63416:58779,63417:58780,63418:58781,63419:58782,63420:58783,63421:58784,63422:58785,63423:58786,63424:58787,63425:58788,63426:58789,63427:58790,63428:58791,63429:58792,63430:58793,63431:58794,63432:58795,63433:58796,63434:58797,63435:58798,63436:58799,63437:58800,63438:58801,63439:58802,63440:58803,63441:58804,63442:58805,63443:58806,63444:58807,63445:58808,63446:58809,63447:58810,63448:58811,63449:58812,63450:58813,63451:58814,63452:58815,63453:58816,63454:58817,63455:58818,63456:58819,63457:58820,63458:58821,63459:58822,63460:58823,63461:58824,63462:58825,63463:58826,63464:58827,63465:58828,63466:58829,63467:58830,63468:58831,63469:58832,63470:58833,63471:58834,63472:58835,63473:58836,63474:58837,63475:58838,63476:58839,63477:58840,63478:58841,63479:58842,63480:58843,63481:58844,63482:58845,63483:58846,63484:58847,63552:58848,63553:58849,63554:58850,63555:58851,63556:58852,63557:58853,63558:58854,63559:58855,63560:58856,63561:58857,63562:58858,63563:58859,63564:58860,63565:58861,63566:58862,63567:58863,63568:58864,63569:58865,63570:58866,63571:58867,63572:58868,63573:58869,63574:58870,63575:58871,63576:58872,63577:58873,63578:58874,63579:58875,63580:58876,63581:58877,63582:58878,63583:58879,63584:58880,63585:58881,63586:58882,63587:58883,63588:58884,63589:58885,63590:58886,63591:58887,63592:58888,63593:58889,63594:58890,63595:58891,63596:58892,63597:58893,63598:58894,63599:58895,63600:58896,63601:58897,63602:58898,63603:58899,63604:58900,63605:58901,63606:58902,63607:58903,63608:58904,63609:58905,63610:58906,63611:58907,63612:58908,63613:58909,63614:58910,63616:58911,63617:58912,63618:58913,63619:58914,63620:58915,63621:58916,63622:58917,63623:58918,63624:58919,63625:58920,63626:58921,63627:58922,63628:58923,63629:58924,63630:58925,63631:58926,63632:58927,63633:58928,63634:58929,63635:58930,63636:58931,63637:58932,63638:58933,63639:58934,63640:58935,63641:58936,63642:58937,63643:58938,63644:58939,63645:58940,63646:58941,63647:58942,63648:58943,63649:58944,63650:58945,63651:58946,63652:58947,63653:58948,63654:58949,63655:58950,63656:58951,63657:58952,63658:58953,63659:58954,63660:58955,63661:58956,63662:58957,63663:58958,63664:58959,63665:58960,63666:58961,63667:58962,63668:58963,63669:58964,63670:58965,63671:58966,63672:58967,63673:58968,63674:58969,63675:58970,63676:58971,63677:58972,63678:58973,63679:58974,63680:58975,63681:58976,63682:58977,63683:58978,63684:58979,63685:58980,63686:58981,63687:58982,63688:58983,63689:58984,63690:58985,63691:58986,63692:58987,63693:58988,63694:58989,63695:58990,63696:58991,63697:58992,63698:58993,63699:58994,63700:58995,63701:58996,63702:58997,63703:58998,63704:58999,63705:59e3,63706:59001,63707:59002,63708:59003,63709:59004,63710:59005,63711:59006,63712:59007,63713:59008,63714:59009,63715:59010,63716:59011,63717:59012,63718:59013,63719:59014,63720:59015,63721:59016,63722:59017,63723:59018,63724:59019,63725:59020,63726:59021,63727:59022,63728:59023,63729:59024,63730:59025,63731:59026,63732:59027,63733:59028,63734:59029,63735:59030,63736:59031,63737:59032,63738:59033,63739:59034,63740:59035,64064:8560,64065:8561,64066:8562,64067:8563,64068:8564,64069:8565,64070:8566,64071:8567,64072:8568,64073:8569,64074:8544,64075:8545,64076:8546,64077:8547,64078:8548,64079:8549,64080:8550,64081:8551,64082:8552,64083:8553,64084:65506,64085:65508,64086:65287,64087:65282,64088:12849,64089:8470,64090:8481,64091:8757,64092:32394,64093:35100,64094:37704,64095:37512,64096:34012,64097:20425,64098:28859,64099:26161,64100:26824,64101:37625,64102:26363,64103:24389,64104:20008,64105:20193,64106:20220,64107:20224,64108:20227,64109:20281,64110:20310,64111:20370,64112:20362,64113:20378,64114:20372,64115:20429,64116:20544,64117:20514,64118:20479,64119:20510,64120:20550,64121:20592,64122:20546,64123:20628,64124:20724,64125:20696,64126:20810,64128:20836,64129:20893,64130:20926,64131:20972,64132:21013,64133:21148,64134:21158,64135:21184,64136:21211,64137:21248,64138:21255,64139:21284,64140:21362,64141:21395,64142:21426,64143:21469,64144:64014,64145:21660,64146:21642,64147:21673,64148:21759,64149:21894,64150:22361,64151:22373,64152:22444,64153:22472,64154:22471,64155:64015,64156:64016,64157:22686,64158:22706,64159:22795,64160:22867,64161:22875,64162:22877,64163:22883,64164:22948,64165:22970,64166:23382,64167:23488,64168:29999,64169:23512,64170:23532,64171:23582,64172:23718,64173:23738,64174:23797,64175:23847,64176:23891,64177:64017,64178:23874,64179:23917,64180:23992,64181:23993,64182:24016,64183:24353,64184:24372,64185:24423,64186:24503,64187:24542,64188:24669,64189:24709,64190:24714,64191:24798,64192:24789,64193:24864,64194:24818,64195:24849,64196:24887,64197:24880,64198:24984,64199:25107,64200:25254,64201:25589,64202:25696,64203:25757,64204:25806,64205:25934,64206:26112,64207:26133,64208:26171,64209:26121,64210:26158,64211:26142,64212:26148,64213:26213,64214:26199,64215:26201,64216:64018,64217:26227,64218:26265,64219:26272,64220:26290,64221:26303,64222:26362,64223:26382,64224:63785,64225:26470,64226:26555,64227:26706,64228:26560,64229:26625,64230:26692,64231:26831,64232:64019,64233:26984,64234:64020,64235:27032,64236:27106,64237:27184,64238:27243,64239:27206,64240:27251,64241:27262,64242:27362,64243:27364,64244:27606,64245:27711,64246:27740,64247:27782,64248:27759,64249:27866,64250:27908,64251:28039,64252:28015,64320:28054,64321:28076,64322:28111,64323:28152,64324:28146,64325:28156,64326:28217,64327:28252,64328:28199,64329:28220,64330:28351,64331:28552,64332:28597,64333:28661,64334:28677,64335:28679,64336:28712,64337:28805,64338:28843,64339:28943,64340:28932,64341:29020,64342:28998,64343:28999,64344:64021,64345:29121,64346:29182,64347:29361,64348:29374,64349:29476,64350:64022,64351:29559,64352:29629,64353:29641,64354:29654,64355:29667,64356:29650,64357:29703,64358:29685,64359:29734,64360:29738,64361:29737,64362:29742,64363:29794,64364:29833,64365:29855,64366:29953,64367:30063,64368:30338,64369:30364,64370:30366,64371:30363,64372:30374,64373:64023,64374:30534,64375:21167,64376:30753,64377:30798,64378:30820,64379:30842,64380:31024,64381:64024,64382:64025,64384:64026,64385:31124,64386:64027,64387:31131,64388:31441,64389:31463,64390:64028,64391:31467,64392:31646,64393:64029,64394:32072,64395:32092,64396:32183,64397:32160,64398:32214,64399:32338,64400:32583,64401:32673,64402:64030,64403:33537,64404:33634,64405:33663,64406:33735,64407:33782,64408:33864,64409:33972,64410:34131,64411:34137,64412:34155,64413:64031,64414:34224,64415:64032,64416:64033,64417:34823,64418:35061,64419:35346,64420:35383,64421:35449,64422:35495,64423:35518,64424:35551,64425:64034,64426:35574,64427:35667,64428:35711,64429:36080,64430:36084,64431:36114,64432:36214,64433:64035,64434:36559,64435:64036,64436:64037,64437:36967,64438:37086,64439:64038,64440:37141,64441:37159,64442:37338,64443:37335,64444:37342,64445:37357,64446:37358,64447:37348,64448:37349,64449:37382,64450:37392,64451:37386,64452:37434,64453:37440,64454:37436,64455:37454,64456:37465,64457:37457,64458:37433,64459:37479,64460:37543,64461:37495,64462:37496,64463:37607,64464:37591,64465:37593,64466:37584,64467:64039,64468:37589,64469:37600,64470:37587,64471:37669,64472:37665,64473:37627,64474:64040,64475:37662,64476:37631,64477:37661,64478:37634,64479:37744,64480:37719,64481:37796,64482:37830,64483:37854,64484:37880,64485:37937,64486:37957,64487:37960,64488:38290,64489:63964,64490:64041,64491:38557,64492:38575,64493:38707,64494:38715,64495:38723,64496:38733,64497:38735,64498:38737,64499:38741,64500:38999,64501:39013,64502:64042,64503:64043,64504:39207,64505:64044,64506:39326,64507:39502,64508:39641,64576:39644,64577:39797,64578:39794,64579:39823,64580:39857,64581:39867,64582:39936,64583:40304,64584:40299,64585:64045,64586:40473,64587:40657},n.prototype={constructor:n,getInt8:function(){var e=this.dv.getInt8(this.offset);return this.offset+=1,e},getInt8Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt8());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getUint8Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getUint8());return t},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt16Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt16());return t},getUint16:function(){var e=this.dv.getUint16(this.offset,this.littleEndian);return this.offset+=2,e},getUint16Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getUint16());return t},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getUint32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getUint32());return t},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat64());return t},getIndex:function(e,t){switch(e){case 1:return!0===t?this.getUint8():this.getInt8();case 2:return!0===t?this.getUint16():this.getInt16();case 4:return this.getInt32();default:throw"unknown number type "+e+" exception."}},getIndexArray:function(e,t,n){for(var i=[],r=0;r<t;r++)i.push(this.getIndex(e,n));return i},getChars:function(e){for(var t="";e>0;){var n=this.getUint8();if(e--,0===n)break;t+=String.fromCharCode(n)}for(;e>0;)this.getUint8(),e--;return t},getSjisStringsAsUnicode:function(e){for(var t=[];e>0;){var n=this.getUint8();if(e--,0===n)break;t.push(n)}for(;e>0;)this.getUint8(),e--;return this.encoder.s2u(new Uint8Array(t))},getUnicodeStrings:function(e){for(var t="";e>0;){var n=this.getUint16();if(e-=2,0===n)break;t+=String.fromCharCode(n)}for(;e>0;)this.getUint8(),e--;return t},getTextBuffer:function(){var e=this.getUint32();return this.getUnicodeStrings(e)}},i.prototype={constructor:i,leftToRightVector3:function(e){e[2]=-e[2]},leftToRightQuaternion:function(e){e[0]=-e[0],e[1]=-e[1]},leftToRightEuler:function(e){e[0]=-e[0],e[1]=-e[1]},leftToRightIndexOrder:function(e){var t=e[2];e[2]=e[0],e[0]=t},leftToRightVector3Range:function(e,t){var n=-t[2];t[2]=-e[2],e[2]=n},leftToRightEulerRange:function(e,t){var n=-t[0],i=-t[1];t[0]=-e[0],t[1]=-e[1],e[0]=n,e[1]=i}},r.prototype.parsePmd=function(e,t){var i={},r=new n(e);i.metadata={},i.metadata.format="pmd",i.metadata.coordinateSystem="left";return function(){var e=i.metadata;if(e.magic=r.getChars(3),"Pmd"!==e.magic)throw"PMD file magic is not Pmd, but "+e.magic;e.version=r.getFloat32(),e.modelName=r.getSjisStringsAsUnicode(20),e.comment=r.getSjisStringsAsUnicode(256)}(),function(){var e=function(){var e={};return e.position=r.getFloat32Array(3),e.normal=r.getFloat32Array(3),e.uv=r.getFloat32Array(2),e.skinIndices=r.getUint16Array(2),e.skinWeights=[r.getUint8()/100],e.skinWeights.push(1-e.skinWeights[0]),e.edgeFlag=r.getUint8(),e},t=i.metadata;t.vertexCount=r.getUint32(),i.vertices=[];for(var n=0;n<t.vertexCount;n++)i.vertices.push(e())}(),function(){var e=function(){var e={};return e.indices=r.getUint16Array(3),e},t=i.metadata;t.faceCount=r.getUint32()/3,i.faces=[];for(var n=0;n<t.faceCount;n++)i.faces.push(e())}(),function(){var e=function(){var e={};return e.diffuse=r.getFloat32Array(4),e.shininess=r.getFloat32(),e.specular=r.getFloat32Array(3),e.ambient=r.getFloat32Array(3),e.toonIndex=r.getInt8(),e.edgeFlag=r.getUint8(),e.faceCount=r.getUint32()/3,e.fileName=r.getSjisStringsAsUnicode(20),e},t=i.metadata;t.materialCount=r.getUint32(),i.materials=[];for(var n=0;n<t.materialCount;n++)i.materials.push(e())}(),function(){var e=function(){var e={};return e.name=r.getSjisStringsAsUnicode(20),e.parentIndex=r.getInt16(),e.tailIndex=r.getInt16(),e.type=r.getUint8(),e.ikIndex=r.getInt16(),e.position=r.getFloat32Array(3),e},t=i.metadata;t.boneCount=r.getUint16(),i.bones=[];for(var n=0;n<t.boneCount;n++)i.bones.push(e())}(),function(){var e=function(){var e={};e.target=r.getUint16(),e.effector=r.getUint16(),e.linkCount=r.getUint8(),e.iteration=r.getUint16(),e.maxAngle=r.getFloat32(),e.links=[];for(var t=0;t<e.linkCount;t++){var n={};n.index=r.getUint16(),e.links.push(n)}return e},t=i.metadata;t.ikCount=r.getUint16(),i.iks=[];for(var n=0;n<t.ikCount;n++)i.iks.push(e())}(),function(){var e=function(){var e={};e.name=r.getSjisStringsAsUnicode(20),e.elementCount=r.getUint32(),e.type=r.getUint8(),e.elements=[];for(var t=0;t<e.elementCount;t++)e.elements.push({index:r.getUint32(),position:r.getFloat32Array(3)});return e},t=i.metadata;t.morphCount=r.getUint16(),i.morphs=[];for(var n=0;n<t.morphCount;n++)i.morphs.push(e())}(),function(){var e=function(){var e={};return e.index=r.getUint16(),e},t=i.metadata;t.morphFrameCount=r.getUint8(),i.morphFrames=[];for(var n=0;n<t.morphFrameCount;n++)i.morphFrames.push(e())}(),function(){var e=function(){var e={};return e.name=r.getSjisStringsAsUnicode(50),e},t=i.metadata;t.boneFrameNameCount=r.getUint8(),i.boneFrameNames=[];for(var n=0;n<t.boneFrameNameCount;n++)i.boneFrameNames.push(e())}(),function(){var e=function(){var e={};return e.boneIndex=r.getInt16(),e.frameIndex=r.getUint8(),e},t=i.metadata;t.boneFrameCount=r.getUint32(),i.boneFrames=[];for(var n=0;n<t.boneFrameCount;n++)i.boneFrames.push(e())}(),function(){var e=i.metadata;e.englishCompatibility=r.getUint8(),e.englishCompatibility>0&&(e.englishModelName=r.getSjisStringsAsUnicode(20),e.englishComment=r.getSjisStringsAsUnicode(256))}(),function(){var e=function(){var e={};return e.name=r.getSjisStringsAsUnicode(20),e},t=i.metadata;if(0!==t.englishCompatibility){i.englishBoneNames=[];for(var n=0;n<t.boneCount;n++)i.englishBoneNames.push(e())}}(),function(){var e=function(){var e={};return e.name=r.getSjisStringsAsUnicode(20),e},t=i.metadata;if(0!==t.englishCompatibility){i.englishMorphNames=[];for(var n=0;n<t.morphCount-1;n++)i.englishMorphNames.push(e())}}(),function(){var e=function(){var e={};return e.name=r.getSjisStringsAsUnicode(50),e},t=i.metadata;if(0!==t.englishCompatibility){i.englishBoneFrameNames=[];for(var n=0;n<t.boneFrameNameCount;n++)i.englishBoneFrameNames.push(e())}}(),function(){var e=function(){var e={};return e.fileName=r.getSjisStringsAsUnicode(100),e};i.toonTextures=[];for(var t=0;t<10;t++)i.toonTextures.push(e())}(),function(){var e=function(){var e={};return e.name=r.getSjisStringsAsUnicode(20),e.boneIndex=r.getInt16(),e.groupIndex=r.getUint8(),e.groupTarget=r.getUint16(),e.shapeType=r.getUint8(),e.width=r.getFloat32(),e.height=r.getFloat32(),e.depth=r.getFloat32(),e.position=r.getFloat32Array(3),e.rotation=r.getFloat32Array(3),e.weight=r.getFloat32(),e.positionDamping=r.getFloat32(),e.rotationDamping=r.getFloat32(),e.restitution=r.getFloat32(),e.friction=r.getFloat32(),e.type=r.getUint8(),e},t=i.metadata;t.rigidBodyCount=r.getUint32(),i.rigidBodies=[];for(var n=0;n<t.rigidBodyCount;n++)i.rigidBodies.push(e())}(),function(){var e=function(){var e={};return e.name=r.getSjisStringsAsUnicode(20),e.rigidBodyIndex1=r.getUint32(),e.rigidBodyIndex2=r.getUint32(),e.position=r.getFloat32Array(3),e.rotation=r.getFloat32Array(3),e.translationLimitation1=r.getFloat32Array(3),e.translationLimitation2=r.getFloat32Array(3),e.rotationLimitation1=r.getFloat32Array(3),e.rotationLimitation2=r.getFloat32Array(3),e.springPosition=r.getFloat32Array(3),e.springRotation=r.getFloat32Array(3),e},t=i.metadata;t.constraintCount=r.getUint32(),i.constraints=[];for(var n=0;n<t.constraintCount;n++)i.constraints.push(e())}(),!0===t&&this.leftToRightModel(i),i},r.prototype.parsePmx=function(e,t){var i={},r=new n(e);i.metadata={},i.metadata.format="pmx",i.metadata.coordinateSystem="left";return function(){var e=i.metadata;if(e.magic=r.getChars(4),"PMX "!==e.magic)throw"PMX file magic is not PMX , but "+e.magic;if(e.version=r.getFloat32(),2!==e.version&&2.1!==e.version)throw"PMX version "+e.version+" is not supported.";e.headerSize=r.getUint8(),e.encoding=r.getUint8(),e.additionalUvNum=r.getUint8(),e.vertexIndexSize=r.getUint8(),e.textureIndexSize=r.getUint8(),e.materialIndexSize=r.getUint8(),e.boneIndexSize=r.getUint8(),e.morphIndexSize=r.getUint8(),e.rigidBodyIndexSize=r.getUint8(),e.modelName=r.getTextBuffer(),e.englishModelName=r.getTextBuffer(),e.comment=r.getTextBuffer(),e.englishComment=r.getTextBuffer()}(),function(){var e=function(){var e={};e.position=r.getFloat32Array(3),e.normal=r.getFloat32Array(3),e.uv=r.getFloat32Array(2),e.auvs=[];for(var n=0;n<i.metadata.additionalUvNum;n++)e.auvs.push(r.getFloat32Array(4));e.type=r.getUint8();var o=t.boneIndexSize;if(0===e.type)e.skinIndices=r.getIndexArray(o,1),e.skinWeights=[1];else if(1===e.type)e.skinIndices=r.getIndexArray(o,2),e.skinWeights=r.getFloat32Array(1),e.skinWeights.push(1-e.skinWeights[0]);else if(2===e.type)e.skinIndices=r.getIndexArray(o,4),e.skinWeights=r.getFloat32Array(4);else{if(3!==e.type)throw"unsupport bone type "+e.type+" exception.";e.skinIndices=r.getIndexArray(o,2),e.skinWeights=r.getFloat32Array(1),e.skinWeights.push(1-e.skinWeights[0]),e.skinC=r.getFloat32Array(3),e.skinR0=r.getFloat32Array(3),e.skinR1=r.getFloat32Array(3),e.type=1}return e.edgeRatio=r.getFloat32(),e},t=i.metadata;t.vertexCount=r.getUint32(),i.vertices=[];for(var n=0;n<t.vertexCount;n++)i.vertices.push(e())}(),function(){var e=function(){var e={};return e.indices=r.getIndexArray(t.vertexIndexSize,3,!0),e},t=i.metadata;t.faceCount=r.getUint32()/3,i.faces=[];for(var n=0;n<t.faceCount;n++)i.faces.push(e())}(),function(){var e=i.metadata;e.textureCount=r.getUint32(),i.textures=[];for(var t=0;t<e.textureCount;t++)i.textures.push(r.getTextBuffer())}(),function(){var e=function(){var e={};if(e.name=r.getTextBuffer(),e.englishName=r.getTextBuffer(),e.diffuse=r.getFloat32Array(4),e.specular=r.getFloat32Array(3),e.shininess=r.getFloat32(),e.ambient=r.getFloat32Array(3),e.flag=r.getUint8(),e.edgeColor=r.getFloat32Array(4),e.edgeSize=r.getFloat32(),e.textureIndex=r.getIndex(i.metadata.textureIndexSize),e.envTextureIndex=r.getIndex(i.metadata.textureIndexSize),e.envFlag=r.getUint8(),e.toonFlag=r.getUint8(),0===e.toonFlag)e.toonIndex=r.getIndex(i.metadata.textureIndexSize);else{if(1!==e.toonFlag)throw"unknown toon flag "+e.toonFlag+" exception.";e.toonIndex=r.getInt8()}return e.comment=r.getTextBuffer(),e.faceCount=r.getUint32()/3,e},t=i.metadata;t.materialCount=r.getUint32(),i.materials=[];for(var n=0;n<t.materialCount;n++)i.materials.push(e())}(),function(){var e=function(){var e={};if(e.name=r.getTextBuffer(),e.englishName=r.getTextBuffer(),e.position=r.getFloat32Array(3),e.parentIndex=r.getIndex(i.metadata.boneIndexSize),e.transformationClass=r.getUint32(),e.flag=r.getUint16(),1&e.flag?e.connectIndex=r.getIndex(i.metadata.boneIndexSize):e.offsetPosition=r.getFloat32Array(3),256&e.flag||512&e.flag){var t={};t.isLocal=0!=(128&e.flag),t.affectRotation=0!=(256&e.flag),t.affectPosition=0!=(512&e.flag),t.parentIndex=r.getIndex(i.metadata.boneIndexSize),t.ratio=r.getFloat32(),e.grant=t}if(1024&e.flag&&(e.fixAxis=r.getFloat32Array(3)),2048&e.flag&&(e.localXVector=r.getFloat32Array(3),e.localZVector=r.getFloat32Array(3)),8192&e.flag&&(e.key=r.getUint32()),32&e.flag){var n={};n.effector=r.getIndex(i.metadata.boneIndexSize),n.target=null,n.iteration=r.getUint32(),n.maxAngle=r.getFloat32(),n.linkCount=r.getUint32(),n.links=[];for(var o=0;o<n.linkCount;o++){var a={};a.index=r.getIndex(i.metadata.boneIndexSize),a.angleLimitation=r.getUint8(),1===a.angleLimitation&&(a.lowerLimitationAngle=r.getFloat32Array(3),a.upperLimitationAngle=r.getFloat32Array(3)),n.links.push(a)}e.ik=n}return e},t=i.metadata;t.boneCount=r.getUint32(),i.bones=[];for(var n=0;n<t.boneCount;n++)i.bones.push(e())}(),function(){var e=function(){var e={};e.name=r.getTextBuffer(),e.englishName=r.getTextBuffer(),e.panel=r.getUint8(),e.type=r.getUint8(),e.elementCount=r.getUint32(),e.elements=[];for(var t=0;t<e.elementCount;t++)if(0===e.type)(n={}).index=r.getIndex(i.metadata.morphIndexSize),n.ratio=r.getFloat32(),e.elements.push(n);else if(1===e.type)(n={}).index=r.getIndex(i.metadata.vertexIndexSize,!0),n.position=r.getFloat32Array(3),e.elements.push(n);else if(2===e.type)(n={}).index=r.getIndex(i.metadata.boneIndexSize),n.position=r.getFloat32Array(3),n.rotation=r.getFloat32Array(4),e.elements.push(n);else if(3===e.type)(n={}).index=r.getIndex(i.metadata.vertexIndexSize,!0),n.uv=r.getFloat32Array(4),e.elements.push(n);else if(4===e.type);else if(5===e.type);else if(6===e.type);else if(7===e.type);else if(8===e.type){var n;(n={}).index=r.getIndex(i.metadata.materialIndexSize),n.type=r.getUint8(),n.diffuse=r.getFloat32Array(4),n.specular=r.getFloat32Array(3),n.shininess=r.getFloat32(),n.ambient=r.getFloat32Array(3),n.edgeColor=r.getFloat32Array(4),n.edgeSize=r.getFloat32(),n.textureColor=r.getFloat32Array(4),n.sphereTextureColor=r.getFloat32Array(4),n.toonColor=r.getFloat32Array(4),e.elements.push(n)}return e},t=i.metadata;t.morphCount=r.getUint32(),i.morphs=[];for(var n=0;n<t.morphCount;n++)i.morphs.push(e())}(),function(){var e=function(){var e={};e.name=r.getTextBuffer(),e.englishName=r.getTextBuffer(),e.type=r.getUint8(),e.elementCount=r.getUint32(),e.elements=[];for(var t=0;t<e.elementCount;t++){var n={};n.target=r.getUint8(),n.index=0===n.target?r.getIndex(i.metadata.boneIndexSize):r.getIndex(i.metadata.morphIndexSize),e.elements.push(n)}return e},t=i.metadata;t.frameCount=r.getUint32(),i.frames=[];for(var n=0;n<t.frameCount;n++)i.frames.push(e())}(),function(){var e=function(){var e={};return e.name=r.getTextBuffer(),e.englishName=r.getTextBuffer(),e.boneIndex=r.getIndex(i.metadata.boneIndexSize),e.groupIndex=r.getUint8(),e.groupTarget=r.getUint16(),e.shapeType=r.getUint8(),e.width=r.getFloat32(),e.height=r.getFloat32(),e.depth=r.getFloat32(),e.position=r.getFloat32Array(3),e.rotation=r.getFloat32Array(3),e.weight=r.getFloat32(),e.positionDamping=r.getFloat32(),e.rotationDamping=r.getFloat32(),e.restitution=r.getFloat32(),e.friction=r.getFloat32(),e.type=r.getUint8(),e},t=i.metadata;t.rigidBodyCount=r.getUint32(),i.rigidBodies=[];for(var n=0;n<t.rigidBodyCount;n++)i.rigidBodies.push(e())}(),function(){var e=function(){var e={};return e.name=r.getTextBuffer(),e.englishName=r.getTextBuffer(),e.type=r.getUint8(),e.rigidBodyIndex1=r.getIndex(i.metadata.rigidBodyIndexSize),e.rigidBodyIndex2=r.getIndex(i.metadata.rigidBodyIndexSize),e.position=r.getFloat32Array(3),e.rotation=r.getFloat32Array(3),e.translationLimitation1=r.getFloat32Array(3),e.translationLimitation2=r.getFloat32Array(3),e.rotationLimitation1=r.getFloat32Array(3),e.rotationLimitation2=r.getFloat32Array(3),e.springPosition=r.getFloat32Array(3),e.springRotation=r.getFloat32Array(3),e},t=i.metadata;t.constraintCount=r.getUint32(),i.constraints=[];for(var n=0;n<t.constraintCount;n++)i.constraints.push(e())}(),!0===t&&this.leftToRightModel(i),i},r.prototype.parseVmd=function(e,t){var i={},r=new n(e);i.metadata={},i.metadata.coordinateSystem="left";return function(){var e=i.metadata;if(e.magic=r.getChars(30),"Vocaloid Motion Data 0002"!==e.magic)throw"VMD file magic is not Vocaloid Motion Data 0002, but "+e.magic;e.name=r.getSjisStringsAsUnicode(20)}(),function(){var e=function(){var e={};return e.boneName=r.getSjisStringsAsUnicode(15),e.frameNum=r.getUint32(),e.position=r.getFloat32Array(3),e.rotation=r.getFloat32Array(4),e.interpolation=r.getUint8Array(64),e},t=i.metadata;t.motionCount=r.getUint32(),i.motions=[];for(var n=0;n<t.motionCount;n++)i.motions.push(e())}(),function(){var e=function(){var e={};return e.morphName=r.getSjisStringsAsUnicode(15),e.frameNum=r.getUint32(),e.weight=r.getFloat32(),e},t=i.metadata;t.morphCount=r.getUint32(),i.morphs=[];for(var n=0;n<t.morphCount;n++)i.morphs.push(e())}(),function(){var e=function(){var e={};return e.frameNum=r.getUint32(),e.distance=r.getFloat32(),e.position=r.getFloat32Array(3),e.rotation=r.getFloat32Array(3),e.interpolation=r.getUint8Array(24),e.fov=r.getUint32(),e.perspective=r.getUint8(),e},t=i.metadata;t.cameraCount=r.getUint32(),i.cameras=[];for(var n=0;n<t.cameraCount;n++)i.cameras.push(e())}(),!0===t&&this.leftToRightVmd(i),i},r.prototype.parseVpd=function(e,t){function n(){throw"the file seems not vpd file."}var i={metadata:{}};i.metadata.coordinateSystem="left",i.bones=[];var r=e.replace(/\/\/\w*(\r|\n|\r\n)/g,"").split(/\r|\n|\r\n/);return"Vocaloid Pose Data file"!==r[0]&&n(),r.length<4&&n(),i.metadata.parentFile=r[2],i.metadata.boneCount=parseInt(r[3]),function(){for(var e=/^\s*(Bone[0-9]+)\s*\{\s*(.*)$/,t=/^\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*;/,o=/^\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*;/,a=/^\s*}/,s=i.bones,l=null,c=null,u=null,h=4;h<r.length;h++){var d,p=r[h];null!==(d=p.match(e))&&(null!==l&&n(),l=d[2]),null!==(d=p.match(t))&&(null!==c&&n(),c=[parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])]),null!==(d=p.match(o))&&(null!==u&&n(),u=[parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]),parseFloat(d[4])]),null!==(d=p.match(a))&&(null!==l&&null!==c&&null!==u||n(),s.push({name:l,translation:c,quaternion:u}),l=null,c=null,u=null)}null===l&&null===c&&null===u||n()}(),!0===t&&this.leftToRightVpd(i),i},r.prototype.mergeVmds=function(e){var t={metadata:{}};t.metadata.name=e[0].metadata.name,t.metadata.coordinateSystem=e[0].metadata.coordinateSystem,t.metadata.motionCount=0,t.metadata.morphCount=0,t.metadata.cameraCount=0,t.motions=[],t.morphs=[],t.cameras=[];for(var n=0;n<e.length;n++){var i=e[n];t.metadata.motionCount+=i.metadata.motionCount,t.metadata.morphCount+=i.metadata.morphCount,t.metadata.cameraCount+=i.metadata.cameraCount;for(var r=0;r<i.metadata.motionCount;r++)t.motions.push(i.motions[r]);for(r=0;r<i.metadata.morphCount;r++)t.morphs.push(i.morphs[r]);for(r=0;r<i.metadata.cameraCount;r++)t.cameras.push(i.cameras[r])}return t},r.prototype.leftToRightModel=function(e){if("right"!==e.metadata.coordinateSystem){e.metadata.coordinateSystem="right";for(var t=new i,n=0;n<e.metadata.vertexCount;n++)t.leftToRightVector3(e.vertices[n].position),t.leftToRightVector3(e.vertices[n].normal);for(n=0;n<e.metadata.faceCount;n++)t.leftToRightIndexOrder(e.faces[n].indices);for(n=0;n<e.metadata.boneCount;n++)t.leftToRightVector3(e.bones[n].position);for(n=0;n<e.metadata.morphCount;n++){var r=e.morphs[n];if("pmx"!==e.metadata.format||1===r.type)for(var o=0;o<r.elements.length;o++)t.leftToRightVector3(r.elements[o].position)}for(n=0;n<e.metadata.rigidBodyCount;n++)t.leftToRightVector3(e.rigidBodies[n].position),t.leftToRightEuler(e.rigidBodies[n].rotation);for(n=0;n<e.metadata.constraintCount;n++)t.leftToRightVector3(e.constraints[n].position),t.leftToRightEuler(e.constraints[n].rotation),t.leftToRightVector3Range(e.constraints[n].translationLimitation1,e.constraints[n].translationLimitation2),t.leftToRightEulerRange(e.constraints[n].rotationLimitation1,e.constraints[n].rotationLimitation2)}},r.prototype.leftToRightVmd=function(e){if("right"!==e.metadata.coordinateSystem){e.metadata.coordinateSystem="right";for(var t=new i,n=0;n<e.metadata.motionCount;n++)t.leftToRightVector3(e.motions[n].position),t.leftToRightQuaternion(e.motions[n].rotation);for(n=0;n<e.metadata.cameraCount;n++)t.leftToRightVector3(e.cameras[n].position),t.leftToRightEuler(e.cameras[n].rotation)}},r.prototype.leftToRightVpd=function(e){if("right"!==e.metadata.coordinateSystem){e.metadata.coordinateSystem="right";for(var t=new i,n=0;n<e.bones.length;n++)t.leftToRightVector3(e.bones[n].translation),t.leftToRightQuaternion(e.bones[n].quaternion)}},e.CharsetEncoder=t,e.Parser=r,Object.defineProperty(e,"__esModule",{value:!0})})},
/***/"./src/vendor/threejs/utils/stats.min.js":
/*!***********************************************!*\
  !*** ./src/vendor/threejs/utils/stats.min.js ***!
  \***********************************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";
/* WEBPACK VAR INJECTION */
/* WEBPACK VAR INJECTION */(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function e(){function t(e){return r.appendChild(e.dom),e}function n(e){for(var t=0;t<r.children.length;t++)r.children[t].style.display=t===e?"block":"none";i=e}var i=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",function(e){e.preventDefault(),n(++i%r.children.length)},!1);var o=(performance||Date).now(),a=o,s=0,l=t(new e.Panel("FPS","#0ff","#002")),c=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:r,addPanel:t,showPanel:n,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(c.update(e-o,200),e>a+1e3&&(l.update(1e3*s/(e-a),100),a=e,s=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:r,setMode:n}};
// stats.js - http://github.com/mrdoob/stats.js
n.Panel=function(e,t,n){var i=1/0,r=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,l=48*a,c=3*a,u=2*a,h=3*a,d=15*a,p=74*a,f=30*a,m=document.createElement("canvas");m.width=s,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*a+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,s,l),g.fillStyle=t,g.fillText(e,c,u),g.fillRect(h,d,p,f),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h,d,p,f),{dom:m,update:function(l,v){i=Math.min(i,l),r=Math.max(r,l),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,s,d),g.fillStyle=t,g.fillText(o(l)+" "+e+" ("+o(i)+"-"+o(r)+")",c,u),g.drawImage(m,h+a,d,p-a,f,h,d,p-a,f),g.fillRect(h+p-a,d,a,f),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h+p-a,d,a,o((1-l/v)*f))}}},"object"===t(e)&&(e.exports=n)}).call(this,n(/*! ./../../../../node_modules/webpack/buildin/module.js */"./node_modules/webpack/buildin/module.js")(e))
/***/},
/***/"./src/vendor/utils/layer.js":
/*!***********************************!*\
  !*** ./src/vendor/utils/layer.js ***!
  \***********************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o){var a=document,s="getElementsByClassName",l=function(e){return a.querySelectorAll(e)},c={type:0,shade:!0,shadeClose:!0,fixed:!0,anim:"scale"},u={extend:function(e){var t=JSON.parse(JSON.stringify(c));for(var n in e)t[n]=e[n];return t},timer:{},end:{},touch:function(e,t){e.addEventListener("click",function(e){t.call(this,e)},!1)}},h=0,d=["layui-m-layer"],p=function(e){this.config=u.extend(e),this.view()};p.prototype.view=function(){var e=this,t=e.config,n=a.createElement("div");e.id=n.id=d[0]+h,n.setAttribute("class",d[0]+" "+d[0]+(t.type||0)),n.setAttribute("index",h);var i=function(){var e="object"==r(t.title);return t.title?'<h3 style="'+(e?t.title[1]:"")+'">'+(e?t.title[0]:t.title)+"</h3>":""}(),o=function(){"string"==typeof t.btn&&(t.btn=[t.btn]);var e,n=(t.btn||[]).length;return 0!==n&&t.btn?(e='<span yes type="1">'+t.btn[0]+"</span>",2===n&&(e='<span no type="0">'+t.btn[1]+"</span>"+e),'<div class="layui-m-layerbtn">'+e+"</div>"):""}();if(t.fixed||(t.top=t.hasOwnProperty("top")?t.top:100,t.style=t.style||"",t.style+=" top:"+(a.body.scrollTop+t.top)+"px"),2===t.type&&(t.content='<i></i><i class="layui-m-layerload"></i><i></i><p>'+(t.content||"")+"</p>"),t.skin&&(t.anim="up"),"msg"===t.skin&&(t.shade=!1),n.innerHTML=(t.shade?"<div "+("string"==typeof t.shade?'style="'+t.shade+'"':"")+' class="layui-m-layershade"></div>':"")+'<div class="layui-m-layermain" '+(t.fixed?"":'style="position:static;"')+'><div class="layui-m-layersection"><div class="layui-m-layerchild '+(t.skin?"layui-m-layer-"+t.skin+" ":"")+(t.className?t.className:"")+" "+(t.anim?"layui-m-anim-"+t.anim:"")+'" '+(t.style?'style="'+t.style+'"':"")+">"+i+'<div class="layui-m-layercont">'+t.content+"</div>"+o+"</div></div></div>",!t.type||2===t.type){var c=a[s](d[0]+t.type);c.length>=1&&layer.close(c[0].getAttribute("index"))}document.body.appendChild(n);var u=e.elem=l("#"+e.id)[0];t.success&&t.success(u),e.index=h++,e.action(t,u)},p.prototype.action=function(e,t){var n=this;e.time&&(u.timer[n.index]=setTimeout(function(){layer.close(n.index)},1e3*e.time));var i=function(){0==this.getAttribute("type")?(e.no&&e.no(),layer.close(n.index)):e.yes?e.yes(n.index):layer.close(n.index)};if(e.btn)for(var r=t[s]("layui-m-layerbtn")[0].children,o=r.length,a=0;o>a;a++)u.touch(r[a],i);if(e.shade&&e.shadeClose){var l=t[s]("layui-m-layershade")[0];u.touch(l,function(){layer.close(n.index,e.end)})}e.end&&(u.end[n.index]=e.end)},o.layer={v:"2.0",index:h,open:function(e){return new p(e||{}).index},close:function(e){var t=l("#"+d[0]+e)[0];t&&(t.innerHTML="",a.body.removeChild(t),clearTimeout(u.timer[e]),delete u.timer[e],"function"==typeof u.end[e]&&u.end[e](),delete u.end[e])},closeAll:function(){for(var e=a[s](d[0]),t=0,n=e.length;n>t;t++)layer.close(0|e[0].getAttribute("index"))}},void 0===(i=function(){return layer}.call(t,n,t,e))||(e.exports=i)}(window)},
/***/"./src/views/mmd/animate.js":
/*!**********************************!*\
  !*** ./src/views/mmd/animate.js ***!
  \**********************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(/*! three */"./node_modules/three/build/three.module.js");var i=n(/*! @tweenjs/tween.js */"./node_modules/@tweenjs/tween.js/src/Tween.js");t.randomPosSpotLights=function(e){new i.Tween(e).to({angle:.7*Math.random()+.1,penumbra:Math.random()+1},3e3*Math.random()+2e3).easing(i.Easing.Quadratic.Out).start(),new i.Tween(e.position).to({x:120*Math.random()-60,// (-60,60)
y:20*Math.random()+30,// (30,50)
z:120*Math.random()-60},3e3*Math.random()+2e3).easing(i.Easing.Quadratic.Out).start()}},
/***/"./src/views/mmd/index.js":
/*!********************************!*\
  !*** ./src/views/mmd/index.js ***!
  \********************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(/*! mmd/light */"./src/views/mmd/light.js"),r=n(/*! mmd/mesh */"./src/views/mmd/mesh.js"),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(/*! com_gl/utils/toast */"./src/components/utils/toast.js")),a=n(/*! mmd/animate */"./src/views/mmd/animate.js");var s=n(/*! three */"./node_modules/three/build/three.module.js"),l=n(/*! vendor_threejs/utils/stats.min */"./src/vendor/threejs/utils/stats.min.js"),c=n(/*! vendor_threejs/utils/dat.gui.min */"./src/vendor/threejs/utils/dat.gui.min.js"),u=n(/*! @tweenjs/tween.js */"./node_modules/@tweenjs/tween.js/src/Tween.js");n(/*! vendor_threejs/controls/OrbitControls */"./src/vendor/threejs/controls/OrbitControls.js"),n(/*! vendor_threejs/effects/OutlineEffect */"./src/vendor/threejs/effects/OutlineEffect.js"),n(/*! vendor_threejs/animation/CCDIKSolver */"./src/vendor/threejs/animation/CCDIKSolver.js"),n(/*! vendor_threejs/animation/MMDPhysics */"./src/vendor/threejs/animation/MMDPhysics.js"),n(/*! vendor_threejs/loaders/TGALoader */"./src/vendor/threejs/loaders/TGALoader.js"),
// 以上插件都是MMDLoader需要依赖的
n(/*! vendor_threejs/loaders/MMDLoader */"./src/vendor/threejs/loaders/MMDLoader.js");var h=void 0,d=void 0,p=void 0,f=void 0,m=void 0,g=void 0,v=void 0,y=void 0,x=void 0,b=void 0,_=void 0,w=void 0,M=void 0,E=void 0,T=void 0,A=void 0,S=void 0,C=void 0,R=void 0,L=void 0,P=new s.Clock,O=["http://ovwfvn3zo.bkt.clouddn.com/wavefile_v2.vmd"],I=["http://ovwfvn3zo.bkt.clouddn.com/wavefile_camera.vmd"],B={delayTime:160/30},D=!1,U=function(){_=new s.MMDHelper;var e=new s.MMDLoader;e.load("http://ovwfvn3zo.bkt.clouddn.com/miku_v2.pmd",O,function(t){(f=t).material=function(e){for(
// console.log(materials);
var t=[],n=0,i=e.length;n<i;n++){var r=new s.MeshPhongMaterial;
// 获取原来的材质参数并覆盖成phong着色，原来的是Tont(卡通着色)
r.copy(e[n]),r.needsUpdate=!0,t.push(r)}return t}(f.material),
// console.log(miku.material);
_.add(f),_.setAnimation(f),(
/*
   * Note: create CCDIKHelper after calling helper.setAnimation()
   */
w=new s.CCDIKHelper(f)).visible=!1,p.add(w),
/*
   * Note: You're recommended to call helper.setPhysics()
   *       after calling helper.setAnimation().
  	 */
_.setPhysics(f),(M=new s.MMDPhysicsHelper(f)).visible=!1,p.add(M),e.loadVmds(I,function(t){_.setCamera(d),e.pourVmdIntoCamera(d,t),_.setCameraAnimation(d),e.loadAudio("http://ovwfvn3zo.bkt.clouddn.com/wavefile_short.mp3",function(e,t){t.position.z=1,_.setAudio(e,t,B),
/*
     * Note: call this method after you set all animations
     *       including camera and audio.
     */
_.unifyAnimationDuration(),p.add(e),p.add(t),p.add(f),
// 关闭加载提示
o.closeAll(),D=!0})})},function(e){e.lengthComputable&&(e.loaded,e.total)},function(e){o.netError()})},N=function(e){32!==e.keyCode&&"Space"!=e.code||(y.animation?(y.animation=!1,_.audioManager.audio.pause(),_.doAnimation=!1,_.doCameraAnimation=!1,o.show("pause")):(y.animation=!0,_.audioManager.audio.play(),_.doAnimation=!0,_.doCameraAnimation=!0))},F=function e(){g.update(),// 即时更新FPS
L.update(),y.showSpotLight&&(u.update(),y.slDebug&&(S&&S.update(),C&&C.update(),R&&R.update())),_&&y.animation&&D&&_.animate(P.getDelta()),M&&y.showPhysicsHelper&&M.update(),w&&y.showIkBones&&w.update(),m&&(m.material.map.rotation+=.005),
// 使用帧动画函数
requestAnimationFrame(e),h.render(p,d)},k=function(){(g=new l).setMode(0),// 0: fps, 1: ms
g.domElement.style.position="absolute",g.domElement.style.left="0px",g.domElement.style.top="0px",document.body.appendChild(g.domElement)};// 渲染器
// 定义变量
/**
 * 窗口大小被重置
 * @return {[type]} [description]
 */
function z(){
// 相机宽高比
d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),h.setSize(window.innerWidth,window.innerHeight),document.body.style.width=window.innerWidth+"px",document.body.style.height=window.innerHeight+"px"}t.default=function(e,t){
// 开启加载提示
o.load("scene is loading");
// 初始化组件
k();
// 创建场景
p=new s.Scene,
// camera.position.x = 0;
// camera.position.y = 10;
// camera.position.z = 35;
(
// 创建相机
d=new s.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,2e3)).lookAt(new s.Vector3(0,10,0)),(// 视线指向场景中心
// 创建渲染器
h=new s.WebGLRenderer).setPixelRatio(window.devicePixelRatio),
// 擦除背景色
h.setClearColor(new s.Color(10530223),1),h.setSize(window.innerWidth,window.innerHeight),// 设置视口大小
h.shadowMap.enabled=!0,
// 自然一些的纹理，默认值是PCFShadowMap
h.shadowMap.type=s.PCFSoftShadowMap,y={animation:!0,showPhysicsHelper:!1,showIkBones:!1,showSpotLight:!0,slDebug:!1},(v=new c.GUI).add(y,"showPhysicsHelper").onChange(function(e){M.visible=e}),v.add(y,"showIkBones").onChange(function(e){w.visible=e}),v.add(y,"slDebug").onChange(function(e){S.visible=e,C.visible=e,R.visible=e}),v.add(y,"showSpotLight").onChange(function(e){
// renderer.physicallyCorrectLights = !e;
E.visible=e,T.visible=e,A.visible=e}),(L=new s.OrbitControls(d,h.domElement)).enableZoom=!1,L.enablePan=!1,(b=new s.PolarGridHelper(30,10)).visible=!1,p.add(b),(
// 展示辅助观察的世界坐标系
x=new s.AxesHelper(20)).visible=!1,p.add(x),(m=(0,r.createStageBox)()).position.y=25,m.rotation.x=.5*-Math.PI,
// 设置旋转中心
m.material.map.center.set(.5,.5),p.add(m);var n=new s.AmbientLight(6710886);p.add(n),
// 添加多个聚光灯
E=(0,i.createSpotLight)(16744192),T=(0,i.createSpotLight)(65407),A=(0,i.createSpotLight)(8323327),E.position.set(0,30,-20),T.position.set(-25,30,10),A.position.set(25,30,10),S=new s.SpotLightHelper(E),C=new s.SpotLightHelper(T),R=new s.SpotLightHelper(A),
// spotLight1.visible = false; spotLight2.visible = false; spotLight3.visible = false; 
S.visible=!1,C.visible=!1,R.visible=!1,
// 批量添加对象可以这样
p.add(E,T,A),p.add(S,C,R),function e(){(0,a.randomPosSpotLights)(E),(0,a.randomPosSpotLights)(T),(0,a.randomPosSpotLights)(A),setTimeout(e,1e3)}(),U(),
// 开始渲染
F(),window.addEventListener("resize",z,!1),window.addEventListener("keydown",N,!1),e(h)}},
/***/"./src/views/mmd/light.js":
/*!********************************!*\
  !*** ./src/views/mmd/light.js ***!
  \********************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(/*! three */"./node_modules/three/build/three.module.js");
/**
 * 创建聚光灯
 * @param  {[type]} color [description]
 * @return {[type]}       [description]
 */t.createSpotLight=function(e){var t=new i.SpotLight(e);return t.castShadow=!0,t.angle=.3,// 散射角度（弧度）
t.penumbra=.2,// 边缘衰减幅度，默认为0
t.decay=2,// 根据距离的光的衰减幅度
t.distance=100,t.shadow.mapSize.width=1024,t.shadow.mapSize.height=1024,t}},
/***/"./src/views/mmd/mesh.js":
/*!*******************************!*\
  !*** ./src/views/mmd/mesh.js ***!
  \*******************************/
/*! no static exports found */
/***/function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStageBox=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(/*! res_gl/img/play_icon.jpg */"./src/assets/img/play_icon.jpg"));var r=n(/*! three */"./node_modules/three/build/three.module.js");t.createStageBox=function(){var e=new r.BoxGeometry(50,50,50),t=(new r.TextureLoader).load(i.default),n=new r.MeshPhongMaterial({color:10530223,shininess:10,specular:1118481,side:r.BackSide,map:t});return new r.Mesh(e,n)}}
/******/});